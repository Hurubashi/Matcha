(this["webpackJsonpcreate-react-app-with-typescript"]=this["webpackJsonpcreate-react-app-with-typescript"]||[]).push([[0],{255:function(e,t,a){e.exports=a(441)},438:function(e,t){},441:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(14),i=a.n(l),o=a(60),c=a(18),s=a(35),m=a(84),u=a(42),d=a.n(u),g=a(491),p=a(151),f=a(492),h=a(512),b=a(494),E=a(116),v=a.n(E),y=a(117),k=a.n(y),x=a(13),j=a(481),O=a(525),w=Object(j.a)((function(e){return Object(O.a)({h1:{marginTop:"0.5em",fontWeight:400,fontSize:"3.5em"},root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",backgroundSize:"cover",backgroundPosition:"center 40%",marginTop:"2em"},sectionDesktop:Object(x.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(x.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"}),rightScrollingContainer:Object(x.a)({height:"inherit",overflow:"hidden",position:"relative"},e.breakpoints.down("xs"),{position:"initial"})})})),C=a(9),N=a(484),S=a(513),I=function(e){var t=r.a.useState(e),a=Object(C.a)(t,1)[0];return r.a.createElement(N.a,{container:!0,alignItems:"flex-end"},r.a.createElement(N.a,{item:!0,xs:1},r.a.createElement(a.icon,null)),r.a.createElement(N.a,{item:!0,xs:11},r.a.createElement(S.a,{label:a.label,type:a.type,name:a.name,fullWidth:!0,onChange:a.handleChange,onBlur:a.handleBlur})))},B=Object(m.b)({mapPropsToValues:function(e){return{username:"",password:"",remember:!0}},validationSchema:s.object().shape({username:s.string().required("Required"),password:s.string().required("Required").min(6,"Must be 6 characters or less")}),handleSubmit:function(e,t){d.a.post("/api/auth/login",{username:e.username,password:e.password}).then((function(e){!0===e.data.success?t.setStatus(!0):(t.setErrors({username:e.data.msg}),t.setSubmitting(!1))})).catch((function(e){!0===e.response.data.success?t.setStatus(!0):(t.setErrors({username:e.response.data.msg}),t.setSubmitting(!1))}))}})((function(e){var t=e.touched,a=e.errors,n=e.isSubmitting,l=w();return e.status?r.a.createElement(o.a,{to:"/profile"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{maxWidth:"sm"},r.a.createElement(p.a,{variant:"h1",className:l.h1},"Sign In"),r.a.createElement(m.a,null,r.a.createElement(I,{label:"Username",type:"text",name:"username",icon:v.a,handleChange:e.handleChange,handleBlur:e.handleBlur}),t.username&&a.username&&r.a.createElement("div",null,a.username),r.a.createElement(I,{label:"Password",type:"password",name:"password",icon:k.a,handleChange:e.handleChange,handleBlur:e.handleBlur}),t.password&&a.password&&r.a.createElement("div",null,a.password),r.a.createElement(f.a,{type:"submit",variant:"contained",fullWidth:!0,disabled:n,style:{marginTop:"2em"}},"Log In")),r.a.createElement(h.a,{m:1,textAlign:"center"},r.a.createElement(p.a,{variant:"body1"},"New here? ",r.a.createElement(c.b,{to:"/register"},r.a.createElement(b.a,{component:"button",type:"button",variant:"body1"},"Sign Up"))))))})),q=a(524),A=a(495),M=a(515),R=a(224),T=a.n(R),F=a(225),L=a.n(F),P=a(226),D=a.n(P),U=a(227),z=a.n(U),W=Object(m.b)({mapPropsToValues:function(e){return{email:"",username:"",firstName:"",lastName:"",password:"",birth:"",gender:""}},validationSchema:s.object().shape({email:s.string().email("Should be a valid email adress").required("Required"),username:s.string().required("Required"),firstName:s.string().required("Required"),lastName:s.string().required("Required"),password:s.string().required("Required").min(6,"Must be 6 characters or less"),birth:s.string().required("Required"),gender:s.string().required("Required")}),handleSubmit:function(e,t){console.log(e),d.a.post("/api/auth/register",{email:e.email,username:e.username,firstName:e.firstName,lastName:e.lastName,password:e.password,birth:e.birth,gender:e.gender}).then((function(e){!0===e.data.success?t.setStatus(!0):(t.setErrors({username:e.data.msg}),t.setSubmitting(!1))})).catch((function(e){if(!e.response)return console.log("No Connection"),void t.setSubmitting(!1);!0===e.response.data.success?t.setStatus(!0):(t.setErrors({username:e.response.data.msg}),t.setSubmitting(!1))}))}})((function(e){var t=e.touched,a=e.errors,n=e.isSubmitting,l=w();return e.status?r.a.createElement(o.a,{to:"/profile"}):r.a.createElement(g.a,{maxWidth:"sm"},r.a.createElement(p.a,{variant:"h1",className:l.h1},"Sing Up"),r.a.createElement(m.a,null,r.a.createElement(I,{label:"Email",type:"email",name:"email",icon:T.a,handleChange:e.handleChange,handleBlur:e.handleBlur}),t.email&&a.email&&r.a.createElement("div",null,a.email),r.a.createElement(I,{label:"Username",type:"username",name:"username",icon:v.a,handleChange:e.handleChange,handleBlur:e.handleBlur}),t.username&&a.username&&r.a.createElement("div",null,a.username),r.a.createElement(I,{label:"First name",type:"firstName",name:"firstName",icon:L.a,handleChange:e.handleChange,handleBlur:e.handleBlur}),t.firstName&&a.firstName&&r.a.createElement("div",null,a.firstName),r.a.createElement(I,{label:"Last name",type:"lastName",name:"lastName",icon:D.a,handleChange:e.handleChange,handleBlur:e.handleBlur}),t.lastName&&a.lastName&&r.a.createElement("div",null,a.lastName),r.a.createElement(N.a,{container:!0,alignItems:"flex-end",style:{height:"3.587em"}},r.a.createElement(N.a,{item:!0,xs:1},r.a.createElement(z.a,null)),r.a.createElement(N.a,{item:!0,xs:11},r.a.createElement(S.a,{id:"date",type:"date",name:"birth",onChange:e.handleChange,fullWidth:!0,InputLabelProps:{shrink:!0}}))),t.birth&&a.birth&&r.a.createElement("div",null,a.birth),r.a.createElement(N.a,{container:!0,alignItems:"flex-end",style:{height:"3.587em"}},r.a.createElement(N.a,{item:!0,xs:1},r.a.createElement("img",{src:"/images/genderIcon.svg",alt:"gender",style:{width:"2em",height:"2em"}})),r.a.createElement(N.a,{item:!0,xs:11},r.a.createElement(q.a,{"aria-label":"gender",onChange:e.handleChange,row:!0,name:"gender",style:{borderBottom:"0.5px solid #0f0f11"}},["male","female"].map((function(e){return r.a.createElement(A.a,{key:"gender"+e,value:e,control:r.a.createElement(M.a,{color:"primary"}),label:e,labelPlacement:"end"})}))))),t.gender&&a.gender&&r.a.createElement("div",null,a.gender),r.a.createElement(I,{label:"Password",type:"password",name:"password",icon:k.a,handleChange:e.handleChange,handleBlur:e.handleBlur}),t.password&&a.password&&r.a.createElement("div",null,a.password),r.a.createElement(h.a,{mt:2},r.a.createElement(f.a,{type:"submit",variant:"contained",fullWidth:!0,disabled:n},"Sign Up")),r.a.createElement(h.a,{m:1,textAlign:"center"},r.a.createElement(p.a,{variant:"body1"},"Already have accaunt? ",r.a.createElement(c.b,{to:"/login"},r.a.createElement(b.a,{component:"button",type:"button",variant:"body1"},"Sign In"))))))})),H=a(496),G=a(514),V=Object(j.a)((function(e){return Object(O.a)({root:{position:"absolute"},fullWidth:{width:"100%"}})})),Y=function(){var e=V(),t=Object(o.g)(),a=Object(n.useState)({success:void 0,msg:void 0,responded:!1}),l=Object(C.a)(a,2),i=l[0],c=l[1];return!1===i.responded&&d.a.get("/api/auth/verify/"+t.userid+"/"+t.uuid).then((function(e){console.log(t.userid),!0===e.data.success&&c({success:!0,msg:"You email successufully verified.",responded:!0})})).catch((function(e){e.response.data&&!1===e.response.data.success&&c({success:!1,msg:e.response.data.msg,responded:!0})})),r.a.createElement(g.a,{maxWidth:"md"},r.a.createElement(h.a,{justifyContent:"center",marginTop:"2.5em",display:"flex"},!0===i.success&&r.a.createElement(G.a,{severity:"success",className:e.fullWidth},i.msg),void 0===i.success&&r.a.createElement(H.a,{className:e.root}),!1===i.success&&r.a.createElement(G.a,{severity:"error",className:e.fullWidth},i.msg)))},$=a(228),K=a.n($),J=function(){return!!K.a.get("user")},X=a(497),Z=a(498),Q=a(499),_=a(516),ee=Object(j.a)((function(e){return Object(O.a)({grow:{flexGrow:1},appBar:{backgroundColor:e.palette.background.default,boxShadow:"none",zIndex:2},iconButton:{borderRadius:"0.1em"},link:{textDecoration:"none",color:e.palette.text.primary,padding:"1em"}})})),te=a(442),ae=n.createContext(null),ne=ae.Provider,re=ae.Consumer,le=a(230),ie=a.n(le),oe=a(229),ce=a.n(oe),se=a(445),me=a(443),ue=a(244),de=function(){var e=ee(),t=r.a.useState(!1),a=Object(C.a)(t,2),n=a[0],l=a[1],i=r.a.createElement(re,null,(function(t){return"success"===(null===t||void 0===t?void 0:t.state.status)&&r.a.createElement(X.a,{style:{display:"flex",flexDirection:"column"}},r.a.createElement(c.b,{to:"/search",className:e.link},r.a.createElement(te.a,{className:e.iconButton,color:"inherit"},"Search")),r.a.createElement(c.b,{to:t.state.data.username,className:e.link},r.a.createElement(te.a,{className:e.iconButton,color:"inherit"},"My profile")),r.a.createElement(c.b,{to:"/profile",className:e.link},r.a.createElement(te.a,{className:e.iconButton,color:"inherit"},"Settings")))}));return r.a.createElement(re,null,(function(t){return"success"===(null===t||void 0===t?void 0:t.state.status)&&r.a.createElement(Z.a,{position:"static",className:e.appBar},r.a.createElement(Q.a,null,r.a.createElement(ce.a,{style:{marginRight:"1em"}}),r.a.createElement(p.a,{variant:"h3"},"Matcha"),r.a.createElement("div",{className:e.grow}),r.a.createElement(_.a,{mdUp:!0},r.a.createElement(ie.a,{onClick:function(){return l(!0)}}),r.a.createElement(se.a,{style:{display:"flex",alignItems:"center",justifyContent:"center"},"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:n,onClose:function(){return l(!1)},closeAfterTransition:!0,BackdropComponent:me.a,BackdropProps:{timeout:500}},r.a.createElement(ue.a,{in:n},i))),r.a.createElement(_.a,{smDown:!0},i)))}))},ge=function(e){return J()?r.a.createElement(o.a,{to:"/profile"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(de,null),r.a.createElement(o.b,{path:e.path,component:e.component}))},pe=a(119),fe=a.n(pe),he=Object(j.a)((function(e){var t,a;return Object(O.a)({marginSm:{margin:"".concat(e.spacing(.1),"em")},paddingSm:{padding:"".concat(e.spacing(.1),"em")},profileAvatar:(t={width:"22em",height:"22em"},Object(x.a)(t,e.breakpoints.down("xs"),{width:"16em",height:"16em",margin:"none"}),Object(x.a)(t,"borderRadius","50%"),Object(x.a)(t,"display","block"),Object(x.a)(t,"margin","auto"),Object(x.a)(t,"position","relative"),Object(x.a)(t,"cursor","pointer"),t),visibleAvatarChange:{"&:hover":{"& $profileAvatarChange":{visibility:"visible"}}},profileAvatarChange:(a={marginTop:"-22em"},Object(x.a)(a,e.breakpoints.down("xs"),{marginTop:"-16em"}),Object(x.a)(a,"lineHeight","".concat(e.spacing(.5),"em")),Object(x.a)(a,"display","flex"),Object(x.a)(a,"backgroundColor",e.palette.background.default),Object(x.a)(a,"color","white"),Object(x.a)(a,"opacity",.5),Object(x.a)(a,"visibility","hidden"),Object(x.a)(a,"marginBottom","0.5em"),a),photoLibraryIcon:{fontSize:"".concat(e.spacing(.5),"em"),margin:"auto"},profileTextField:{marginBottom:"0.7em",paddingBottom:"0.4em",borderBottom:"1px solid #28272c"},profileCard:{marginBottom:"2em"},basicInputFieldsContainer:{paddingTop:"1.5em",alignSelf:"flex-start"},chip:{margin:"".concat(e.spacing(.05),"em")}})})),be=[{name:"Username",key:"username"},{name:"Email",key:"email"},{name:"First Name",key:"firstName"},{name:"Last Name",key:"lastName"}],Ee=a(26),ve=a(523),ye=a(500),ke=a(501),xe=a(502),je=a(80),Oe=a.n(je),we=function(e){var t,a=e.setProfile,n=e.profile,l=e.editable,i=he(),o=r.a.useState(!1),c=Object(C.a)(o,2),s=c[0],m=c[1],u=r.a.useState(""),d=Object(C.a)(u,2),g=d[0],b=d[1],E=function(){m(!1)},v=function(){if(a){var e=n.interests;e.push(g),a(Object(Ee.a)({},n,{interests:e})),b(""),E()}};return r.a.createElement(h.a,{marginBottom:"1em"},l?r.a.createElement(h.a,null,r.a.createElement(p.a,null,"Interests",":"),n.interests.map((function(e){return r.a.createElement(ve.a,{key:e,label:e,className:i.chip,onDelete:(t=e,function(){a&&a(Object(Ee.a)({},n,{interests:n.interests.filter((function(e){return e!==t}))}))})});var t})),r.a.createElement(ve.a,{icon:r.a.createElement(Oe.a,null),className:i.chip,label:"New",clickable:!0,onClick:function(){m(!0)}})):r.a.createElement(h.a,{textAlign:"left"},r.a.createElement(p.a,null,"Interests",":"),n.interests.map((function(e){return r.a.createElement(ve.a,{key:e,label:e,className:i.chip,variant:"outlined"})}))),r.a.createElement(ye.a,{onClose:E,"aria-labelledby":"customized-dialog-title",open:s},r.a.createElement(ke.a,{dividers:!0},r.a.createElement(S.a,{id:"outlined-search",label:"Search field",type:"search",variant:"outlined",value:g,onChange:function(e){var t=e.target.value;b(t)},onKeyDown:(t=v,function(e){13===e.keyCode&&t()}),fullWidth:!0,autoFocus:!0,InputProps:{startAdornment:r.a.createElement(xe.a,{position:"start"},"#")}})),r.a.createElement(h.a,{textAlign:"center",m:1},r.a.createElement(f.a,{autoFocus:!0,variant:"outlined",size:"small",onClick:v},"Add"))))},Ce=function(e){var t,a=e.setProfile,n=e.profile,l=e.editable,i=he(),o=r.a.useState(!1),c=Object(C.a)(o,2),s=c[0],m=c[1],u=r.a.useState(""),d=Object(C.a)(u,2),g=d[0],b=d[1],E=function(){m(!1)},v=function(){if(a){var e=n.lookingFor;e.push(g),a(Object(Ee.a)({},n,{lookingFor:e})),b(""),E()}};return r.a.createElement(h.a,{marginBottom:"1em"},l?r.a.createElement(h.a,null,r.a.createElement(p.a,null,"LookingFor",":"),n.lookingFor.map((function(e){return r.a.createElement(ve.a,{key:e,label:e,className:i.chip,onDelete:(t=e,function(){a&&a(Object(Ee.a)({},n,{lookingFor:n.lookingFor.filter((function(e){return e!==t}))}))})});var t})),r.a.createElement(ve.a,{icon:r.a.createElement(Oe.a,null),className:i.chip,label:"New",clickable:!0,onClick:function(){m(!0)}})):r.a.createElement(h.a,{textAlign:"left"},r.a.createElement(p.a,null,"LookingFor",":"),n.lookingFor.map((function(e){return r.a.createElement(ve.a,{key:e,label:e,className:i.chip,variant:"outlined"})}))),r.a.createElement(ye.a,{onClose:E,"aria-labelledby":"customized-dialog-title",open:s},r.a.createElement(ke.a,{dividers:!0},r.a.createElement(S.a,{id:"outlined-search",label:"Search field",type:"search",variant:"outlined",value:g,onChange:function(e){var t=e.target.value;b(t)},onKeyDown:(t=v,function(e){13===e.keyCode&&t()}),fullWidth:!0,autoFocus:!0,InputProps:{startAdornment:r.a.createElement(xe.a,{position:"start"},"#")}})),r.a.createElement(h.a,{textAlign:"center",m:1},r.a.createElement(f.a,{autoFocus:!0,variant:"outlined",size:"small",onClick:v},"Add"))))},Ne=function(e){var t=e.user,a=e.setEditable,n=he();return r.a.createElement(h.a,{className:n.profileCard},r.a.createElement(N.a,{container:!0},r.a.createElement(N.a,{item:!0,xs:12,md:6},r.a.createElement("div",{className:"".concat(n.profileAvatar," ").concat(n.visibleAvatarChange)},r.a.createElement("img",{className:n.profileAvatar,src:t.avatar?t.avatar.normal:"/images/noavatar".concat(t.gender,".jpg"),alt:"Your avatar"}),r.a.createElement(c.b,{to:"/gallery"},r.a.createElement("div",{className:"".concat(n.profileAvatar," ").concat(n.profileAvatarChange)},r.a.createElement(fe.a,{className:n.photoLibraryIcon}))))),r.a.createElement(N.a,{item:!0,xs:12,md:6,className:n.basicInputFieldsContainer},r.a.createElement(h.a,null,be.map((function(e){return r.a.createElement(p.a,{align:"left",className:n.profileTextField,key:e.key},e.name,": ",t[e.key])}))),r.a.createElement(h.a,{textAlign:"left"},r.a.createElement(p.a,{className:n.profileTextField},"Gender",": ",t.gender),r.a.createElement(p.a,{className:n.profileTextField},"Sexual preferences",": ",t.preferences)))),r.a.createElement(p.a,{align:"left",className:n.profileTextField},"Birthday:"," ",new Date(t.birth).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})),r.a.createElement(p.a,{align:"left",className:n.profileTextField},"Latitude: ",t.lat),r.a.createElement(p.a,{align:"left",className:n.profileTextField},"Longitude: ",t.lon),r.a.createElement(Ce,{setProfile:null,profile:t,editable:!1}),r.a.createElement(we,{setProfile:null,profile:t,editable:!1}),r.a.createElement(h.a,{textAlign:"center"},r.a.createElement(p.a,{align:"left"},"About",":"),r.a.createElement(h.a,{className:n.paddingSm},r.a.createElement(p.a,{align:"left"},t.biography)),r.a.createElement(f.a,{onClick:function(){return a(!0)},variant:"outlined",className:n.marginSm},"Edit")))},Se=a(487),Ie=a(488),Be=a(29),qe=a(30),Ae=a(49),Me=a(48),Re=a(50),Te=function(){function e(){Object(Be.a)(this,e),this.baseUrl=void 0,this.reducer=function(e,t){switch(t.type){case"request":return{status:"loading"};case"success":return{status:"success",data:t.results};case"failure":return{status:"error",error:t.error}}}}return Object(qe.a)(e,[{key:"requestDefault",value:function(e,t){d()(e).then((function(e){!0===e.data.success?(console.log(e.data.data),t({type:"success",results:e.data.data})):t({type:"failure",error:e.data.message})})).catch((function(e){t({type:"failure",error:e.message})}))}},{key:"request",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};d()(e).then((function(e){!0===e.data.success?t(e):a(e.data.message)})).catch((function(e){a(e.message)}))}},{key:"getReq",value:function(e){return{url:void 0===e?this.baseUrl:e,method:"GET"}}},{key:"postReq",value:function(e,t){return{url:void 0===t?this.baseUrl:t,method:"POST",data:e}}},{key:"putReq",value:function(e,t){return{url:void 0===t?this.baseUrl:t,method:"PUT",data:e}}},{key:"delReq",value:function(e){return{url:void 0===e?this.baseUrl:e,method:"DELETE"}}}]),e}(),Fe=function(e){function t(){var e,a;Object(Be.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(Ae.a)(this,(e=Object(Me.a)(t)).call.apply(e,[this].concat(r)))).baseUrl="/api/user",a}return Object(Re.a)(t,e),Object(qe.a)(t,[{key:"getUser",value:function(e,t){var a=this;this.request(this.getReq("/api/user/".concat(t)),(function(t){e({type:"success",results:Object(Ee.a)({},t.data.data,{birth:a.formatDate(t.data.data.birth)})})}),(function(t){e({type:"failure",error:t})}))}},{key:"saveUser",value:function(e,t,a){var n=this;this.request(this.putReq(e),(function(e){t({type:"success",results:Object(Ee.a)({},e.data.data,{birth:n.formatDate(e.data.data.birth)})}),a()}),(function(e){t({type:"failure",error:e})}))}},{key:"formatDate",value:function(e){var t=new Date(e),a=new Intl.DateTimeFormat("en",{year:"numeric",month:"2-digit",day:"2-digit"}).formatToParts(t),n=Object(C.a)(a,5),r=n[0].value,l=n[2].value,i=n[4].value;return"".concat(i,"-").concat(r,"-").concat(l)}},{key:"getLocation",value:function(e,t){var a=this;navigator.geolocation?console.log(navigator.geolocation.getCurrentPosition((function(n){var r=n.coords.latitude,l=n.coords.longitude;a.request(a.putReq({lat:r,lon:l}),(function(e){t(r,l)}),(function(t){e({type:"failure",error:t})}))}),(function(e){console.log("PositionError:"+e.message)}))):console.log("Geolocation is not supported by your browser")}},{key:"getDistanse",value:function(e,t,a,n){var r=e*Math.PI/180,l=a*Math.PI/180,i=(a-e)*Math.PI/180,o=(n-t)*Math.PI/180,c=Math.sin(i/2)*Math.sin(i/2)+Math.cos(r)*Math.cos(l)*Math.sin(o/2)*Math.sin(o/2),s=2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c));return Math.round(100*(6371e3*s/1e3+Number.EPSILON))/100}},{key:"giveHurt",value:function(e,t){this.request(this.postReq({},"/api/heart/".concat(t.id)),(function(a){a.data.success&&e({type:"success",results:Object(Ee.a)({},t,{heartsNumber:t.heartsNumber+1,heartIsGiven:!0})})}),(function(t){e({type:"failure",error:t})}))}},{key:"returnHurt",value:function(e,t){this.request(this.delReq("/api/heart/".concat(t.id)),(function(a){a.data.success&&e({type:"success",results:Object(Ee.a)({},t,{heartsNumber:t.heartsNumber-1,heartIsGiven:!1})})}),(function(t){e({type:"failure",error:t})}))}}]),t}(Te),Le=new Fe,Pe=function(e){var t=he(),a=e.dispatch,l=e.user,i=e.setEditable,o=Object(n.useState)(Object(Ee.a)({},l,{interests:l.interests.slice()})),s=Object(C.a)(o,2),m=s[0],u=s[1],d=function(e){return function(t){u(Object(Ee.a)({},m,Object(x.a)({},e,t.target.value)))}},g=function(e){return function(t){new RegExp(/(^[-+]?\d*\.?\d*$)/g).test(t.target.value)&&u(Object(Ee.a)({},m,Object(x.a)({},e,t.target.value)))}};return r.a.createElement(h.a,{className:t.profileCard},r.a.createElement(N.a,{container:!0},r.a.createElement(N.a,{item:!0,xs:12,md:6},r.a.createElement("div",{className:"".concat(t.profileAvatar," ").concat(t.visibleAvatarChange)},r.a.createElement("img",{className:t.profileAvatar,src:m.avatar?m.avatar.normal:"/images/noavatar".concat(m.gender,".jpg"),alt:"Your avatar"}),r.a.createElement(c.b,{to:"/gallery"},r.a.createElement("div",{className:"".concat(t.profileAvatar," ").concat(t.profileAvatarChange)},r.a.createElement(fe.a,{className:t.photoLibraryIcon}))))),r.a.createElement(N.a,{item:!0,xs:12,md:6,className:t.basicInputFieldsContainer},r.a.createElement(h.a,null,be.map((function(e){return r.a.createElement(S.a,{label:e.name,onChange:d(e.key),value:m[e.key],key:e.key,fullWidth:!0,margin:"dense"})}))),r.a.createElement(h.a,null,r.a.createElement(Se.a,{component:"fieldset"},r.a.createElement(Ie.a,{component:"legend"},"Choose your Gender"),r.a.createElement(q.a,{"aria-label":"gender",value:m.gender||"",onChange:d("gender"),row:!0},["male","female"].map((function(e){return r.a.createElement(A.a,{key:"gender"+e,value:e,control:r.a.createElement(M.a,{color:"primary"}),label:e,labelPlacement:"start"})})))),r.a.createElement(Se.a,{component:"fieldset"},r.a.createElement(Ie.a,{component:"legend"},"Your sexual preference"),r.a.createElement(q.a,{"aria-label":"preferences",row:!0,value:m.preferences,onChange:d("preferences")},["male","female","male and female"].map((function(e){return r.a.createElement(A.a,{key:"pref"+e,value:e,control:r.a.createElement(M.a,{color:"primary"}),label:e,labelPlacement:"start"})}))))))),r.a.createElement(S.a,{id:"date",label:"Birthday",type:"date",defaultValue:m.birth,onChange:d("birth"),InputLabelProps:{shrink:!0}}),r.a.createElement(p.a,null,"Location"),r.a.createElement(N.a,{container:!0},r.a.createElement(N.a,{xs:4,item:!0},r.a.createElement(S.a,{label:"Latitude",onChange:g("lat"),value:m.lat,fullWidth:!0,margin:"dense"})),r.a.createElement(N.a,{xs:4,item:!0},r.a.createElement(S.a,{label:"Longitude",onChange:g("lon"),value:m.lon,fullWidth:!0,margin:"dense"})),r.a.createElement(N.a,{xs:4,item:!0},r.a.createElement(f.a,{onClick:function(){return Le.getLocation(a,(function(e,t){return u(Object(Ee.a)({},m,{lat:e,lon:t}))}))},variant:"outlined",style:{margin:"auto",paddingLeft:"1.5em"}},"Detect"))),r.a.createElement(Ce,{setProfile:u,profile:m,editable:!0}),r.a.createElement(we,{setProfile:u,profile:m,editable:!0}),r.a.createElement(h.a,{textAlign:"center"},r.a.createElement(S.a,{fullWidth:!0,id:"outlined-multiline-static",label:"About",multiline:!0,rows:"8",variant:"outlined",value:m.biography,onChange:d("biography")}),r.a.createElement(f.a,{onClick:function(){a({type:"success",results:l}),i(!1)},variant:"outlined",className:t.marginSm},"Close"),r.a.createElement(f.a,{onClick:function(){return Le.saveUser(Object(Ee.a)({},m,{interests:m.interests,avatar:void 0}),a,(function(){return i(!1)}))},variant:"outlined",className:t.marginSm},"Save")))},De=function(){var e=Object(n.useState)(!1),t=Object(C.a)(e,2),a=t[0],l=t[1];return r.a.createElement(re,null,(function(e){return e&&r.a.createElement(g.a,{maxWidth:"md"},a&&"success"===e.state.status&&r.a.createElement(Pe,{user:e.state.data,dispatch:e.dispatch,setEditable:l}),!a&&"success"===e.state.status&&r.a.createElement(Ne,{user:e.state.data,setEditable:l}))}))},Ue=a(520),ze=a(486),We=function(e){function t(){var e,a;Object(Be.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(Ae.a)(this,(e=Object(Me.a)(t)).call.apply(e,[this].concat(r)))).baseUrl="/api/image",a.uploadImage=function(e,t){var n=e.target;if(n.files){var r=new FormData;r.append("image",n.files[0]),a.request(a.postReq(r),(function(){a.getImages(t)}),(function(e){t({type:"failure",error:e})}))}},a.deleteImage=function(e,t){a.request(a.delReq("/api/image/".concat(e)),(function(){a.getImages(t)}),(function(e){t({type:"failure",error:e})}))},a.setAvatar=function(e,t){a.request(a.putReq({avatar:e},"/api/user"),(function(){a.getImages(t)}),(function(e){t({type:"failure",error:e})}))},a}return Object(Re.a)(t,e),Object(qe.a)(t,[{key:"getImages",value:function(e,t){this.requestDefault(this.getReq(),e)}},{key:"getImagesForSpecificUser",value:function(e,t){this.requestDefault(this.getReq("/api/image/"+t),e)}}]),t}(Te),He=a(242),Ge=a(519),Ve=a(231),Ye=a.n(Ve),$e=Object(j.a)((function(e){var t,a;return Object(O.a)({card:Object(x.a)({marginTop:"1em",marginBottom:"1em",padding:"1em"},e.breakpoints.down("xs"),{marginTop:"0.5em",marginBottom:"0.5em",padding:"0.5em"}),imagesContainer:{display:"flex",flexWrap:"wrap"},root:{display:"flex",flexWrap:"wrap",width:"100%"},centered:{position:"absolute",left:"50%",top:"50%",msTransform:"translateY(-50%)",transform:"translateX(-50%) translateY(-50%)",width:"fit-content",height:"fit-content"},image:(t={display:"inline-block",fontSize:"12px",position:"relative",height:"20em",border:"1px groove ".concat(e.palette.primary.main),margin:"1.16%",width:"31%"},Object(x.a)(t,e.breakpoints.down("xs"),{height:"10em","& $imageBackdrop":{opacity:.25},"& $thumbUp":{visibility:"visible"},"& $edit":{visibility:"visible"}}),Object(x.a)(t,"&:hover",{"& $imageBackdrop":{opacity:.25},"& $thumbUp":{visibility:"visible"},"& $edit":{visibility:"visible"}}),t),imageBackdrop:{opacity:0,backgroundColor:"black"},imageButton:{position:"absolute",right:0,top:0,bottom:0,display:"flex",color:e.palette.common.white},imageSrc:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundSize:"cover",backgroundPosition:"center 40%"},thumbUp:Object(x.a)({right:"1em",bottom:"1em"},e.breakpoints.down("xs"),{right:"0.1em",bottom:"0.1em"}),edit:Object(x.a)({right:"1em",top:"1em"},e.breakpoints.down("xs"),{right:"0.1em",top:"0.1em"}),iconButton:(a={height:"3em",position:"absolute",right:"1em",bottom:"1em",display:"flex",alignItems:"center",color:"white",visibility:"hidden"},Object(x.a)(a,e.breakpoints.down("xs"),{right:"0.1em",bottom:"0.1em",visibility:"hidden"}),Object(x.a)(a,"&:hover",{backgroundColor:"rgba(255, 255, 255, 0.5)"}),a),thumbsCount:{margin:"0.1em"}})})),Ke=new We,Je=function(e){var t=$e(),a=r.a.useState(null),n=Object(C.a)(a,2),l=n[0],i=n[1],o=Boolean(l),c=function(){i(null)},s=r.a.createElement(He.a,{PaperProps:{style:{border:"1px solid #d3d4d5"},onMouseLeave:c},anchorEl:l,transformOrigin:{vertical:"top",horizontal:"center"},keepMounted:!0,open:o,onClose:c},r.a.createElement(Ge.a,{onClick:function(){return Ke.setAvatar(e.id,e.dispatch)}},"Set as Avatar"),r.a.createElement(Ge.a,{onClick:function(){return Ke.deleteImage(e.id,e.dispatch)}},"Remove"));return r.a.createElement(f.a,{key:"edit",size:"small",className:"".concat(t.iconButton," ").concat(t.edit),onClick:function(e){i(e.currentTarget)}},r.a.createElement(Ye.a,null),s)},Xe=new We,Ze=function(){var e=$e(),t=Object(n.useReducer)(Xe.reducer,{status:"loading"}),a=Object(C.a)(t,2),l=a[0],i=a[1];return Object(n.useEffect)((function(){Xe.getImages(i)}),[]),r.a.createElement(g.a,null,"success"===l.status&&r.a.createElement(X.a,{className:e.card},r.a.createElement(p.a,{align:"center"},"Gallery"),r.a.createElement("div",{className:e.imagesContainer},r.a.createElement("div",{className:e.image},r.a.createElement(Ue.a,{title:"Add new photo","aria-label":"add"},r.a.createElement(f.a,{className:e.centered,size:"small",component:"label"},r.a.createElement(ze.a,{type:"file",style:{display:"none"},onChange:function(e){return Xe.uploadImage(e,i)}}),r.a.createElement(Oe.a,{color:"primary",fontSize:"large"})))),l.data.map((function(t,a){return r.a.createElement("div",{key:a,className:e.image},r.a.createElement("span",{className:e.imageSrc,style:{backgroundImage:"url(".concat(t.image.thumbnail,")")}}),r.a.createElement("div",{className:"".concat(e.imageBackdrop," ").concat(e.imageSrc)}),r.a.createElement(Je,{id:t.id,dispatch:i}))})))))},Qe=a(241),_e=a(518),et=a(503),tt=a(504),at=a(521),nt=a(505),rt=a(152),lt=a(506),it=a(233),ot=a.n(it),ct=function(e){function t(){var e,a;Object(Be.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(Ae.a)(this,(e=Object(Me.a)(t)).call.apply(e,[this].concat(r)))).baseUrl="/api/search",a}return Object(Re.a)(t,e),Object(qe.a)(t,[{key:"searchUsers",value:function(e,t){console.log("search users: "+t),this.requestDefault(this.getReq("/api/search?".concat(t)),e)}}]),t}(Te),st=Object(j.a)((function(e){return Object(O.a)({root:{display:"flex",flexWrap:"wrap",width:"100%",marginTop:0},image:Object(x.a)({position:"relative",height:200,width:"31%",margin:"1.16%"},e.breakpoints.down("xs"),{width:"100% !important",height:100}),focusVisible:{},imageButton:{position:"absolute",right:0,top:0,bottom:0,display:"flex",color:e.palette.common.white},imageSrc:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundSize:"cover",backgroundPosition:"center 40%"},imageTitle:{position:"relative",padding:"".concat(e.spacing(1),"px ").concat(e.spacing(1),"px ").concat(e.spacing(1)+6,"px"),fontWeight:"bold"},searchFiltersContainer:{position:"sticky",top:0,left:0,right:0,backgroundColor:e.palette.background.default,zIndex:1}})})),mt=new ct,ut=function(){var e=st(),t=r.a.useReducer(mt.reducer,{status:"loading"}),a=Object(C.a)(t,2),l=a[0],i=a[1],o=Object(n.useRef)(null),s=new URLSearchParams(window.location.search),m=r.a.useState(s.get("lookingfor")),u=Object(C.a)(m,2),d=u[0],g=u[1],b=r.a.useState(s.get("interest")),E=Object(C.a)(b,2),v=E[0],y=E[1],k=r.a.useState(Number(s.get("distance"))||10),x=Object(C.a)(k,2),j=x[0],O=x[1];Object(n.useEffect)((function(){var e;return console.log("location"),console.log(window.location.search),null===(e=o.current)||void 0===e||e.addEventListener("scroll",w),mt.searchUsers(i,window.location.search),function(){var e;return null===(e=o.current)||void 0===e?void 0:e.removeEventListener("scroll",w)}}),[]);var w=function(){o.current&&(o.current.scrollHeight===o.current.scrollTop+o.current.offsetHeight&&console.log("load more"))};return r.a.createElement("div",{ref:o},r.a.createElement(_e.a,{className:e.searchFiltersContainer},r.a.createElement(et.a,{expandIcon:r.a.createElement(ot.a,{style:{color:"white"}}),"aria-controls":"panel1a-content",id:"panel1a-header",style:{flexDirection:"initial"}},r.a.createElement(p.a,{style:{width:"100%",textAlign:"right"}},"Search options")),r.a.createElement(tt.a,null,r.a.createElement(N.a,{container:!0,spacing:2},r.a.createElement(N.a,{item:!0,xs:4},r.a.createElement(p.a,{id:"discrete-slider",gutterBottom:!0},"Distance"),r.a.createElement(at.a,{value:j,getAriaValueText:function(e){return"".concat(e,"km")},"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",onChange:function(e,t){return a=Number(t),void O(a);var a},min:10,max:1e3})),r.a.createElement(N.a,{item:!0,xs:4},r.a.createElement(p.a,{id:"discrete-slider",gutterBottom:!0},"LookingFor"),r.a.createElement(S.a,{type:"text",fullWidth:!0,value:d||"",onChange:function(e){return g(e.currentTarget.value)}})),r.a.createElement(N.a,{item:!0,xs:4},r.a.createElement(p.a,{id:"discrete-slider",gutterBottom:!0},"Interest"),r.a.createElement(S.a,{type:"text",fullWidth:!0,value:v||"",onChange:function(e){return y(e.currentTarget.value)}}))),r.a.createElement(nt.a,null,r.a.createElement(f.a,{size:"small",variant:"outlined",onClick:function(){d?s.set("lookingfor",d):s.delete("lookingfor"),v?s.set("interest",v):s.delete("interest"),j?s.set("distance",String(j)):s.delete("distance"),window.history.pushState({},"","/search?&"+s.toString()),mt.searchUsers(i,window.location.search)}},"Search")))),r.a.createElement(h.a,{className:"".concat(e.root)},"success"===l.status&&l.data.map((function(t,a){var n;return r.a.createElement(rt.a,{focusRipple:!0,key:"user"+a,className:e.image,focusVisibleClassName:e.focusVisible},r.a.createElement(c.b,{to:t.username},r.a.createElement("span",{className:e.imageSrc,style:{backgroundImage:"url(".concat(t.avatar?null===(n=t.avatar)||void 0===n?void 0:n.thumbnail:"/images/noavatar".concat(t.gender,".jpg"),")")}}),r.a.createElement("span",{className:e.imageButton},r.a.createElement(p.a,{component:"span",variant:"subtitle1",color:"inherit",className:e.imageTitle},t.firstName+" "+t.lastName))))})),"loading"===l.status&&Object(Qe.a)(Array(9)).map((function(t,a){return r.a.createElement(lt.a,{key:"skel"+a,variant:"rect",className:e.image,style:{backgroundColor:"gray"}})}))))},dt=a(507),gt=a(508),pt=a(509),ft=a(235),ht=a.n(ft),bt=a(234),Et=a.n(bt),vt=Object(j.a)((function(e){return Object(O.a)({user:{},imagesList:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper,marginTop:"1em"},gridList:{flexWrap:"nowrap",transform:"translateZ(0)"},title:{color:e.palette.primary.light},titleBar:{background:"linear-gradient(to top, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 70%, rgba(0,0,0,0) 100%)"}})})),yt=new Fe,kt=new We,xt=function(){var e=Object(o.g)().user,t=Object(n.useReducer)(yt.reducer,{status:"loading"}),a=Object(C.a)(t,2),l=a[0],i=a[1],c=Object(n.useReducer)(kt.reducer,{status:"loading"}),s=Object(C.a)(c,2),m=s[0],u=s[1],d=vt(),g=he();return Object(n.useEffect)((function(){console.log(e),yt.getUser(i,e),kt.getImagesForSpecificUser(u,e)}),[e]),r.a.createElement(re,null,(function(e){return"success"===(null===e||void 0===e?void 0:e.state.status)&&"success"===l.status&&r.a.createElement(N.a,{container:!0,style:{height:"inherit",padding:"2em"}},r.a.createElement(N.a,{item:!0,xs:6},r.a.createElement(dt.a,{image:l.data.avatar?l.data.avatar.normal:"/images/noavatar".concat(l.data.gender,".jpg"),style:{paddingTop:"150%"}})),r.a.createElement(N.a,{item:!0,xs:6,style:{paddingLeft:"2em"}},r.a.createElement("div",{style:{display:"flex",fontSize:"1.8em",lineHeight:"1.5em"}},r.a.createElement(p.a,{variant:"h4",style:{fontWeight:"bold"}},"".concat(l.data.firstName,", ").concat(l.data.age)),r.a.createElement("div",{style:{flexGrow:1}}),l.data.heartsNumber,r.a.createElement(te.a,{style:{marginTop:"-12px"},onClick:l.data.heartIsGiven?function(){return yt.returnHurt(i,l.data)}:function(){return yt.giveHurt(i,l.data)}},r.a.createElement(Et.a,{style:{width:"1.5em",height:"1.5em",color:l.data.heartIsGiven?"#d73652":"#fff"}}))),r.a.createElement(p.a,{style:{borderBottom:"2px solid #28272c",paddingBottom:"1em"}},r.a.createElement(ht.a,null)," ",yt.getDistanse(e.state.data.lat,e.state.data.lon,l.data.lat,l.data.lon)," km away"),r.a.createElement(p.a,{variant:"h5",style:{color:"#908f96",marginTop:"1em"}},"Looking for"),l.data.lookingFor.map((function(e){return r.a.createElement(ve.a,{key:e,label:e,className:g.chip})})),r.a.createElement(p.a,{variant:"h5",style:{color:"#908f96",marginTop:"1em"}},"About"),r.a.createElement(p.a,null,l.data.biography),"success"===m.status&&r.a.createElement("div",{className:d.imagesList},r.a.createElement(gt.a,{className:d.gridList,cols:3},m.data.map((function(e){return r.a.createElement(pt.a,{key:e.id,style:{height:"10em"}},r.a.createElement("img",{src:e.image.thumbnail,alt:""}))}))),r.a.createElement(N.a,{container:!0},r.a.createElement(N.a,{item:!0,xs:6,style:{marginTop:"1em"}},r.a.createElement(p.a,{style:{color:"#908f96",fontSize:"0.8rem",textTransform:"uppercase"}},"Relationship")),r.a.createElement(N.a,{item:!0,xs:6,style:{marginTop:"1em"}},r.a.createElement(p.a,null,"It's complicated")),r.a.createElement(N.a,{item:!0,xs:6,style:{marginTop:"1em"}},r.a.createElement(p.a,{style:{color:"#908f96",fontSize:"0.8rem",textTransform:"uppercase"}},"Interests")),r.a.createElement(N.a,{item:!0,xs:6,style:{marginTop:"1em"}},l.data.interests.map((function(e,t){return r.a.createElement("span",{key:t,style:{marginRight:"0.2em"}},"#",e)})))))))}))},jt=a(522),Ot=a(236),wt=a.n(Ot),Ct=function(e){function t(){var e,a;Object(Be.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(Ae.a)(this,(e=Object(Me.a)(t)).call.apply(e,[this].concat(r)))).baseUrl="/api/chat",a}return Object(Re.a)(t,e),Object(qe.a)(t,[{key:"getChats",value:function(e,t){this.request(this.getReq(),(function(a){e({type:"success",results:a.data.data}),t()}),(function(t){e({type:"failure",error:t})}))}}]),t}(Te),Nt=Object(j.a)((function(e){return Object(O.a)({chatsList:{padding:"1em"},chatListHeader:{position:"static",minHeight:"64px",marginBottom:"1.5em",display:"flex"},chatItem:{display:"flex",textAlign:"left",justifyContent:"flex-start",width:"100%",marginBottom:"1.5em"},chatItemAvatar:{width:"3.5em",height:"3.5em",marginRight:"0.5em"},chatName:{fontSize:"1rem"},chatTime:{color:"#94929c",fontSize:"0.7rem"},chatMessage:{fontSize:"0.8rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",marginLeft:"0.2em"}})})),St=function(e){var t=new Ct,a=Nt(),n=e.setChat,l=e.socketManager,i=r.a.useReducer(t.reducer,{status:"loading"}),o=Object(C.a)(i,2),c=o[0],s=o[1];return r.a.useEffect((function(){return console.log("useEffect /chat"),t.getChats(s,(function(){l.socket.on("chatlist",(function(e){t.getChats(s,(function(){}))}))})),function(){l.socket.removeListener("chatlist")}}),[]),"success"===c.status?r.a.createElement(h.a,{className:a.chatsList},r.a.createElement(h.a,{className:a.chatListHeader},r.a.createElement(p.a,{variant:"h5",style:{alignSelf:"center"}},"Messages")),r.a.createElement(h.a,null,c.data.map((function(e,t){var l,i,o;return r.a.createElement(rt.a,{className:a.chatItem,key:t,onClick:function(){return n(e)}},r.a.createElement(jt.a,{className:a.chatItemAvatar,alt:"Vasya",src:e.interlocutorAvatar}),r.a.createElement(h.a,{style:{overflow:"hidden"}},r.a.createElement(p.a,{className:a.chatName},e.interlocutorName),r.a.createElement(p.a,{className:a.chatTime},(null===(l=e.lastMsg)||void 0===l?void 0:l.time)?new Date(e.lastMsg.time).toLocaleString():""),r.a.createElement(h.a,{style:{display:"flex"}},e.interlocutorId===(null===(i=e.lastMsg)||void 0===i?void 0:i.senderId)&&r.a.createElement(wt.a,{fontSize:"small"}),r.a.createElement(p.a,{className:a.chatMessage},(null===(o=e.lastMsg)||void 0===o?void 0:o.text)||"No messages"))))})))):r.a.createElement("div",null,"loading...")},It=a(238),Bt=a.n(It),qt=a(237),At=a.n(qt),Mt=function(e){function t(){var e,a;Object(Be.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(Ae.a)(this,(e=Object(Me.a)(t)).call.apply(e,[this].concat(r)))).baseUrl="/api/message",a}return Object(Re.a)(t,e),Object(qe.a)(t,[{key:"getMessages",value:function(e,t,a){this.request(this.getReq("/api/message/chat/".concat(t)),(function(t){e({type:"success",results:t.data.data}),a()}),(function(t){e({type:"failure",error:t})}))}}]),t}(Te),Rt=Object(j.a)((function(e){return Object(O.a)({chatBox:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:2},messageBox:{overflowY:"scroll",paddingLeft:20,paddingRight:20,height:"calc(100% - 14em)"},close:{display:"flex",padding:"0.8em",borderBottom:"1px solid #c4c4c480",marginBottom:"0.5em"},message:{position:"relative",marginBottom:"10px",padding:"10px",textAlign:"left",font:"400 .9em 'Open Sans', sans-serif",borderRadius:"10px"},leftMessage:{marginRight:"20px",backgroundColor:"#24232a"},rightMessage:{marginLeft:"20px",backgroundColor:"#e92d41"},messageContent:{padding:"0",margin:"0"},messageInput:{position:"absolute",left:0,right:0,bottom:0,padding:10,font:"400 .9em 'Open Sans', sans-serif"}})})),Tt=new Mt,Ft=function(e){var t=Rt(),a=e.chat,n=e.setChat,l=e.socketManager,i=r.a.useState(""),o=Object(C.a)(i,2),c=o[0],s=o[1],m=r.a.useRef(null),u=r.a.useReducer(Tt.reducer,{status:"loading"}),d=Object(C.a)(u,2),g=d[0],f=d[1],b=function(e){m&&m.current&&(e?m.current.scrollIntoView({behavior:"smooth"}):m.current.scrollIntoView())};r.a.useEffect((function(){return Tt.getMessages(f,a.id,(function(){b(!1)})),l.socket.on("messageSent",(function(e){s(""),f({type:"success",results:e}),b(!0)})),l.socket.on("message",(function(e){console.log("incoming message"),console.log(e),"success"===g.status&&f({type:"success",results:e}),b(!0)})),function(){l.socket.removeListener("message"),l.socket.removeListener("messageSent")}}),[a]);var E,v=function(){var e=c.replace(/(\r\n|\n|\r)/gm,"");s(e),e.length>0&&l.sendMessage({chatId:a.id,receiverId:a.interlocutorId,text:e})};return r.a.createElement(X.a,{className:t.chatBox},"success"===g.status&&r.a.createElement(h.a,{className:t.close},r.a.createElement(jt.a,{src:a.interlocutorAvatar,style:{width:"3em",height:"3em"}}),r.a.createElement(p.a,{variant:"h6",style:{padding:"0.5em"}},a.interlocutorName),r.a.createElement("div",{style:{flexGrow:1}}),r.a.createElement(te.a,{style:{width:"2em",height:"2em"},onClick:function(){return n(null)}},r.a.createElement(At.a,{fontSize:"default"}))),r.a.createElement(h.a,{color:"text.primary",className:t.messageBox},"success"===g.status&&g.data.map((function(e,n){var l=a.interlocutorId===e.senderId?t.leftMessage:t.rightMessage;return r.a.createElement("div",{className:"".concat(t.message," ").concat(l),key:"msg"+n},r.a.createElement(p.a,{className:t.messageContent},e.message))})),r.a.createElement("div",{ref:m})),r.a.createElement(S.a,{placeholder:"Enter your message",className:t.messageInput,multiline:!0,variant:"outlined",rowsMax:"4",value:c,onChange:function(e){return s(e.target.value)},onKeyDown:(E=v,function(e){13===e.keyCode&&E()}),InputProps:{endAdornment:r.a.createElement(te.a,{onClick:v},r.a.createElement(Bt.a,null))}}))},Lt=a(517),Pt=a(239),Dt=a.n(Pt),Ut=function(){function e(){Object(Be.a)(this,e),this.address="https://matcha.mrybak.me",this.socket=Dt()(this.address),this.socket.on("error",(function(e){console.log("received socket error:"),console.log(e)})),this.socket.on("connect",(function(){console.log("socket successfuly connected!"),console.log("https://matcha.mrybak.me")}))}return Object(qe.a)(e,[{key:"sendMessage",value:function(e){console.log("sending message"),console.log(e),this.socket.emit("message",e)}}]),e}(),zt=new Fe,Wt=new Ut,Ht=function(e){var t=r.a.useReducer(zt.reducer,{status:"loading"}),a=Object(C.a)(t,2),n=a[0],l=a[1],i=r.a.useState(null),c=Object(C.a)(i,2),s=c[0],m=c[1],u=r.a.useState(!0),d=Object(C.a)(u,2),p=d[0],f=d[1],h=w();return r.a.useEffect((function(){zt.getUser(l)}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ne,{value:{state:n,dispatch:l}},r.a.createElement(g.a,{style:{paddingTop:"0.5em",paddingBottom:"0.5em"}},r.a.createElement(X.a,{style:{border:"1px solid bisque"}},r.a.createElement(N.a,{container:!0,style:{height:"calc(100vh - 2em)"}},r.a.createElement(_.a,{smDown:!0},r.a.createElement(N.a,{item:!0,md:3,style:{borderRight:"1px solid bisque"}},r.a.createElement(St,{setChat:m,socketManager:Wt}))),r.a.createElement(_.a,{mdUp:!0},r.a.createElement(Lt.a,{anchor:"left",open:p,onClose:function(){return f(!1)},onOpen:function(){return f(!0)}},r.a.createElement(St,{setChat:m,socketManager:Wt}))),r.a.createElement(o.b,{path:e.path},r.a.createElement(N.a,{item:!0,xs:12,md:9,className:h.rightScrollingContainer},r.a.createElement(de,null),s?r.a.createElement(Ft,{chat:s,setChat:m,socketManager:Wt}):"",r.a.createElement("div",{style:{height:"calc(100% - 5em)",overflowY:"scroll"}},r.a.createElement(e.component,null)))))))))},Gt=function(e){return J()?r.a.createElement(Ht,{component:e.component,path:e.path}):r.a.createElement(o.a,{to:"/login"})},Vt=a(511),Yt=a(510),$t=a(240);var Kt=function(e){return function(){console.log("THEME: "+e);var t=function(e){switch(e){case"light":return{primary:{main:"#FE5D26"},secondary:{main:"#19857b"},background:{default:"#fff"},text:{primary:"#1a191e"}};case"dark":return{primary:{main:"#FE5D26"},secondary:{main:"#19857b"},background:{default:"#1a191e",paper:"#1a191e"},text:{primary:"#fff",secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)"}}}}(e);return Object($t.a)({palette:t,typography:{fontFamily:["Roboto","Helvetica","Arial"].join(","),fontSize:13},overrides:{MuiIconButton:{root:{color:"#fff","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.19)"}}},MuiOutlinedInput:{notchedOutline:{borderColor:"bisque"}},MuiButton:{contained:{background:"linear-gradient(45deg, #FE5D26 30%, #FF8E53 90%)",color:"white"},outlined:{color:"#fff",backgroundColor:"#1a191e",borderColor:"#fff"},root:{color:"#fff","&:hover":{backgroundColor:"#49484a"}}},MuiChip:{root:{color:"#fff",backgroundColor:"#FE5D26"},outlined:{color:"#fff",backgroundColor:"#FE5D26"}},MuiPaper:{outlined:{borderColor:"#fff"}},MuiTypography:{h3:{fontFamily:"Dancing Script",fontSize:"34px"}}}})}};i.a.render(r.a.createElement((function(){var e=r.a.useMemo(Kt("dark"),["dark"]);return r.a.createElement(Yt.a,{theme:e},r.a.createElement(Vt.a,null),r.a.createElement(c.a,null,r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/",exact:!0,component:B}),r.a.createElement(ge,{path:"/login",component:B}),r.a.createElement(ge,{path:"/register",component:W}),r.a.createElement(ge,{path:"/verify/:userid/:uuid",component:Y}),r.a.createElement(Gt,{path:"/profile",component:De}),r.a.createElement(Gt,{path:"/search",component:ut}),r.a.createElement(Gt,{path:"/gallery",component:Ze}),r.a.createElement(Gt,{path:"/:user",component:xt}))))}),null),document.querySelector("#root"))}},[[255,1,2]]]);
//# sourceMappingURL=main.3af83ec2.chunk.js.map