{"version":3,"sources":["styles.tsx","components/reusableComponents/TextFieldWithIcon.tsx","components/auth/SignIn.tsx","components/auth/SignUp.tsx","components/auth/VerifyEmail.tsx","helpers/getJwt.tsx","components/layout/styles.tsx","helpers/UserContextProvider.tsx","components/layout/PrimaryAppBar.tsx","helpers/GuestRoute.tsx","components/profile/styles.tsx","components/profile/BasicFields.tsx","components/profile/Interests.tsx","components/profile/LookingFor.tsx","components/profile/NotEditable.tsx","reducers/RequestReducer.tsx","reducers/UserReducer.tsx","components/profile/Editable.tsx","components/profile/index.tsx","reducers/ImagesReducer.tsx","components/gallery/styles.tsx","components/gallery/Edit.tsx","components/gallery/index.tsx","reducers/SearchReducer.tsx","components/search/styles.tsx","components/search/index.tsx","components/userpage/styles.tsx","components/userpage/index.tsx","reducers/ChatListReducer.tsx","components/chat/chatsListStyles.tsx","components/chat/index.tsx","reducers/MessagesReducer.tsx","components/chat/chatBoxStyles.tsx","components/chat/ChatBox.tsx","helpers/SocketManager.tsx","components/app/UserLayout.tsx","helpers/PrivateRoute.tsx","theme.tsx","index.tsx","components/app/index.tsx"],"names":["styles","makeStyles","theme","createStyles","h1","marginTop","fontWeight","fontSize","root","display","flexWrap","justifyContent","backgroundSize","backgroundPosition","sectionDesktop","breakpoints","up","sectionMobile","rightScrollingContainer","height","overflow","position","down","TextFieldWithIcon","props","React","useState","values","Grid","container","alignItems","item","xs","icon","TextField","label","type","name","fullWidth","onChange","handleChange","onBlur","handleBlur","SignIn","withFormik","mapPropsToValues","username","password","remember","validationSchema","Yup","shape","required","min","handleSubmit","axios","post","then","res","setStatus","setErrors","setSubmitting","catch","error","response","touched","errors","isSubmitting","classes","status","to","Fragment","Container","maxWidth","Typography","variant","className","AccountCircleOutlinedIcon","LockOutlinedIcon","Button","disabled","style","Box","m","textAlign","Link","component","SignUp","email","firstName","lastName","birth","gender","console","log","MailOutlineIcon","Filter1OutlinedIcon","Filter2OutlinedIcon","id","InputLabelProps","shrink","src","alt","width","RadioGroup","aria-label","row","borderBottom","map","elem","FormControlLabel","key","value","control","Radio","color","labelPlacement","mt","useStyles","VerifyEmail","params","useParams","success","undefined","msg","responded","setProps","get","userid","uuid","Alert","severity","CircularProgress","isUser","Cookie","grow","flexGrow","appBar","backgroundColor","palette","background","default","boxShadow","zIndex","iconButton","borderRadius","link","textDecoration","text","primary","padding","ctxt","UserContextProvider","Provider","UserContextConsumer","Consumer","PrimaryAppBar","appBarMakeStyles","modal","setModal","menuList","ctx","state","Card","flexDirection","IconButton","data","AppBar","Toolbar","marginRight","Hidden","mdUp","onClick","Modal","aria-labelledby","aria-describedby","open","onClose","closeAfterTransition","BackdropComponent","Backdrop","BackdropProps","timeout","Fade","in","smDown","GuestRoute","path","marginSm","margin","spacing","paddingSm","profileAvatar","visibleAvatarChange","visibility","profileAvatarChange","photoLibraryIcon","profileTextField","marginBottom","paddingBottom","profileCard","basicInputFieldsContainer","paddingTop","alignSelf","chip","fields","Interests","func","setProfile","profile","editable","profileClasses","interestsDialog","setInterestsDialog","newInterest","setNewInterest","interestDialogClose","addInterest","arr","interests","push","Chip","onDelete","interest","filter","clickable","Dialog","DialogContent","dividers","event","val","target","onKeyDown","e","keyCode","autoFocus","InputProps","startAdornment","InputAdornment","size","LookingFor","lookingForDialog","setlookingForDialog","lookingFor","NotEditable","user","setEditable","md","avatar","normal","align","preferences","Date","toLocaleDateString","year","month","day","lat","lon","biography","RequesReduser","baseUrl","reducer","action","results","reqConfig","dispatch","message","successCb","errorCb","url","this","method","UserReducer","request","getReq","formatDate","err","onSuccess","putReq","date","d","Intl","DateTimeFormat","formatToParts","mo","da","ye","navigator","geolocation","getCurrentPosition","latitude","coords","longitude","positionError","lat1","lon1","lat2","lon2","φ1","Math","PI","φ2","Δφ","Δλ","a","sin","cos","c","atan2","sqrt","round","Number","EPSILON","postReq","heartsNumber","heartIsGiven","delReq","userReducer","Editable","slice","changeProfileData","prop","changeNumericData","RegExp","test","FormControl","FormLabel","defaultValue","getLocation","paddingLeft","multiline","rows","saveUser","Profile","ImagesReducer","uploadImage","files","fd","FormData","append","getImages","deleteImage","setAvatar","requestDefault","card","imagesContainer","centered","left","top","msTransform","transform","image","border","main","opacity","imageBackdrop","imageButton","right","bottom","common","white","imageSrc","thumbUp","edit","thumbsCount","imagesReducer","Edit","galleryMakeStyles","anchorEl","setAnchorEl","isMenuOpen","Boolean","handleMenuClose","renderMenu","PaperProps","onMouseLeave","transformOrigin","vertical","horizontal","keepMounted","MenuItem","currentTarget","Gallery","useReducer","useEffect","Tooltip","title","Input","idx","backgroundImage","thumbnail","query","focusVisible","imageTitle","searchFiltersContainer","searchReducer","SearchReducer","Search","searchState","searchDispatch","scrollEl","useRef","URLSearchParams","window","location","search","setLookingFor","setInterest","distance","setDistance","current","addEventListener","loadMore","searchUsers","removeEventListener","scrollHeight","scrollTop","offsetHeight","ref","ExpansionPanel","ExpansionPanelSummary","expandIcon","aria-controls","ExpansionPanelDetails","gutterBottom","Slider","getAriaValueText","valueLabelDisplay","num","max","ExpansionPanelActions","set","delete","String","history","pushState","toString","ButtonBase","focusRipple","focusVisibleClassName","Array","i","Skeleton","imagesList","paper","gridList","light","titleBar","UserPage","userState","userDispatch","imagesState","imagesDispatch","profileStyles","makeProfileStyles","getUser","getImagesForSpecificUser","CardMedia","lineHeight","age","returnHurt","giveHurt","getDistanse","GridList","cols","img","GridListTile","textTransform","ChatListReducer","chatsList","chatListHeader","minHeight","chatItem","chatItemAvatar","chatName","chatTime","chatMessage","textOverflow","whiteSpace","marginLeft","ChatList","chatListReducer","cl","setChat","socketManager","chatListState","chatListDispatch","getChats","socket","on","removeListener","chat","Avatar","interlocutorAvatar","interlocutorName","lastMsg","time","toLocaleString","interlocutorId","senderId","MessageReducer","chatId","chatBox","messageBox","overflowY","paddingRight","close","font","leftMessage","rightMessage","messageContent","messageInput","messageReducer","MessagesReducer","ChatBox","newMessage","setNewMessage","messagesEndRef","messageState","messageDispatch","scrollToBottom","smooth","scrollIntoView","behavior","getMessages","sendMsg","replace","length","sendMessage","receiverId","msgStyle","placeholder","rowsMax","endAdornment","SocketManager","address","process","io","emit","PrivateLayout","leftPanel","setLeftPanel","mainClasses","mainStyles","borderRight","SwipeableDrawer","anchor","onOpen","PrivateRoute","useTheme","paletteOptions","secondary","hint","getPalette","createMuiTheme","typography","fontFamily","join","overrides","MuiIconButton","MuiOutlinedInput","notchedOutline","borderColor","MuiButton","contained","outlined","MuiChip","MuiPaper","MuiTypography","h3","ReactDOM","render","useMemo","ThemeProvider","CssBaseline","exact","SingIn","SingUp","document","querySelector"],"mappings":"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","file":"static/js/main.3af83ec2.chunk.js","sourcesContent":["import { makeStyles, Theme, createStyles } from '@material-ui/core/styles'\n\nconst styles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\th1: {\n\t\t\tmarginTop: '0.5em',\n\t\t\tfontWeight: 400,\n\t\t\tfontSize: '3.5em',\n\t\t},\n\t\troot: {\n\t\t\tdisplay: 'flex',\n\t\t\tflexWrap: 'wrap',\n\t\t\tjustifyContent: 'space-around',\n\t\t\tbackgroundSize: 'cover',\n\t\t\tbackgroundPosition: 'center 40%',\n\t\t\tmarginTop: '2em',\n\t\t},\n\t\tsectionDesktop: {\n\t\t\tdisplay: 'none',\n\t\t\t[theme.breakpoints.up('md')]: {\n\t\t\t\tdisplay: 'flex',\n\t\t\t},\n\t\t},\n\t\tsectionMobile: {\n\t\t\tdisplay: 'flex',\n\t\t\t[theme.breakpoints.up('md')]: {\n\t\t\t\tdisplay: 'none',\n\t\t\t},\n\t\t},\n\t\trightScrollingContainer: {\n\t\t\theight: 'inherit',\n\t\t\toverflow: 'hidden',\n\t\t\tposition: 'relative',\n\t\t\t[theme.breakpoints.down('xs')]: {\n\t\t\t\tposition: 'initial',\n\t\t\t},\n\t\t},\n\t}),\n)\n\nexport default styles\n","import React, { ChangeEvent } from 'react'\nimport { TextField, Grid } from '@material-ui/core'\n\nexport interface Props {\n\tlabel: string\n\ttype: string\n\tname: string\n\ticon: (props: any) => JSX.Element\n\thandleChange: (e: ChangeEvent<any>) => void\n\thandleBlur: (e: ChangeEvent<any>) => void\n}\n\nconst TextFieldWithIcon: React.FC<Props> = props => {\n\tconst [values] = React.useState<Props>(props)\n\n\treturn (\n\t\t<Grid container alignItems='flex-end'>\n\t\t\t<Grid item xs={1}>\n\t\t\t\t<values.icon />\n\t\t\t</Grid>\n\t\t\t<Grid item xs={11}>\n\t\t\t\t<TextField\n\t\t\t\t\tlabel={values.label}\n\t\t\t\t\ttype={values.type}\n\t\t\t\t\tname={values.name}\n\t\t\t\t\tfullWidth={true}\n\t\t\t\t\tonChange={values.handleChange}\n\t\t\t\t\tonBlur={values.handleBlur}\n\t\t\t\t/>\n\t\t\t</Grid>\n\t\t</Grid>\n\t)\n}\n\nexport default TextFieldWithIcon\n","import React from 'react'\nimport { Link as ReactLink, Redirect } from 'react-router-dom'\nimport * as Yup from 'yup'\nimport { withFormik, FormikProps, Form } from 'formik'\nimport axios from 'axios'\nimport { Button, Link, Box, Checkbox, FormControlLabel, Typography, Container } from '@material-ui/core'\nimport AccountCircleOutlinedIcon from '@material-ui/icons/AccountCircleOutlined'\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined'\n\nimport styles from '../../styles'\nimport TextFieldWithIcon from '../reusableComponents/TextFieldWithIcon'\n\ninterface FormValues {\n\tusername: string\n\tpassword: string\n\tremember: boolean\n}\n\nconst InnerForm = (props: FormikProps<FormValues>) => {\n\tconst { touched, errors, isSubmitting } = props\n\tconst classes = styles()\n\n\tif (props.status) {\n\t\treturn <Redirect to='/profile' />\n\t}\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<Container maxWidth='sm'>\n\t\t\t\t<Typography variant='h1' className={classes.h1}>\n\t\t\t\t\t{'Sign In'}\n\t\t\t\t</Typography>\n\t\t\t\t<Form>\n\t\t\t\t\t<TextFieldWithIcon\n\t\t\t\t\t\tlabel='Username'\n\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\tname='username'\n\t\t\t\t\t\ticon={AccountCircleOutlinedIcon}\n\t\t\t\t\t\thandleChange={props.handleChange}\n\t\t\t\t\t\thandleBlur={props.handleBlur}\n\t\t\t\t\t/>\n\t\t\t\t\t{touched.username && errors.username && <div>{errors.username}</div>}\n\t\t\t\t\t<TextFieldWithIcon\n\t\t\t\t\t\tlabel='Password'\n\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\tname='password'\n\t\t\t\t\t\ticon={LockOutlinedIcon}\n\t\t\t\t\t\thandleChange={props.handleChange}\n\t\t\t\t\t\thandleBlur={props.handleBlur}\n\t\t\t\t\t/>\n\t\t\t\t\t{touched.password && errors.password && <div>{errors.password}</div>}\n\t\t\t\t\t<Button\n\t\t\t\t\t\ttype='submit'\n\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\tfullWidth={true}\n\t\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\t\tstyle={{ marginTop: '2em' }}>\n\t\t\t\t\t\t{'Log In'}\n\t\t\t\t\t</Button>\n\t\t\t\t</Form>\n\t\t\t\t<Box m={1} textAlign='center'>\n\t\t\t\t\t<Typography variant='body1'>\n\t\t\t\t\t\t{'New here? '}\n\t\t\t\t\t\t<ReactLink to='/register'>\n\t\t\t\t\t\t\t<Link component='button' type='button' variant='body1'>\n\t\t\t\t\t\t\t\t{'Sign Up'}\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</ReactLink>\n\t\t\t\t\t</Typography>\n\t\t\t\t</Box>\n\t\t\t</Container>\n\t\t</React.Fragment>\n\t)\n}\n\nconst SignIn = withFormik<{}, FormValues>({\n\tmapPropsToValues: (props) => {\n\t\treturn {\n\t\t\tusername: '',\n\t\t\tpassword: '',\n\t\t\tremember: true,\n\t\t}\n\t},\n\tvalidationSchema: Yup.object().shape({\n\t\tusername: Yup.string().required('Required'),\n\t\tpassword: Yup.string().required('Required').min(6, 'Must be 6 characters or less'),\n\t}),\n\n\thandleSubmit: (values: FormValues, props) => {\n\t\taxios\n\t\t\t.post('/api/auth/login', {\n\t\t\t\tusername: values.username,\n\t\t\t\tpassword: values.password,\n\t\t\t})\n\t\t\t.then(function (res) {\n\t\t\t\tif (res['data']['success'] === true) {\n\t\t\t\t\tprops.setStatus(true)\n\t\t\t\t} else {\n\t\t\t\t\tprops.setErrors({ username: res['data']['msg'] })\n\t\t\t\t\tprops.setSubmitting(false)\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(function (error) {\n\t\t\t\tif (error.response['data']['success'] === true) {\n\t\t\t\t\tprops.setStatus(true)\n\t\t\t\t} else {\n\t\t\t\t\tprops.setErrors({ username: error.response['data']['msg'] })\n\t\t\t\t\tprops.setSubmitting(false)\n\t\t\t\t}\n\t\t\t})\n\t},\n})(InnerForm)\n\nexport default SignIn\n","import React from 'react'\nimport { Link as ReactLink, Redirect } from 'react-router-dom'\nimport * as Yup from 'yup'\nimport { withFormik, FormikProps, Form } from 'formik'\nimport {\n\tButton,\n\tContainer,\n\tLink,\n\tBox,\n\tTypography,\n\tRadioGroup,\n\tFormControlLabel,\n\tRadio,\n\tGrid,\n\tTextField,\n} from '@material-ui/core'\nimport axios from 'axios'\nimport MailOutlineIcon from '@material-ui/icons/MailOutline'\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined'\nimport AccountCircleOutlinedIcon from '@material-ui/icons/AccountCircleOutlined'\nimport Filter1OutlinedIcon from '@material-ui/icons/Filter1Outlined'\nimport Filter2OutlinedIcon from '@material-ui/icons/Filter2Outlined'\nimport styles from '../../styles'\nimport TextFieldWithIcon from '../reusableComponents/TextFieldWithIcon'\nimport CakeIcon from '@material-ui/icons/Cake'\n\ninterface FormValues {\n\temail: string\n\tusername: string\n\tfirstName: string\n\tlastName: string\n\tpassword: string\n\tgender: string\n\tbirth: string\n}\n\nconst InnerForm = (props: FormikProps<FormValues>) => {\n\tconst { touched, errors, isSubmitting } = props\n\tconst classes = styles()\n\n\tif (props.status) {\n\t\treturn <Redirect to='/profile' />\n\t}\n\n\treturn (\n\t\t<Container maxWidth='sm'>\n\t\t\t<Typography variant='h1' className={classes.h1}>\n\t\t\t\t{'Sing Up'}\n\t\t\t</Typography>\n\t\t\t<Form>\n\t\t\t\t<TextFieldWithIcon\n\t\t\t\t\tlabel='Email'\n\t\t\t\t\ttype='email'\n\t\t\t\t\tname='email'\n\t\t\t\t\ticon={MailOutlineIcon}\n\t\t\t\t\thandleChange={props.handleChange}\n\t\t\t\t\thandleBlur={props.handleBlur}\n\t\t\t\t/>\n\t\t\t\t{touched.email && errors.email && <div>{errors.email}</div>}\n\n\t\t\t\t<TextFieldWithIcon\n\t\t\t\t\tlabel='Username'\n\t\t\t\t\ttype='username'\n\t\t\t\t\tname='username'\n\t\t\t\t\ticon={AccountCircleOutlinedIcon}\n\t\t\t\t\thandleChange={props.handleChange}\n\t\t\t\t\thandleBlur={props.handleBlur}\n\t\t\t\t/>\n\t\t\t\t{touched.username && errors.username && <div>{errors.username}</div>}\n\n\t\t\t\t<TextFieldWithIcon\n\t\t\t\t\tlabel='First name'\n\t\t\t\t\ttype='firstName'\n\t\t\t\t\tname='firstName'\n\t\t\t\t\ticon={Filter1OutlinedIcon}\n\t\t\t\t\thandleChange={props.handleChange}\n\t\t\t\t\thandleBlur={props.handleBlur}\n\t\t\t\t/>\n\t\t\t\t{touched.firstName && errors.firstName && <div>{errors.firstName}</div>}\n\n\t\t\t\t<TextFieldWithIcon\n\t\t\t\t\tlabel='Last name'\n\t\t\t\t\ttype='lastName'\n\t\t\t\t\tname='lastName'\n\t\t\t\t\ticon={Filter2OutlinedIcon}\n\t\t\t\t\thandleChange={props.handleChange}\n\t\t\t\t\thandleBlur={props.handleBlur}\n\t\t\t\t/>\n\t\t\t\t{touched.lastName && errors.lastName && <div>{errors.lastName}</div>}\n\n\t\t\t\t<Grid container alignItems='flex-end' style={{ height: '3.587em' }}>\n\t\t\t\t\t<Grid item xs={1}>\n\t\t\t\t\t\t<CakeIcon />\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item xs={11}>\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tid='date'\n\t\t\t\t\t\t\ttype='date'\n\t\t\t\t\t\t\tname='birth'\n\t\t\t\t\t\t\tonChange={props.handleChange}\n\t\t\t\t\t\t\tfullWidth={true}\n\t\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\t\tshrink: true,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t\t{touched.birth && errors.birth && <div>{errors.birth}</div>}\n\n\t\t\t\t<Grid container alignItems='flex-end' style={{ height: '3.587em' }}>\n\t\t\t\t\t<Grid item xs={1}>\n\t\t\t\t\t\t<img src={'/images/genderIcon.svg'} alt='gender' style={{ width: '2em', height: '2em' }} />\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item xs={11}>\n\t\t\t\t\t\t<RadioGroup\n\t\t\t\t\t\t\taria-label='gender'\n\t\t\t\t\t\t\tonChange={props.handleChange}\n\t\t\t\t\t\t\trow\n\t\t\t\t\t\t\tname='gender'\n\t\t\t\t\t\t\tstyle={{ borderBottom: '0.5px solid #0f0f11' }}>\n\t\t\t\t\t\t\t{['male', 'female'].map((elem) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\t\tkey={'gender' + elem}\n\t\t\t\t\t\t\t\t\t\tvalue={elem}\n\t\t\t\t\t\t\t\t\t\tcontrol={<Radio color='primary' />}\n\t\t\t\t\t\t\t\t\t\tlabel={elem}\n\t\t\t\t\t\t\t\t\t\tlabelPlacement='end'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</RadioGroup>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t\t{touched.gender && errors.gender && <div>{errors.gender}</div>}\n\n\t\t\t\t<TextFieldWithIcon\n\t\t\t\t\tlabel='Password'\n\t\t\t\t\ttype='password'\n\t\t\t\t\tname='password'\n\t\t\t\t\ticon={LockOutlinedIcon}\n\t\t\t\t\thandleChange={props.handleChange}\n\t\t\t\t\thandleBlur={props.handleBlur}\n\t\t\t\t/>\n\t\t\t\t{touched.password && errors.password && <div>{errors.password}</div>}\n\n\t\t\t\t{/** Log In **/}\n\t\t\t\t<Box mt={2}>\n\t\t\t\t\t<Button type='submit' variant='contained' fullWidth={true} disabled={isSubmitting}>\n\t\t\t\t\t\tSign Up\n\t\t\t\t\t</Button>\n\t\t\t\t</Box>\n\n\t\t\t\t<Box m={1} textAlign='center'>\n\t\t\t\t\t<Typography variant='body1'>\n\t\t\t\t\t\t{'Already have accaunt? '}\n\t\t\t\t\t\t<ReactLink to='/login'>\n\t\t\t\t\t\t\t<Link component='button' type='button' variant='body1'>\n\t\t\t\t\t\t\t\t{'Sign In'}\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</ReactLink>\n\t\t\t\t\t</Typography>\n\t\t\t\t</Box>\n\t\t\t</Form>\n\t\t</Container>\n\t)\n}\n\nconst SignUp = withFormik<{}, FormValues>({\n\tmapPropsToValues: (props) => {\n\t\treturn {\n\t\t\temail: '',\n\t\t\tusername: '',\n\t\t\tfirstName: '',\n\t\t\tlastName: '',\n\t\t\tpassword: '',\n\t\t\tbirth: '',\n\t\t\tgender: '',\n\t\t}\n\t},\n\tvalidationSchema: Yup.object().shape({\n\t\temail: Yup.string().email('Should be a valid email adress').required('Required'),\n\t\tusername: Yup.string().required('Required'),\n\t\tfirstName: Yup.string().required('Required'),\n\t\tlastName: Yup.string().required('Required'),\n\t\tpassword: Yup.string().required('Required').min(6, 'Must be 6 characters or less'),\n\t\tbirth: Yup.string().required('Required'),\n\t\tgender: Yup.string().required('Required'),\n\t}),\n\n\thandleSubmit: (values: FormValues, props) => {\n\t\tconsole.log(values)\n\t\taxios\n\t\t\t.post('/api/auth/register', {\n\t\t\t\temail: values.email,\n\t\t\t\tusername: values.username,\n\t\t\t\tfirstName: values.firstName,\n\t\t\t\tlastName: values.lastName,\n\t\t\t\tpassword: values.password,\n\t\t\t\tbirth: values.birth,\n\t\t\t\tgender: values.gender,\n\t\t\t})\n\t\t\t.then(function (res) {\n\t\t\t\tif (res['data']['success'] === true) {\n\t\t\t\t\tprops.setStatus(true)\n\t\t\t\t} else {\n\t\t\t\t\tprops.setErrors({ username: res['data']['msg'] })\n\t\t\t\t\tprops.setSubmitting(false)\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(function (error) {\n\t\t\t\tif (!error.response) {\n\t\t\t\t\tconsole.log('No Connection')\n\t\t\t\t\tprops.setSubmitting(false)\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tif (error.response['data']['success'] === true) {\n\t\t\t\t\tprops.setStatus(true)\n\t\t\t\t} else {\n\t\t\t\t\tprops.setErrors({ username: error.response['data']['msg'] })\n\t\t\t\t\tprops.setSubmitting(false)\n\t\t\t\t}\n\t\t\t})\n\t},\n})(InnerForm)\n\nexport default SignUp\n","import React, { useState } from 'react'\nimport { useParams } from 'react-router-dom'\nimport axios from 'axios'\n\nimport { makeStyles, Theme, createStyles } from '@material-ui/core/styles'\nimport Container from '@material-ui/core/Container'\nimport Box from '@material-ui/core/Box'\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport { Alert } from '@material-ui/lab'\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tposition: 'absolute',\n\t\t},\n\t\tfullWidth: {\n\t\t\twidth: '100%',\n\t\t},\n\t}),\n)\n\ninterface RouteParams {\n\tuserid: string | undefined\n\tuuid: string | undefined\n}\n\ninterface Props {\n\tsuccess: boolean | undefined\n\tmsg: string | undefined\n\tresponded: boolean\n}\n\nconst VerifyEmail: React.FC = () => {\n\tconst classes = useStyles()\n\n\tconst params = useParams<RouteParams>()\n\tconst [props, setProps] = useState<Props>({\n\t\tsuccess: undefined,\n\t\tmsg: undefined,\n\t\tresponded: false,\n\t})\n\n\tif (props.responded === false) {\n\t\taxios\n\t\t\t.get('/api/auth/verify/' + params.userid + '/' + params.uuid)\n\t\t\t.then(function (res) {\n\t\t\t\tconsole.log(params.userid)\n\t\t\t\tif (res['data']['success'] === true) {\n\t\t\t\t\tsetProps({ success: true, msg: 'You email successufully verified.', responded: true })\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(function (error) {\n\t\t\t\tif (error.response['data'] && error.response['data']['success'] === false) {\n\t\t\t\t\tsetProps({ success: false, msg: error.response['data']['msg'], responded: true })\n\t\t\t\t}\n\t\t\t})\n\t}\n\n\treturn (\n\t\t<Container maxWidth='md'>\n\t\t\t<Box justifyContent='center' marginTop='2.5em' display='flex'>\n\t\t\t\t{props.success === true && (\n\t\t\t\t\t<Alert severity='success' className={classes.fullWidth}>\n\t\t\t\t\t\t{props.msg}\n\t\t\t\t\t</Alert>\n\t\t\t\t)}\n\t\t\t\t{props.success === undefined && <CircularProgress className={classes.root} />}\n\t\t\t\t{props.success === false && (\n\t\t\t\t\t<Alert severity='error' className={classes.fullWidth}>\n\t\t\t\t\t\t{props.msg}\n\t\t\t\t\t</Alert>\n\t\t\t\t)}\n\t\t\t</Box>\n\t\t</Container>\n\t)\n}\n\nexport default VerifyEmail\n","import Cookie from 'js-cookie'\n\nexport const isUser = (): boolean => {\n\tif (Cookie.get('user')) return true\n\telse return false\n}\n","import { fade, makeStyles, Theme, createStyles } from '@material-ui/core/styles'\n\nconst styles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\tgrow: {\n\t\t\tflexGrow: 1,\n\t\t},\n\t\tappBar: {\n\t\t\tbackgroundColor: theme.palette.background.default,\n\t\t\tboxShadow: 'none',\n\t\t\tzIndex: 2,\n\t\t},\n\t\ticonButton: {\n\t\t\tborderRadius: '0.1em',\n\t\t},\n\t\tlink: {\n\t\t\ttextDecoration: 'none',\n\t\t\tcolor: theme.palette.text.primary,\n\t\t\tpadding: '1em',\n\t\t},\n\t}),\n)\n\nexport default styles\n","import * as React from 'react'\nimport { User } from '../reducers/UserReducer'\nimport { Action, State } from '../reducers/RequestReducer'\n\nconst ctxt = React.createContext<{ state: State<User>; dispatch: React.Dispatch<Action<User>> } | null>(null)\n\nexport const UserContextProvider = ctxt.Provider\n\nexport const UserContextConsumer = ctxt.Consumer\n","import React from 'react'\nimport { AppBar, Toolbar, Typography, Card, Hidden } from '@material-ui/core/'\n\nimport axios from 'axios'\nimport appBarMakeStyles from './styles'\nimport { Link } from 'react-router-dom'\nimport IconButton from '@material-ui/core/IconButton'\nimport { UserContextConsumer } from '../../helpers/UserContextProvider'\nimport SettingsIcon from '@material-ui/icons/Settings'\nimport MenuIcon from '@material-ui/icons/Menu'\nimport ChatIcon from '@material-ui/icons/Chat'\nimport Modal from '@material-ui/core/Modal'\nimport Backdrop from '@material-ui/core/Backdrop'\nimport Fade from '@material-ui/core/Fade'\n\nconst PrimaryAppBar: React.FC = () => {\n\tconst classes = appBarMakeStyles()\n\n\tconst [modal, setModal] = React.useState<boolean>(false)\n\n\tconst handleLogOut = () => {\n\t\taxios\n\t\t\t.post('/api/auth/logout')\n\t\t\t.then(function (res) {\n\t\t\t\t// setRedirect(true)\n\t\t\t})\n\t\t\t.catch(function (error) {\n\t\t\t\t// props.setErrors({ username: error })\n\t\t\t})\n\t}\n\n\tconst menu = [\n\t\t{\n\t\t\tname: 'Gallery',\n\t\t\troute: '/gallery',\n\t\t},\n\t\t{\n\t\t\tname: 'Settings',\n\t\t\troute: '/profile',\n\t\t},\n\t]\n\n\tconst menuList = (\n\t\t<UserContextConsumer>\n\t\t\t{(ctx) =>\n\t\t\t\tctx?.state.status === 'success' && (\n\t\t\t\t\t<Card style={{ display: 'flex', flexDirection: 'column' }}>\n\t\t\t\t\t\t<Link to='/search' className={classes.link}>\n\t\t\t\t\t\t\t<IconButton className={classes.iconButton} color='inherit'>\n\t\t\t\t\t\t\t\t{'Search'}\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t<Link to={ctx.state.data.username} className={classes.link}>\n\t\t\t\t\t\t\t<IconButton className={classes.iconButton} color='inherit'>\n\t\t\t\t\t\t\t\t{'My profile'}\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t<Link to='/profile' className={classes.link}>\n\t\t\t\t\t\t\t<IconButton className={classes.iconButton} color='inherit'>\n\t\t\t\t\t\t\t\tSettings\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</Card>\n\t\t\t\t)\n\t\t\t}\n\t\t</UserContextConsumer>\n\t)\n\treturn (\n\t\t<UserContextConsumer>\n\t\t\t{(ctx) =>\n\t\t\t\tctx?.state.status === 'success' && (\n\t\t\t\t\t<AppBar position='static' className={classes.appBar}>\n\t\t\t\t\t\t<Toolbar>\n\t\t\t\t\t\t\t<ChatIcon style={{ marginRight: '1em' }} />\n\t\t\t\t\t\t\t<Typography variant='h3'>Matcha</Typography>\n\t\t\t\t\t\t\t<div className={classes.grow} />\n\t\t\t\t\t\t\t<Hidden mdUp>\n\t\t\t\t\t\t\t\t<MenuIcon onClick={() => setModal(true)} />\n\n\t\t\t\t\t\t\t\t<Modal\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\t\t\talignItems: 'center',\n\t\t\t\t\t\t\t\t\t\tjustifyContent: 'center',\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\taria-labelledby='transition-modal-title'\n\t\t\t\t\t\t\t\t\taria-describedby='transition-modal-description'\n\t\t\t\t\t\t\t\t\topen={modal}\n\t\t\t\t\t\t\t\t\tonClose={() => setModal(false)}\n\t\t\t\t\t\t\t\t\tcloseAfterTransition\n\t\t\t\t\t\t\t\t\tBackdropComponent={Backdrop}\n\t\t\t\t\t\t\t\t\tBackdropProps={{\n\t\t\t\t\t\t\t\t\t\ttimeout: 500,\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t<Fade in={modal}>{menuList}</Fade>\n\t\t\t\t\t\t\t\t</Modal>\n\t\t\t\t\t\t\t</Hidden>\n\n\t\t\t\t\t\t\t<Hidden smDown>{menuList}</Hidden>\n\t\t\t\t\t\t\t{/* {menu.map((elem, idx) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<Link to={elem.route} className={classes.link}>\n\t\t\t\t\t\t\t\t\t\t<IconButton className={classes.iconButton} color='inherit' key={idx}>\n\t\t\t\t\t\t\t\t\t\t\t{elem.name}\n\t\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t})} */}\n\t\t\t\t\t\t</Toolbar>\n\t\t\t\t\t</AppBar>\n\t\t\t\t)\n\t\t\t}\n\t\t</UserContextConsumer>\n\t)\n}\n\nexport default PrimaryAppBar\n","import React from 'react'\nimport { Redirect, Route } from 'react-router-dom'\nimport { isUser } from './getJwt'\nimport PrimaryAppBar from '../components/layout/PrimaryAppBar'\n\ninterface Props {\n\tpath: string\n\tcomponent: React.FC | React.ComponentType\n}\nconst GuestRoute: React.FC<Props> = (props: Props) => {\n\treturn isUser() ? (\n\t\t<Redirect to='/profile' />\n\t) : (\n\t\t<React.Fragment>\n\t\t\t<PrimaryAppBar />\n\t\t\t<Route path={props.path} component={props.component} />\n\t\t</React.Fragment>\n\t)\n}\n\nexport default GuestRoute\n","import { makeStyles, Theme, createStyles } from '@material-ui/core/styles'\n\nconst styles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\tmarginSm: {\n\t\t\tmargin: `${theme.spacing(0.1)}em`,\n\t\t},\n\t\tpaddingSm: {\n\t\t\tpadding: `${theme.spacing(0.1)}em`,\n\t\t},\n\t\tprofileAvatar: {\n\t\t\twidth: `22em`,\n\t\t\theight: `22em`,\n\t\t\t[theme.breakpoints.down('xs')]: {\n\t\t\t\twidth: `16em`,\n\t\t\t\theight: `16em`,\n\t\t\t\tmargin: 'none',\n\t\t\t},\n\t\t\tborderRadius: '50%',\n\t\t\tdisplay: 'block',\n\t\t\tmargin: 'auto',\n\t\t\tposition: 'relative',\n\t\t\tcursor: 'pointer',\n\t\t},\n\t\tvisibleAvatarChange: {\n\t\t\t'&:hover': {\n\t\t\t\t'& $profileAvatarChange': {\n\t\t\t\t\tvisibility: 'visible',\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tprofileAvatarChange: {\n\t\t\tmarginTop: `-22em`,\n\t\t\t[theme.breakpoints.down('xs')]: {\n\t\t\t\tmarginTop: `-16em`,\n\t\t\t},\n\t\t\tlineHeight: `${theme.spacing(0.5)}em`,\n\t\t\tdisplay: 'flex',\n\t\t\tbackgroundColor: theme.palette.background.default,\n\t\t\tcolor: 'white',\n\t\t\topacity: 0.5,\n\t\t\tvisibility: 'hidden',\n\t\t\tmarginBottom: '0.5em',\n\t\t},\n\t\tphotoLibraryIcon: { fontSize: `${theme.spacing(0.5)}em`, margin: 'auto' },\n\t\tprofileTextField: {\n\t\t\tmarginBottom: '0.7em',\n\t\t\tpaddingBottom: '0.4em',\n\t\t\tborderBottom: '1px solid #28272c',\n\t\t},\n\t\tprofileCard: {\n\t\t\tmarginBottom: '2em',\n\t\t},\n\t\tbasicInputFieldsContainer: {\n\t\t\tpaddingTop: '1.5em',\n\t\t\talignSelf: 'flex-start',\n\t\t},\n\t\tchip: {\n\t\t\tmargin: `${theme.spacing(0.05)}em`,\n\t\t},\n\t}),\n)\n\nexport default styles\n","interface BasicField {\n\tname: string\n\tkey: 'username' | 'email' | 'firstName' | 'lastName'\n}\nconst fields: BasicField[] = [\n\t{\n\t\tname: 'Username',\n\t\tkey: 'username',\n\t},\n\t{\n\t\tname: 'Email',\n\t\tkey: 'email',\n\t},\n\t{\n\t\tname: 'First Name',\n\t\tkey: 'firstName',\n\t},\n\t{\n\t\tname: 'Last Name',\n\t\tkey: 'lastName',\n\t},\n]\n\nexport default fields\n","import React from 'react'\nimport { Box, TextField, Button, Typography, Dialog, DialogContent, InputAdornment, Chip } from '@material-ui/core'\nimport AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline'\nimport profileClasses from './styles'\n\nimport { User } from '../../reducers/UserReducer'\n\ninterface Props {\n\tsetProfile: ((value: React.SetStateAction<User>) => void) | null\n\tprofile: User\n\teditable: boolean\n}\n\nconst Interests: React.FC<Props> = (props: Props) => {\n\tconst { setProfile, profile, editable } = props\n\tconst classes = profileClasses()\n\n\tconst [interestsDialog, setInterestsDialog] = React.useState<boolean>(false)\n\tconst [newInterest, setNewInterest] = React.useState<string>('')\n\n\tconst newInterestOnChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tconst val = (event.target as HTMLInputElement).value\n\t\tsetNewInterest(val)\n\t}\n\n\tconst interestDialogOpen = () => {\n\t\tsetInterestsDialog(true)\n\t}\n\tconst interestDialogClose = () => {\n\t\tsetInterestsDialog(false)\n\t}\n\n\tconst removeInterest = (interest: string) => () => {\n\t\tif (setProfile) {\n\t\t\tsetProfile({\n\t\t\t\t...profile,\n\t\t\t\tinterests: profile.interests.filter((chip) => chip !== interest),\n\t\t\t})\n\t\t}\n\t}\n\n\tconst addInterest = () => {\n\t\tif (setProfile) {\n\t\t\tlet arr = profile.interests\n\t\t\tarr.push(newInterest)\n\t\t\tsetProfile({\n\t\t\t\t...profile,\n\t\t\t\tinterests: arr,\n\t\t\t})\n\t\t\tsetNewInterest('')\n\t\t\tinterestDialogClose()\n\t\t}\n\t}\n\n\tconst runFuncOnEnter = (func: () => void) => (e: React.KeyboardEvent) => {\n\t\tif (e.keyCode === 13) {\n\t\t\tfunc()\n\t\t}\n\t}\n\n\treturn (\n\t\t<Box marginBottom='1em'>\n\t\t\t{editable ? (\n\t\t\t\t<Box>\n\t\t\t\t\t<Typography>{'Interests'}:</Typography>\n\t\t\t\t\t{profile.interests.map((data) => {\n\t\t\t\t\t\treturn <Chip key={data} label={data} className={classes.chip} onDelete={removeInterest(data)} />\n\t\t\t\t\t})}\n\t\t\t\t\t<Chip\n\t\t\t\t\t\ticon={<AddCircleOutlineIcon />}\n\t\t\t\t\t\tclassName={classes.chip}\n\t\t\t\t\t\tlabel={'New'}\n\t\t\t\t\t\tclickable={true}\n\t\t\t\t\t\tonClick={interestDialogOpen}\n\t\t\t\t\t/>\n\t\t\t\t</Box>\n\t\t\t) : (\n\t\t\t\t<Box textAlign='left'>\n\t\t\t\t\t<Typography>{'Interests'}:</Typography>\n\t\t\t\t\t{profile.interests.map((data) => {\n\t\t\t\t\t\treturn <Chip key={data} label={data} className={classes.chip} variant='outlined' />\n\t\t\t\t\t})}\n\t\t\t\t</Box>\n\t\t\t)}\n\n\t\t\t<Dialog onClose={interestDialogClose} aria-labelledby='customized-dialog-title' open={interestsDialog}>\n\t\t\t\t<DialogContent dividers>\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tid='outlined-search'\n\t\t\t\t\t\tlabel='Search field'\n\t\t\t\t\t\ttype='search'\n\t\t\t\t\t\tvariant='outlined'\n\t\t\t\t\t\tvalue={newInterest}\n\t\t\t\t\t\tonChange={newInterestOnChange}\n\t\t\t\t\t\tonKeyDown={runFuncOnEnter(addInterest)}\n\t\t\t\t\t\tfullWidth={true}\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\tInputProps={{\n\t\t\t\t\t\t\tstartAdornment: <InputAdornment position='start'>#</InputAdornment>,\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</DialogContent>\n\n\t\t\t\t<Box textAlign='center' m={1}>\n\t\t\t\t\t<Button autoFocus variant='outlined' size='small' onClick={addInterest}>\n\t\t\t\t\t\tAdd\n\t\t\t\t\t</Button>\n\t\t\t\t</Box>\n\t\t\t</Dialog>\n\t\t</Box>\n\t)\n}\n\nexport default Interests\n","import React from 'react'\nimport { Box, TextField, Button, Typography, Dialog, DialogContent, InputAdornment, Chip } from '@material-ui/core'\nimport AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline'\nimport profileClasses from './styles'\n\nimport { User } from '../../reducers/UserReducer'\n\ninterface Props {\n\tsetProfile: ((value: React.SetStateAction<User>) => void) | null\n\tprofile: User\n\teditable: boolean\n}\n\nconst LookingFor: React.FC<Props> = (props: Props) => {\n\tconst { setProfile, profile, editable } = props\n\tconst classes = profileClasses()\n\n\tconst [lookingForDialog, setlookingForDialog] = React.useState<boolean>(false)\n\tconst [newInterest, setNewInterest] = React.useState<string>('')\n\n\tconst newInterestOnChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tconst val = (event.target as HTMLInputElement).value\n\t\tsetNewInterest(val)\n\t}\n\n\tconst interestDialogOpen = () => {\n\t\tsetlookingForDialog(true)\n\t}\n\tconst interestDialogClose = () => {\n\t\tsetlookingForDialog(false)\n\t}\n\n\tconst removeInterest = (interest: string) => () => {\n\t\tif (setProfile) {\n\t\t\tsetProfile({\n\t\t\t\t...profile,\n\t\t\t\tlookingFor: profile.lookingFor.filter((chip) => chip !== interest),\n\t\t\t})\n\t\t}\n\t}\n\n\tconst addInterest = () => {\n\t\tif (setProfile) {\n\t\t\tlet arr = profile.lookingFor\n\t\t\tarr.push(newInterest)\n\t\t\tsetProfile({\n\t\t\t\t...profile,\n\t\t\t\tlookingFor: arr,\n\t\t\t})\n\t\t\tsetNewInterest('')\n\t\t\tinterestDialogClose()\n\t\t}\n\t}\n\n\tconst runFuncOnEnter = (func: () => void) => (e: React.KeyboardEvent) => {\n\t\tif (e.keyCode === 13) {\n\t\t\tfunc()\n\t\t}\n\t}\n\n\treturn (\n\t\t<Box marginBottom='1em'>\n\t\t\t{editable ? (\n\t\t\t\t<Box>\n\t\t\t\t\t<Typography>{'LookingFor'}:</Typography>\n\t\t\t\t\t{profile.lookingFor.map((data) => {\n\t\t\t\t\t\treturn <Chip key={data} label={data} className={classes.chip} onDelete={removeInterest(data)} />\n\t\t\t\t\t})}\n\t\t\t\t\t<Chip\n\t\t\t\t\t\ticon={<AddCircleOutlineIcon />}\n\t\t\t\t\t\tclassName={classes.chip}\n\t\t\t\t\t\tlabel={'New'}\n\t\t\t\t\t\tclickable={true}\n\t\t\t\t\t\tonClick={interestDialogOpen}\n\t\t\t\t\t/>\n\t\t\t\t</Box>\n\t\t\t) : (\n\t\t\t\t<Box textAlign='left'>\n\t\t\t\t\t<Typography>{'LookingFor'}:</Typography>\n\t\t\t\t\t{profile.lookingFor.map((data) => {\n\t\t\t\t\t\treturn <Chip key={data} label={data} className={classes.chip} variant='outlined' />\n\t\t\t\t\t})}\n\t\t\t\t</Box>\n\t\t\t)}\n\n\t\t\t<Dialog onClose={interestDialogClose} aria-labelledby='customized-dialog-title' open={lookingForDialog}>\n\t\t\t\t<DialogContent dividers>\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tid='outlined-search'\n\t\t\t\t\t\tlabel='Search field'\n\t\t\t\t\t\ttype='search'\n\t\t\t\t\t\tvariant='outlined'\n\t\t\t\t\t\tvalue={newInterest}\n\t\t\t\t\t\tonChange={newInterestOnChange}\n\t\t\t\t\t\tonKeyDown={runFuncOnEnter(addInterest)}\n\t\t\t\t\t\tfullWidth={true}\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\tInputProps={{\n\t\t\t\t\t\t\tstartAdornment: <InputAdornment position='start'>#</InputAdornment>,\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</DialogContent>\n\n\t\t\t\t<Box textAlign='center' m={1}>\n\t\t\t\t\t<Button autoFocus variant='outlined' size='small' onClick={addInterest}>\n\t\t\t\t\t\tAdd\n\t\t\t\t\t</Button>\n\t\t\t\t</Box>\n\t\t\t</Dialog>\n\t\t</Box>\n\t)\n}\n\nexport default LookingFor\n","import React from 'react'\nimport { Box, Button, Typography, Grid } from '@material-ui/core'\nimport PhotoLibraryIcon from '@material-ui/icons/PhotoLibrary'\nimport profileClasses from './styles'\nimport fields from './BasicFields'\nimport Interests from './Interests'\nimport LookingFor from './LookingFor'\nimport { Link } from 'react-router-dom'\nimport { User } from '../../reducers/UserReducer'\n\ninterface Props {\n\tuser: User\n\tsetEditable: React.Dispatch<React.SetStateAction<boolean>>\n}\n\nconst NotEditable: React.FC<Props> = (props: Props) => {\n\tconst { user, setEditable } = props\n\tconst classes = profileClasses()\n\n\treturn (\n\t\t<Box className={classes.profileCard}>\n\t\t\t<Grid container>\n\t\t\t\t<Grid item xs={12} md={6}>\n\t\t\t\t\t<div className={`${classes.profileAvatar} ${classes.visibleAvatarChange}`}>\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tclassName={classes.profileAvatar}\n\t\t\t\t\t\t\tsrc={user.avatar ? user.avatar.normal : `/images/noavatar${user.gender}.jpg`}\n\t\t\t\t\t\t\talt='Your avatar'\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Link to='/gallery'>\n\t\t\t\t\t\t\t<div className={`${classes.profileAvatar} ${classes.profileAvatarChange}`}>\n\t\t\t\t\t\t\t\t<PhotoLibraryIcon className={classes.photoLibraryIcon} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</div>\n\t\t\t\t</Grid>\n\t\t\t\t<Grid item xs={12} md={6} className={classes.basicInputFieldsContainer}>\n\t\t\t\t\t<Box>\n\t\t\t\t\t\t{fields.map((elem) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<Typography align='left' className={classes.profileTextField} key={elem.key}>\n\t\t\t\t\t\t\t\t\t{elem.name}: {user[elem.key]}\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t})}\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box textAlign='left'>\n\t\t\t\t\t\t<Typography className={classes.profileTextField}>\n\t\t\t\t\t\t\t{'Gender'}: {user.gender}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<Typography className={classes.profileTextField}>\n\t\t\t\t\t\t\t{'Sexual preferences'}: {user.preferences}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t</Box>\n\t\t\t\t</Grid>\n\t\t\t</Grid>\n\t\t\t<Typography align='left' className={classes.profileTextField}>\n\t\t\t\tBirthday:{' '}\n\t\t\t\t{new Date(user.birth).toLocaleDateString('en-US', {\n\t\t\t\t\tyear: 'numeric',\n\t\t\t\t\tmonth: 'long',\n\t\t\t\t\tday: 'numeric',\n\t\t\t\t})}\n\t\t\t</Typography>\n\t\t\t<Typography align='left' className={classes.profileTextField}>\n\t\t\t\tLatitude: {user.lat}\n\t\t\t</Typography>\n\t\t\t<Typography align='left' className={classes.profileTextField}>\n\t\t\t\tLongitude: {user.lon}\n\t\t\t</Typography>\n\t\t\t<LookingFor setProfile={null} profile={user} editable={false} />\n\t\t\t<Interests setProfile={null} profile={user} editable={false} />\n\t\t\t<Box textAlign='center'>\n\t\t\t\t<Typography align='left'>{'About'}:</Typography>\n\t\t\t\t<Box className={classes.paddingSm}>\n\t\t\t\t\t<Typography align='left'>{user.biography}</Typography>\n\t\t\t\t</Box>\n\t\t\t\t<Button onClick={() => setEditable(true)} variant='outlined' className={classes.marginSm}>\n\t\t\t\t\t{'Edit'}\n\t\t\t\t</Button>\n\t\t\t</Box>\n\t\t</Box>\n\t)\n}\n\nexport default NotEditable\n","import React from 'react'\nimport axios, { AxiosRequestConfig, AxiosResponse } from 'axios'\n\nexport type State<T> = { status: 'loading' } | { status: 'error'; error: string } | { status: 'success'; data: T }\n\nexport type Action<T> = { type: 'request' } | { type: 'success'; results: T } | { type: 'failure'; error: string }\n\nexport default abstract class RequesReduser<T> {\n\tabstract baseUrl: string\n\n\treducer = (state: State<T>, action: Action<T>): State<T> => {\n\t\tswitch (action.type) {\n\t\t\tcase 'request':\n\t\t\t\treturn { status: 'loading' }\n\t\t\tcase 'success':\n\t\t\t\treturn { status: 'success', data: action.results }\n\t\t\tcase 'failure':\n\t\t\t\treturn { status: 'error', error: action.error }\n\t\t}\n\t}\n\tprotected requestDefault(reqConfig: AxiosRequestConfig, dispatch: React.Dispatch<Action<T>>) {\n\t\taxios(reqConfig)\n\t\t\t.then(function (res) {\n\t\t\t\tif (res['data']['success'] === true) {\n\t\t\t\t\tconsole.log(res['data']['data'])\n\t\t\t\t\tdispatch({ type: 'success', results: res['data']['data'] })\n\t\t\t\t} else {\n\t\t\t\t\tdispatch({ type: 'failure', error: res['data']['message'] })\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(function (error) {\n\t\t\t\tdispatch({ type: 'failure', error: error.message })\n\t\t\t})\n\t}\n\n\tprotected request(\n\t\treqConfig: AxiosRequestConfig,\n\t\tsuccessCb: (res: AxiosResponse<any>) => void = () => {},\n\t\terrorCb: (res: string) => void = () => {},\n\t) {\n\t\taxios(reqConfig)\n\t\t\t.then(function (res) {\n\t\t\t\tif (res['data']['success'] === true) {\n\t\t\t\t\tsuccessCb(res)\n\t\t\t\t} else {\n\t\t\t\t\terrorCb(res['data']['message'])\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(function (error) {\n\t\t\t\terrorCb(error.message)\n\t\t\t})\n\t}\n\n\tprotected getReq(url?: string): AxiosRequestConfig {\n\t\treturn {\n\t\t\turl: url === undefined ? this.baseUrl : url,\n\t\t\tmethod: 'GET',\n\t\t}\n\t}\n\tprotected postReq(data: any, url?: string): AxiosRequestConfig {\n\t\treturn {\n\t\t\turl: url === undefined ? this.baseUrl : url,\n\t\t\tmethod: 'POST',\n\t\t\tdata: data,\n\t\t}\n\t}\n\tprotected putReq(data: any, url?: string): AxiosRequestConfig {\n\t\treturn {\n\t\t\turl: url === undefined ? this.baseUrl : url,\n\t\t\tmethod: 'PUT',\n\t\t\tdata: data,\n\t\t}\n\t}\n\tprotected delReq(url?: string): AxiosRequestConfig {\n\t\treturn {\n\t\t\turl: url === undefined ? this.baseUrl : url,\n\t\t\tmethod: 'DELETE',\n\t\t}\n\t}\n}\n","import RequesReduser, { Action } from './RequestReducer'\n\ntype Gender = 'male' | 'female' | ''\ntype Preferences = 'male' | 'female' | 'male and female'\n\nexport type User = {\n\tid: number\n\tusername: string\n\temail: string\n\tfirstName: string\n\tlastName: string\n\tgender: Gender\n\tpreferences: Preferences\n\tavatar?:\n\t\t| {\n\t\t\t\tthumbnail: string\n\t\t\t\tnormal: string\n\t\t  }\n\t\t| undefined\n\tlookingFor: string[]\n\tinterests: string[]\n\tbiography: string\n\tlat: number\n\tlon: number\n\theartIsGiven: boolean\n\theartsNumber: number\n\tbirth: Date | string\n\tage: number\n}\n\nclass UserReducer extends RequesReduser<User> {\n\tbaseUrl = '/api/user'\n\tgetUser(dispatch: React.Dispatch<Action<User>>, url?: string) {\n\t\tthis.request(\n\t\t\tthis.getReq(`/api/user/${url}`),\n\t\t\t(res) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: 'success',\n\t\t\t\t\tresults: { ...res['data']['data'], birth: this.formatDate(res['data']['data'].birth) },\n\t\t\t\t})\n\t\t\t},\n\t\t\t(err) => {\n\t\t\t\tdispatch({ type: 'failure', error: err })\n\t\t\t},\n\t\t)\n\t}\n\n\tsaveUser(data: User, dispatch: React.Dispatch<Action<User>>, onSuccess: () => void) {\n\t\tthis.request(\n\t\t\tthis.putReq(data),\n\t\t\t(res) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: 'success',\n\t\t\t\t\tresults: { ...res['data']['data'], birth: this.formatDate(res['data']['data'].birth) },\n\t\t\t\t})\n\t\t\t\tonSuccess()\n\t\t\t},\n\t\t\t(err) => {\n\t\t\t\tdispatch({ type: 'failure', error: err })\n\t\t\t},\n\t\t)\n\t}\n\n\tformatDate(date: string) {\n\t\tconst d = new Date(date)\n\t\tconst dtf = new Intl.DateTimeFormat('en', { year: 'numeric', month: '2-digit', day: '2-digit' })\n\t\tconst [{ value: mo }, , { value: da }, , { value: ye }] = dtf.formatToParts(d)\n\t\treturn `${ye}-${mo}-${da}`\n\t}\n\n\tgetLocation(dispatch: React.Dispatch<Action<User>>, onSuccess: (lat: number, lon: number) => void) {\n\t\tconst success = (position: Position) => {\n\t\t\tconst latitude = position.coords.latitude\n\t\t\tconst longitude = position.coords.longitude\n\t\t\t//   `https://www.openstreetmap.org/#map=18/${latitude}/${longitude}`;\n\t\t\tthis.request(\n\t\t\t\tthis.putReq({ lat: latitude, lon: longitude }),\n\t\t\t\t(res) => {\n\t\t\t\t\tonSuccess(latitude, longitude)\n\t\t\t\t},\n\t\t\t\t(err) => {\n\t\t\t\t\tdispatch({ type: 'failure', error: err })\n\t\t\t\t},\n\t\t\t)\n\t\t}\n\n\t\tconst error = (positionError: PositionError) => {\n\t\t\tconsole.log('PositionError:' + positionError.message)\n\t\t}\n\n\t\tif (!navigator.geolocation) {\n\t\t\tconsole.log('Geolocation is not supported by your browser')\n\t\t} else {\n\t\t\tconsole.log(navigator.geolocation.getCurrentPosition(success, error))\n\t\t}\n\t}\n\n\tgetDistanse(lat1: number, lon1: number, lat2: number, lon2: number): number {\n\t\tconst R = 6371e3 // metres\n\t\tconst φ1 = (lat1 * Math.PI) / 180 // φ, λ in radians\n\t\tconst φ2 = (lat2 * Math.PI) / 180\n\t\tconst Δφ = ((lat2 - lat1) * Math.PI) / 180\n\t\tconst Δλ = ((lon2 - lon1) * Math.PI) / 180\n\n\t\tconst a = Math.sin(Δφ / 2) * Math.sin(Δφ / 2) + Math.cos(φ1) * Math.cos(φ2) * Math.sin(Δλ / 2) * Math.sin(Δλ / 2)\n\t\tconst c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a))\n\n\t\tconst d = Math.round(((R * c) / 1000 + Number.EPSILON) * 100) / 100 // in km\n\t\treturn d\n\t}\n\n\tgiveHurt(dispatch: React.Dispatch<Action<User>>, user: User) {\n\t\tthis.request(\n\t\t\tthis.postReq({}, `/api/heart/${user.id}`),\n\t\t\t(res) => {\n\t\t\t\tif (res.data['success']) {\n\t\t\t\t\tdispatch({ type: 'success', results: { ...user, heartsNumber: user.heartsNumber + 1, heartIsGiven: true } })\n\t\t\t\t}\n\t\t\t},\n\t\t\t(err) => {\n\t\t\t\tdispatch({ type: 'failure', error: err })\n\t\t\t},\n\t\t)\n\t}\n\n\treturnHurt(dispatch: React.Dispatch<Action<User>>, user: User) {\n\t\tthis.request(\n\t\t\tthis.delReq(`/api/heart/${user.id}`),\n\t\t\t(res) => {\n\t\t\t\tif (res.data['success']) {\n\t\t\t\t\tdispatch({ type: 'success', results: { ...user, heartsNumber: user.heartsNumber - 1, heartIsGiven: false } })\n\t\t\t\t}\n\t\t\t},\n\t\t\t(err) => {\n\t\t\t\tdispatch({ type: 'failure', error: err })\n\t\t\t},\n\t\t)\n\t}\n}\n\nexport default UserReducer\n","import React, { useState } from 'react'\nimport {\n\tBox,\n\tRadio,\n\tRadioGroup,\n\tFormControl,\n\tFormLabel,\n\tFormControlLabel,\n\tTextField,\n\tButton,\n\tGrid,\n\tTypography,\n} from '@material-ui/core'\nimport { Link } from 'react-router-dom'\nimport MaskedInput from 'react-text-mask'\nimport PhotoLibraryIcon from '@material-ui/icons/PhotoLibrary'\nimport profileClasses from './styles'\nimport fields from './BasicFields'\nimport Interests from './Interests'\nimport LookingFor from './LookingFor'\nimport { Action } from '../../reducers/RequestReducer'\nimport UserReducer, { User } from '../../reducers/UserReducer'\n\nconst userReducer = new UserReducer()\n\ninterface Props {\n\tdispatch: React.Dispatch<Action<User>>\n\tuser: User\n\tsetEditable: React.Dispatch<React.SetStateAction<boolean>>\n}\n\ninterface TextMaskCustomProps {\n\tinputRef: (ref: HTMLInputElement | null) => void\n}\n\nconst Editable: React.FC<Props> = (props: Props) => {\n\tconst classes = profileClasses()\n\tconst { dispatch, user, setEditable } = props\n\tconst [profile, setProfile] = useState<User>({\n\t\t...user,\n\t\tinterests: user.interests.slice(),\n\t})\n\n\tconst changeProfileData = (prop: string) => (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tsetProfile({ ...profile, [prop]: event.target.value })\n\t}\n\n\tconst closeEditing = () => {\n\t\tdispatch({ type: 'success', results: user })\n\t\tsetEditable(false)\n\t}\n\n\tconst changeNumericData = (prop: string) => (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tvar re = new RegExp(/(^[-+]?\\d*\\.?\\d*$)/g)\n\t\tif (re.test(event.target.value)) setProfile({ ...profile, [prop]: event.target.value })\n\t}\n\n\treturn (\n\t\t<Box className={classes.profileCard}>\n\t\t\t<Grid container>\n\t\t\t\t<Grid item xs={12} md={6}>\n\t\t\t\t\t<div className={`${classes.profileAvatar} ${classes.visibleAvatarChange}`}>\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tclassName={classes.profileAvatar}\n\t\t\t\t\t\t\tsrc={profile.avatar ? profile.avatar.normal : `/images/noavatar${profile.gender}.jpg`}\n\t\t\t\t\t\t\talt='Your avatar'\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Link to='/gallery'>\n\t\t\t\t\t\t\t<div className={`${classes.profileAvatar} ${classes.profileAvatarChange}`}>\n\t\t\t\t\t\t\t\t<PhotoLibraryIcon className={classes.photoLibraryIcon} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</div>\n\t\t\t\t</Grid>\n\t\t\t\t<Grid item xs={12} md={6} className={classes.basicInputFieldsContainer}>\n\t\t\t\t\t<Box>\n\t\t\t\t\t\t{fields.map((elem) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\tlabel={elem.name}\n\t\t\t\t\t\t\t\t\tonChange={changeProfileData(elem.key)}\n\t\t\t\t\t\t\t\t\tvalue={profile[elem.key]}\n\t\t\t\t\t\t\t\t\tkey={elem.key}\n\t\t\t\t\t\t\t\t\tfullWidth={true}\n\t\t\t\t\t\t\t\t\tmargin='dense'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t})}\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box>\n\t\t\t\t\t\t<FormControl component='fieldset'>\n\t\t\t\t\t\t\t<FormLabel component='legend'>Choose your Gender</FormLabel>\n\t\t\t\t\t\t\t<RadioGroup aria-label='gender' value={profile.gender || ''} onChange={changeProfileData('gender')} row>\n\t\t\t\t\t\t\t\t{['male', 'female'].map((elem) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\t\t\tkey={'gender' + elem}\n\t\t\t\t\t\t\t\t\t\t\tvalue={elem}\n\t\t\t\t\t\t\t\t\t\t\tcontrol={<Radio color='primary' />}\n\t\t\t\t\t\t\t\t\t\t\tlabel={elem}\n\t\t\t\t\t\t\t\t\t\t\tlabelPlacement='start'\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</RadioGroup>\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t<FormControl component='fieldset'>\n\t\t\t\t\t\t\t<FormLabel component='legend'>Your sexual preference</FormLabel>\n\t\t\t\t\t\t\t<RadioGroup\n\t\t\t\t\t\t\t\taria-label='preferences'\n\t\t\t\t\t\t\t\trow\n\t\t\t\t\t\t\t\tvalue={profile.preferences}\n\t\t\t\t\t\t\t\tonChange={changeProfileData('preferences')}>\n\t\t\t\t\t\t\t\t{['male', 'female', 'male and female'].map((elem) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\t\t\tkey={'pref' + elem}\n\t\t\t\t\t\t\t\t\t\t\tvalue={elem}\n\t\t\t\t\t\t\t\t\t\t\tcontrol={<Radio color='primary' />}\n\t\t\t\t\t\t\t\t\t\t\tlabel={elem}\n\t\t\t\t\t\t\t\t\t\t\tlabelPlacement='start'\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</RadioGroup>\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t</Box>\n\t\t\t\t</Grid>\n\t\t\t</Grid>\n\t\t\t<TextField\n\t\t\t\tid='date'\n\t\t\t\tlabel='Birthday'\n\t\t\t\ttype='date'\n\t\t\t\tdefaultValue={profile.birth}\n\t\t\t\tonChange={changeProfileData('birth')}\n\t\t\t\tInputLabelProps={{\n\t\t\t\t\tshrink: true,\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<Typography>Location</Typography>\n\t\t\t<Grid container>\n\t\t\t\t<Grid xs={4} item>\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tlabel={'Latitude'}\n\t\t\t\t\t\tonChange={changeNumericData('lat')}\n\t\t\t\t\t\tvalue={profile['lat']}\n\t\t\t\t\t\tfullWidth={true}\n\t\t\t\t\t\tmargin='dense'\n\t\t\t\t\t/>\n\t\t\t\t</Grid>\n\t\t\t\t<Grid xs={4} item>\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tlabel={'Longitude'}\n\t\t\t\t\t\tonChange={changeNumericData('lon')}\n\t\t\t\t\t\tvalue={profile['lon']}\n\t\t\t\t\t\tfullWidth={true}\n\t\t\t\t\t\tmargin='dense'\n\t\t\t\t\t/>\n\t\t\t\t</Grid>\n\t\t\t\t<Grid xs={4} item>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\tuserReducer.getLocation(dispatch, (lat, lon) => setProfile({ ...profile, lat: lat, lon: lon }))\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvariant='outlined'\n\t\t\t\t\t\tstyle={{ margin: 'auto', paddingLeft: '1.5em' }}>\n\t\t\t\t\t\tDetect\n\t\t\t\t\t</Button>\n\t\t\t\t</Grid>\n\t\t\t</Grid>\n\t\t\t<LookingFor setProfile={setProfile} profile={profile} editable={true} />\n\t\t\t<Interests setProfile={setProfile} profile={profile} editable={true} />\n\t\t\t<Box textAlign='center'>\n\t\t\t\t<TextField\n\t\t\t\t\tfullWidth={true}\n\t\t\t\t\tid='outlined-multiline-static'\n\t\t\t\t\tlabel='About'\n\t\t\t\t\tmultiline\n\t\t\t\t\trows='8'\n\t\t\t\t\tvariant='outlined'\n\t\t\t\t\tvalue={profile.biography}\n\t\t\t\t\tonChange={changeProfileData('biography')}\n\t\t\t\t/>\n\t\t\t\t<Button onClick={closeEditing} variant='outlined' className={classes.marginSm}>\n\t\t\t\t\t{'Close'}\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\tuserReducer.saveUser({ ...profile, interests: profile.interests, avatar: undefined }, dispatch, () =>\n\t\t\t\t\t\t\tsetEditable(false),\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t\tvariant='outlined'\n\t\t\t\t\tclassName={classes.marginSm}>\n\t\t\t\t\t{'Save'}\n\t\t\t\t</Button>\n\t\t\t</Box>\n\t\t</Box>\n\t)\n}\n\nexport default Editable\n","import React, { useState } from 'react'\nimport { Container } from '@material-ui/core'\n\nimport NotEditable from './NotEditable'\nimport Editable from './Editable'\nimport { UserContextConsumer } from '../../helpers/UserContextProvider'\n\nconst Profile: React.FC = () => {\n\tconst [editable, setEditable] = useState<boolean>(false)\n\n\treturn (\n\t\t<UserContextConsumer>\n\t\t\t{(ctx) =>\n\t\t\t\tctx && (\n\t\t\t\t\t<Container maxWidth='md'>\n\t\t\t\t\t\t{editable && ctx.state.status === 'success' && (\n\t\t\t\t\t\t\t<Editable user={ctx.state.data} dispatch={ctx.dispatch} setEditable={setEditable} />\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{!editable && ctx.state.status === 'success' && (\n\t\t\t\t\t\t\t<NotEditable user={ctx.state.data} setEditable={setEditable} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Container>\n\t\t\t\t)\n\t\t\t}\n\t\t</UserContextConsumer>\n\t)\n}\n\nexport default Profile\n","import RequesReduser, { Action } from './RequestReducer'\n\nexport type Image = {\n\tid: number\n\timage: {\n\t\tnormal: string\n\t\tthumbnail: string\n\t}\n}\n\nclass ImagesReducer extends RequesReduser<Image[]> {\n\tbaseUrl = '/api/image'\n\tgetImages(dispatch: React.Dispatch<Action<Image[]>>, url?: string) {\n\t\tthis.requestDefault(this.getReq(), dispatch)\n\t}\n\n\tgetImagesForSpecificUser(dispatch: React.Dispatch<Action<Image[]>>, username?: string) {\n\t\tthis.requestDefault(this.getReq('/api/image/' + username), dispatch)\n\t}\n\n\tuploadImage = (event: React.ChangeEvent<HTMLInputElement>, dispatch: React.Dispatch<Action<Image[]>>) => {\n\t\tconst elem = event.target\n\t\tif (elem.files) {\n\t\t\tconst fd = new FormData()\n\t\t\tfd.append('image', elem.files[0])\n\t\t\tthis.request(\n\t\t\t\tthis.postReq(fd),\n\t\t\t\t() => {\n\t\t\t\t\tthis.getImages(dispatch)\n\t\t\t\t},\n\t\t\t\t(err) => {\n\t\t\t\t\tdispatch({ type: 'failure', error: err })\n\t\t\t\t},\n\t\t\t)\n\t\t}\n\t}\n\n\tdeleteImage = (id: number, dispatch: React.Dispatch<Action<Image[]>>) => {\n\t\tthis.request(\n\t\t\tthis.delReq(`/api/image/${id}`),\n\t\t\t() => {\n\t\t\t\tthis.getImages(dispatch)\n\t\t\t},\n\t\t\t(err) => {\n\t\t\t\tdispatch({ type: 'failure', error: err })\n\t\t\t},\n\t\t)\n\t}\n\n\tsetAvatar = (id: number, dispatch: React.Dispatch<Action<Image[]>>) => {\n\t\tthis.request(\n\t\t\tthis.putReq({ avatar: id }, '/api/user'),\n\t\t\t() => {\n\t\t\t\tthis.getImages(dispatch)\n\t\t\t},\n\t\t\t(err) => {\n\t\t\t\tdispatch({ type: 'failure', error: err })\n\t\t\t},\n\t\t)\n\t}\n}\n\nexport default ImagesReducer\n","import { makeStyles, Theme, createStyles } from '@material-ui/core/styles'\n\nconst styles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\tcard: {\n\t\t\tmarginTop: '1em',\n\t\t\tmarginBottom: '1em',\n\t\t\tpadding: '1em',\n\t\t\t[theme.breakpoints.down('xs')]: {\n\t\t\t\tmarginTop: '0.5em',\n\t\t\t\tmarginBottom: '0.5em',\n\t\t\t\tpadding: '0.5em',\n\t\t\t},\n\t\t},\n\t\timagesContainer: {\n\t\t\tdisplay: 'flex',\n\t\t\tflexWrap: 'wrap',\n\t\t},\n\t\troot: {\n\t\t\tdisplay: 'flex',\n\t\t\tflexWrap: 'wrap',\n\t\t\twidth: '100%',\n\t\t},\n\t\tcentered: {\n\t\t\tposition: 'absolute',\n\t\t\tleft: '50%',\n\t\t\ttop: '50%',\n\t\t\tmsTransform: 'translateY(-50%)',\n\t\t\ttransform: 'translateX(-50%) translateY(-50%)',\n\t\t\twidth: 'fit-content',\n\t\t\theight: 'fit-content',\n\t\t},\n\t\timage: {\n\t\t\tdisplay: 'inline-block',\n\t\t\tfontSize: '12px',\n\t\t\tposition: 'relative',\n\t\t\theight: '20em',\n\t\t\tborder: `1px groove ${theme.palette.primary.main}`,\n\t\t\tmargin: '1.16%',\n\t\t\twidth: '31%',\n\t\t\t[theme.breakpoints.down('xs')]: {\n\t\t\t\theight: '10em',\n\t\t\t\t'& $imageBackdrop': {\n\t\t\t\t\topacity: 0.25,\n\t\t\t\t},\n\t\t\t\t'& $thumbUp': {\n\t\t\t\t\tvisibility: 'visible',\n\t\t\t\t},\n\t\t\t\t'& $edit': {\n\t\t\t\t\tvisibility: 'visible',\n\t\t\t\t},\n\t\t\t},\n\t\t\t'&:hover': {\n\t\t\t\t'& $imageBackdrop': {\n\t\t\t\t\topacity: 0.25,\n\t\t\t\t},\n\t\t\t\t'& $thumbUp': {\n\t\t\t\t\tvisibility: 'visible',\n\t\t\t\t},\n\t\t\t\t'& $edit': {\n\t\t\t\t\tvisibility: 'visible',\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\timageBackdrop: {\n\t\t\topacity: 0,\n\t\t\tbackgroundColor: 'black',\n\t\t},\n\t\timageButton: {\n\t\t\tposition: 'absolute',\n\t\t\tright: 0,\n\t\t\ttop: 0,\n\t\t\tbottom: 0,\n\t\t\tdisplay: 'flex',\n\t\t\tcolor: theme.palette.common.white,\n\t\t},\n\t\timageSrc: {\n\t\t\tposition: 'absolute',\n\t\t\tleft: 0,\n\t\t\tright: 0,\n\t\t\ttop: 0,\n\t\t\tbottom: 0,\n\t\t\tbackgroundSize: 'cover',\n\t\t\tbackgroundPosition: 'center 40%',\n\t\t},\n\t\tthumbUp: {\n\t\t\tright: '1em',\n\t\t\tbottom: '1em',\n\t\t\t[theme.breakpoints.down('xs')]: {\n\t\t\t\tright: '0.1em',\n\t\t\t\tbottom: '0.1em',\n\t\t\t},\n\t\t},\n\t\tedit: {\n\t\t\tright: '1em',\n\t\t\ttop: '1em',\n\t\t\t[theme.breakpoints.down('xs')]: {\n\t\t\t\tright: '0.1em',\n\t\t\t\ttop: '0.1em',\n\t\t\t},\n\t\t},\n\t\ticonButton: {\n\t\t\theight: '3em',\n\t\t\tposition: 'absolute',\n\t\t\tright: '1em',\n\t\t\tbottom: '1em',\n\t\t\tdisplay: 'flex',\n\t\t\talignItems: 'center',\n\t\t\tcolor: 'white',\n\t\t\tvisibility: 'hidden',\n\t\t\t[theme.breakpoints.down('xs')]: {\n\t\t\t\tright: '0.1em',\n\t\t\t\tbottom: '0.1em',\n\t\t\t\tvisibility: 'hidden',\n\t\t\t},\n\t\t\t'&:hover': {\n\t\t\t\tbackgroundColor: 'rgba(255, 255, 255, 0.5)',\n\t\t\t},\n\t\t},\n\t\tthumbsCount: {\n\t\t\tmargin: '0.1em',\n\t\t},\n\t}),\n)\n\nexport default styles\n","import React from 'react'\nimport { Button, Menu, MenuItem } from '@material-ui/core'\nimport EditIcon from '@material-ui/icons/Edit'\nimport { Action } from '../../reducers/RequestReducer'\nimport ImagesReducer, { Image } from '../../reducers/ImagesReducer'\nimport galleryMakeStyles from './styles'\n\nconst imagesReducer = new ImagesReducer()\n\ninterface Props {\n\tid: number\n\tdispatch: React.Dispatch<Action<Image[]>>\n}\n\nconst Edit: React.FC<Props> = (props: Props) => {\n\tconst classes = galleryMakeStyles()\n\n\tconst [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null)\n\tconst isMenuOpen = Boolean(anchorEl)\n\n\tconst handleProfileMenuOpen = (event: React.MouseEvent<HTMLElement>) => {\n\t\tsetAnchorEl(event.currentTarget)\n\t}\n\n\tconst handleMenuClose = () => {\n\t\tsetAnchorEl(null)\n\t}\n\n\tconst renderMenu = (\n\t\t<Menu\n\t\t\tPaperProps={{\n\t\t\t\tstyle: {\n\t\t\t\t\tborder: '1px solid #d3d4d5',\n\t\t\t\t},\n\t\t\t\tonMouseLeave: handleMenuClose,\n\t\t\t}}\n\t\t\tanchorEl={anchorEl}\n\t\t\ttransformOrigin={{ vertical: 'top', horizontal: 'center' }}\n\t\t\tkeepMounted\n\t\t\topen={isMenuOpen}\n\t\t\tonClose={handleMenuClose}>\n\t\t\t<MenuItem onClick={() => imagesReducer.setAvatar(props.id, props.dispatch)}>Set as Avatar</MenuItem>\n\t\t\t<MenuItem onClick={() => imagesReducer.deleteImage(props.id, props.dispatch)}>Remove</MenuItem>\n\t\t</Menu>\n\t)\n\n\treturn (\n\t\t<Button\n\t\t\tkey={'edit'}\n\t\t\tsize='small'\n\t\t\tclassName={`${classes.iconButton} ${classes.edit}`}\n\t\t\tonClick={handleProfileMenuOpen}>\n\t\t\t<EditIcon />\n\t\t\t{renderMenu}\n\t\t</Button>\n\t)\n}\n\nexport default Edit\n","import React, { useEffect, useReducer } from 'react'\nimport { Container, Card, Tooltip, Button, Typography, Input } from '@material-ui/core'\nimport AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline'\nimport ThumbUpAltIcon from '@material-ui/icons/ThumbUpAlt'\nimport ImagesReducer from '../../reducers/ImagesReducer'\nimport Edit from './Edit'\nimport galleryMakeStyles from './styles'\n\nconst imagesReducer = new ImagesReducer()\n\nconst Gallery: React.FC = () => {\n\tconst classes = galleryMakeStyles()\n\tconst [state, dispatch] = useReducer(imagesReducer.reducer, { status: 'loading' })\n\n\tuseEffect(() => {\n\t\timagesReducer.getImages(dispatch)\n\t}, [])\n\n\treturn (\n\t\t<Container>\n\t\t\t{state.status === 'success' && (\n\t\t\t\t<Card className={classes.card}>\n\t\t\t\t\t<Typography align='center'>Gallery</Typography>\n\t\t\t\t\t<div className={classes.imagesContainer}>\n\t\t\t\t\t\t<div className={classes.image}>\n\t\t\t\t\t\t\t<Tooltip title='Add new photo' aria-label='add'>\n\t\t\t\t\t\t\t\t<Button className={classes.centered} size='small' component='label'>\n\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\ttype='file'\n\t\t\t\t\t\t\t\t\t\tstyle={{ display: 'none' }}\n\t\t\t\t\t\t\t\t\t\tonChange={(event: React.ChangeEvent<HTMLInputElement>) =>\n\t\t\t\t\t\t\t\t\t\t\timagesReducer.uploadImage(event, dispatch)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<AddCircleOutlineIcon color='primary' fontSize='large' />\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{state.data.map((image, idx) => (\n\t\t\t\t\t\t\t<div key={idx} className={classes.image}>\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclassName={classes.imageSrc}\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tbackgroundImage: `url(${image.image.thumbnail})`,\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div className={`${classes.imageBackdrop} ${classes.imageSrc}`} />\n\t\t\t\t\t\t\t\t<Edit id={image.id} dispatch={dispatch} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t</Card>\n\t\t\t)}\n\t\t</Container>\n\t)\n}\n\nexport default Gallery\n","import RequesReduser, { Action } from './RequestReducer'\nimport { User } from './UserReducer'\n\ninterface Results {\n\tusers: User[]\n\tpages: number\n}\nclass UserReducer extends RequesReduser<User[]> {\n\tbaseUrl = '/api/search'\n\n\tsearchUsers(dispatch: React.Dispatch<Action<User[]>>, query?: string) {\n\t\tconsole.log('search users: ' + query)\n\t\tthis.requestDefault(this.getReq(`/api/search?${query}`), dispatch)\n\t}\n}\n\nexport default UserReducer\n","import { makeStyles, Theme, createStyles } from '@material-ui/core/styles'\n\nconst styles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tdisplay: 'flex',\n\t\t\tflexWrap: 'wrap',\n\t\t\twidth: '100%',\n\t\t\tmarginTop: 0,\n\t\t},\n\t\timage: {\n\t\t\tposition: 'relative',\n\t\t\theight: 200,\n\t\t\twidth: '31%',\n\t\t\tmargin: '1.16%',\n\t\t\t[theme.breakpoints.down('xs')]: {\n\t\t\t\twidth: '100% !important', // Overrides inline-style\n\t\t\t\theight: 100,\n\t\t\t},\n\t\t},\n\t\tfocusVisible: {},\n\t\timageButton: {\n\t\t\tposition: 'absolute',\n\t\t\t// left: 0,\n\t\t\tright: 0,\n\t\t\ttop: 0,\n\t\t\tbottom: 0,\n\t\t\tdisplay: 'flex',\n\t\t\t// alignItems: 'center',\n\t\t\t// justifyContent: 'center',\n\t\t\tcolor: theme.palette.common.white,\n\t\t},\n\t\timageSrc: {\n\t\t\tposition: 'absolute',\n\t\t\tleft: 0,\n\t\t\tright: 0,\n\t\t\ttop: 0,\n\t\t\tbottom: 0,\n\t\t\tbackgroundSize: 'cover',\n\t\t\tbackgroundPosition: 'center 40%',\n\t\t},\n\t\timageTitle: {\n\t\t\tposition: 'relative',\n\t\t\tpadding: `${theme.spacing(1)}px ${theme.spacing(1)}px ${theme.spacing(1) + 6}px`,\n\t\t\tfontWeight: 'bold',\n\t\t},\n\t\tsearchFiltersContainer: {\n\t\t\tposition: 'sticky',\n\t\t\ttop: 0,\n\t\t\tleft: 0,\n\t\t\tright: 0,\n\t\t\tbackgroundColor: theme.palette.background.default,\n\t\t\t// padding: '0.5em',\n\t\t\t// height: '5em',\n\t\t\tzIndex: 1,\n\t\t},\n\t}),\n)\n\nexport default styles\n","import React, { useEffect, useRef } from 'react'\nimport {\n\tBox,\n\tButtonBase,\n\tTypography,\n\tSlider,\n\tGrid,\n\tExpansionPanel,\n\tExpansionPanelSummary,\n\tExpansionPanelDetails,\n\tExpansionPanelActions,\n\tButton,\n\tTextField,\n} from '@material-ui/core'\nimport Skeleton from '@material-ui/lab/Skeleton'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\nimport SearchReducer from '../../reducers/SearchReducer'\nimport { Link } from 'react-router-dom'\n\nimport styles from './styles'\n\nconst searchReducer = new SearchReducer()\n\nconst Search: React.FC = () => {\n\tconst classes = styles()\n\n\tconst [searchState, searchDispatch] = React.useReducer(searchReducer.reducer, { status: 'loading' })\n\tconst scrollEl = useRef<HTMLDivElement>(null)\n\tconst params = new URLSearchParams(window.location.search)\n\n\tconst [lookingFor, setLookingFor] = React.useState(params.get('lookingfor'))\n\tconst [interest, setInterest] = React.useState(params.get('interest'))\n\tconst [distance, setDistance] = React.useState(Number(params.get('distance')) || 10)\n\n\t// const pagesToshow = 1\n\n\tuseEffect(() => {\n\t\tconsole.log('location')\n\t\tconsole.log(window.location.search)\n\t\tscrollEl.current?.addEventListener('scroll', loadMore)\n\t\tsearchReducer.searchUsers(searchDispatch, window.location.search)\n\t\treturn () => scrollEl.current?.removeEventListener('scroll', loadMore)\n\t}, [])\n\n\tconst loadMore = () => {\n\t\tif (scrollEl.current) {\n\t\t\tconst scrollHeight = scrollEl.current.scrollHeight\n\t\t\tconst scrollTop = scrollEl.current.scrollTop + scrollEl.current.offsetHeight\n\t\t\tif (scrollHeight === scrollTop) {\n\t\t\t\tconsole.log('load more')\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction changeLocation() {\n\t\tif (lookingFor) {\n\t\t\tparams.set('lookingfor', lookingFor)\n\t\t} else {\n\t\t\tparams.delete('lookingfor')\n\t\t}\n\t\tif (interest) {\n\t\t\tparams.set('interest', interest)\n\t\t} else {\n\t\t\tparams.delete('interest')\n\t\t}\n\t\tif (distance) {\n\t\t\tparams.set('distance', String(distance))\n\t\t} else {\n\t\t\tparams.delete('distance')\n\t\t}\n\t\twindow.history.pushState({}, '', '/search?&' + params.toString())\n\t\tsearchReducer.searchUsers(searchDispatch, window.location.search)\n\t}\n\n\tfunction valuetext(value: number) {\n\t\treturn `${value}km`\n\t}\n\tconst changeDist = (num: number) => {\n\t\tsetDistance(num)\n\t}\n\treturn (\n\t\t<div ref={scrollEl}>\n\t\t\t<ExpansionPanel className={classes.searchFiltersContainer}>\n\t\t\t\t<ExpansionPanelSummary\n\t\t\t\t\texpandIcon={<ExpandMoreIcon style={{ color: 'white' }} />}\n\t\t\t\t\taria-controls='panel1a-content'\n\t\t\t\t\tid='panel1a-header'\n\t\t\t\t\tstyle={{ flexDirection: 'initial' }}>\n\t\t\t\t\t<Typography style={{ width: '100%', textAlign: 'right' }}>Search options</Typography>\n\t\t\t\t</ExpansionPanelSummary>\n\t\t\t\t<ExpansionPanelDetails>\n\t\t\t\t\t<Grid container spacing={2}>\n\t\t\t\t\t\t<Grid item xs={4}>\n\t\t\t\t\t\t\t<Typography id='discrete-slider' gutterBottom>\n\t\t\t\t\t\t\t\tDistance\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t<Slider\n\t\t\t\t\t\t\t\tvalue={distance}\n\t\t\t\t\t\t\t\tgetAriaValueText={valuetext}\n\t\t\t\t\t\t\t\taria-labelledby='discrete-slider'\n\t\t\t\t\t\t\t\tvalueLabelDisplay='auto'\n\t\t\t\t\t\t\t\tonChange={(e, val) => changeDist(Number(val))}\n\t\t\t\t\t\t\t\tmin={10}\n\t\t\t\t\t\t\t\tmax={1000}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item xs={4}>\n\t\t\t\t\t\t\t<Typography id='discrete-slider' gutterBottom>\n\t\t\t\t\t\t\t\tLookingFor\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\t\tfullWidth={true}\n\t\t\t\t\t\t\t\tvalue={lookingFor ? lookingFor : ''}\n\t\t\t\t\t\t\t\tonChange={(e) => setLookingFor(e.currentTarget.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item xs={4}>\n\t\t\t\t\t\t\t<Typography id='discrete-slider' gutterBottom>\n\t\t\t\t\t\t\t\tInterest\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\t\tfullWidth={true}\n\t\t\t\t\t\t\t\tvalue={interest ? interest : ''}\n\t\t\t\t\t\t\t\tonChange={(e) => setInterest(e.currentTarget.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<ExpansionPanelActions>\n\t\t\t\t\t\t<Button size='small' variant='outlined' onClick={changeLocation}>\n\t\t\t\t\t\t\tSearch\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</ExpansionPanelActions>\n\t\t\t\t</ExpansionPanelDetails>\n\t\t\t</ExpansionPanel>\n\t\t\t<Box className={`${classes.root}`}>\n\t\t\t\t{searchState.status === 'success' &&\n\t\t\t\t\tsearchState.data.map((user, idx) => (\n\t\t\t\t\t\t<ButtonBase\n\t\t\t\t\t\t\tfocusRipple\n\t\t\t\t\t\t\tkey={'user' + idx}\n\t\t\t\t\t\t\tclassName={classes.image}\n\t\t\t\t\t\t\tfocusVisibleClassName={classes.focusVisible}>\n\t\t\t\t\t\t\t<Link to={user.username}>\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclassName={classes.imageSrc}\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tbackgroundImage: `url(${\n\t\t\t\t\t\t\t\t\t\t\tuser.avatar ? user.avatar?.thumbnail : `/images/noavatar${user.gender}.jpg`\n\t\t\t\t\t\t\t\t\t\t})`,\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<span className={classes.imageButton}>\n\t\t\t\t\t\t\t\t\t<Typography component='span' variant='subtitle1' color='inherit' className={classes.imageTitle}>\n\t\t\t\t\t\t\t\t\t\t{user.firstName + ' ' + user.lastName}\n\t\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</ButtonBase>\n\t\t\t\t\t))}\n\t\t\t\t{searchState.status === 'loading' &&\n\t\t\t\t\t[...Array(9)].map((e, i) => (\n\t\t\t\t\t\t<Skeleton key={'skel' + i} variant='rect' className={classes.image} style={{ backgroundColor: 'gray' }} />\n\t\t\t\t\t))}\n\t\t\t</Box>\n\t\t</div>\n\t)\n}\n\nexport default Search\n","import { makeStyles, Theme, createStyles } from '@material-ui/core/styles'\n\nconst styles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\tuser: {},\n\t\timagesList: {\n\t\t\tdisplay: 'flex',\n\t\t\tflexWrap: 'wrap',\n\t\t\tjustifyContent: 'space-around',\n\t\t\toverflow: 'hidden',\n\t\t\tbackgroundColor: theme.palette.background.paper,\n\t\t\tmarginTop: '1em',\n\t\t},\n\t\tgridList: {\n\t\t\tflexWrap: 'nowrap',\n\t\t\t// Promote the list into his own layer on Chrome. This cost memory but helps keeping high FPS.\n\t\t\ttransform: 'translateZ(0)',\n\t\t},\n\t\ttitle: {\n\t\t\tcolor: theme.palette.primary.light,\n\t\t},\n\t\ttitleBar: {\n\t\t\tbackground: 'linear-gradient(to top, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 70%, rgba(0,0,0,0) 100%)',\n\t\t},\n\t}),\n)\n\nexport default styles\n","import React, { useEffect, useReducer } from 'react'\nimport { useParams } from 'react-router-dom'\nimport { Grid, Chip, Typography, CardMedia, GridList, GridListTile, CardContent, IconButton } from '@material-ui/core'\nimport LocationOnIcon from '@material-ui/icons/LocationOn'\nimport FavoriteBorderIcon from '@material-ui/icons/FavoriteBorder'\nimport { UserContextConsumer } from '../../helpers/UserContextProvider'\nimport UserReducer from '../../reducers/UserReducer'\nimport ImagesReducer from '../../reducers/ImagesReducer'\nimport makeProfileStyles from '../profile/styles'\nimport makeStyles from './styles'\n\nconst userReducer = new UserReducer()\nconst imagesReducer = new ImagesReducer()\n\nconst UserPage: React.FC = () => {\n\tconst { user } = useParams()\n\tconst [userState, userDispatch] = useReducer(userReducer.reducer, { status: 'loading' })\n\tconst [imagesState, imagesDispatch] = useReducer(imagesReducer.reducer, { status: 'loading' })\n\n\tconst classes = makeStyles()\n\tconst profileStyles = makeProfileStyles()\n\n\tuseEffect(() => {\n\t\tconsole.log(user)\n\t\tuserReducer.getUser(userDispatch, user)\n\t\timagesReducer.getImagesForSpecificUser(imagesDispatch, user)\n\t}, [user])\n\n\treturn (\n\t\t<UserContextConsumer>\n\t\t\t{(ctx) =>\n\t\t\t\tctx?.state.status === 'success' &&\n\t\t\t\tuserState.status === 'success' && (\n\t\t\t\t\t<Grid container style={{ height: 'inherit', padding: '2em' }}>\n\t\t\t\t\t\t<Grid item xs={6}>\n\t\t\t\t\t\t\t<CardMedia\n\t\t\t\t\t\t\t\timage={\n\t\t\t\t\t\t\t\t\tuserState.data.avatar ? userState.data.avatar.normal : `/images/noavatar${userState.data.gender}.jpg`\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tstyle={{ paddingTop: '150%' }}></CardMedia>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item xs={6} style={{ paddingLeft: '2em' }}>\n\t\t\t\t\t\t\t<div style={{ display: 'flex', fontSize: '1.8em', lineHeight: '1.5em' }}>\n\t\t\t\t\t\t\t\t<Typography variant='h4' style={{ fontWeight: 'bold' }}>\n\t\t\t\t\t\t\t\t\t{`${userState.data.firstName}, ${userState.data.age}`}\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t<div style={{ flexGrow: 1 }}></div>\n\t\t\t\t\t\t\t\t{userState.data.heartsNumber}\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\tstyle={{ marginTop: '-12px' }}\n\t\t\t\t\t\t\t\t\tonClick={\n\t\t\t\t\t\t\t\t\t\tuserState.data.heartIsGiven\n\t\t\t\t\t\t\t\t\t\t\t? () => userReducer.returnHurt(userDispatch, userState.data)\n\t\t\t\t\t\t\t\t\t\t\t: () => userReducer.giveHurt(userDispatch, userState.data)\n\t\t\t\t\t\t\t\t\t}>\n\t\t\t\t\t\t\t\t\t<FavoriteBorderIcon\n\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\twidth: '1.5em',\n\t\t\t\t\t\t\t\t\t\t\theight: '1.5em',\n\t\t\t\t\t\t\t\t\t\t\tcolor: userState.data.heartIsGiven ? '#d73652' : '#fff',\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Typography style={{ borderBottom: '2px solid #28272c', paddingBottom: '1em' }}>\n\t\t\t\t\t\t\t\t<LocationOnIcon />{' '}\n\t\t\t\t\t\t\t\t{userReducer.getDistanse(\n\t\t\t\t\t\t\t\t\tctx.state.data.lat,\n\t\t\t\t\t\t\t\t\tctx.state.data.lon,\n\t\t\t\t\t\t\t\t\tuserState.data.lat,\n\t\t\t\t\t\t\t\t\tuserState.data.lon,\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{' km away'}\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t<Typography variant='h5' style={{ color: '#908f96', marginTop: '1em' }}>\n\t\t\t\t\t\t\t\tLooking for\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t{userState.data.lookingFor.map((data) => {\n\t\t\t\t\t\t\t\treturn <Chip key={data} label={data} className={profileStyles.chip} />\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t<Typography variant='h5' style={{ color: '#908f96', marginTop: '1em' }}>\n\t\t\t\t\t\t\t\tAbout\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t<Typography>{userState.data.biography}</Typography>\n\t\t\t\t\t\t\t{imagesState.status === 'success' && (\n\t\t\t\t\t\t\t\t<div className={classes.imagesList}>\n\t\t\t\t\t\t\t\t\t<GridList className={classes.gridList} cols={3}>\n\t\t\t\t\t\t\t\t\t\t{imagesState.data.map((img) => (\n\t\t\t\t\t\t\t\t\t\t\t<GridListTile key={img.id} style={{ height: '10em' }}>\n\t\t\t\t\t\t\t\t\t\t\t\t<img src={img.image.thumbnail} alt={''} />\n\t\t\t\t\t\t\t\t\t\t\t</GridListTile>\n\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t</GridList>\n\t\t\t\t\t\t\t\t\t<Grid container>\n\t\t\t\t\t\t\t\t\t\t<Grid item xs={6} style={{ marginTop: '1em' }}>\n\t\t\t\t\t\t\t\t\t\t\t<Typography style={{ color: '#908f96', fontSize: '0.8rem', textTransform: 'uppercase' }}>\n\t\t\t\t\t\t\t\t\t\t\t\tRelationship\n\t\t\t\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t\t<Grid item xs={6} style={{ marginTop: '1em' }}>\n\t\t\t\t\t\t\t\t\t\t\t<Typography>It's complicated</Typography>\n\t\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t\t<Grid item xs={6} style={{ marginTop: '1em' }}>\n\t\t\t\t\t\t\t\t\t\t\t<Typography style={{ color: '#908f96', fontSize: '0.8rem', textTransform: 'uppercase' }}>\n\t\t\t\t\t\t\t\t\t\t\t\tInterests\n\t\t\t\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t\t<Grid item xs={6} style={{ marginTop: '1em' }}>\n\t\t\t\t\t\t\t\t\t\t\t{userState.data.interests.map((data, idx) => {\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span key={idx} style={{ marginRight: '0.2em' }}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t#{data}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\t\t\t\t)\n\t\t\t}\n\t\t</UserContextConsumer>\n\t)\n}\n\nexport default UserPage\n","import RequesReduser, { Action } from './RequestReducer'\n\ntype MsgStatus = 'sended' | 'readed' | 'unreaded'\n\nexport type Chat = {\n\tid: number\n\tinterlocutorId: number\n\tinterlocutorName: string\n\tinterlocutorAvatar?: string\n\tlastMsg?:\n\t\t| {\n\t\t\t\tsenderId: number\n\t\t\t\ttext: string\n\t\t\t\ttime: Date\n\t\t  }\n\t\t| undefined\n}\n\nclass ChatListReducer extends RequesReduser<Chat[]> {\n\tbaseUrl = '/api/chat'\n\tgetChats(dispatch: React.Dispatch<Action<Chat[]>>, onSuccess: () => void) {\n\t\tthis.request(\n\t\t\tthis.getReq(),\n\t\t\t(res) => {\n\t\t\t\tdispatch({ type: 'success', results: res['data']['data'] })\n\t\t\t\tonSuccess()\n\t\t\t},\n\t\t\t(err) => {\n\t\t\t\tdispatch({ type: 'failure', error: err })\n\t\t\t},\n\t\t)\n\t}\n}\n\nexport default ChatListReducer\n","import { makeStyles, Theme, createStyles } from '@material-ui/core/styles'\n\nconst styles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\tchatsList: { padding: '1em' },\n\t\tchatListHeader: { position: 'static', minHeight: '64px', marginBottom: '1.5em', display: 'flex' },\n\t\tchatItem: {\n\t\t\tdisplay: 'flex',\n\t\t\ttextAlign: 'left',\n\t\t\tjustifyContent: 'flex-start',\n\t\t\twidth: '100%',\n\t\t\tmarginBottom: '1.5em',\n\t\t},\n\t\tchatItemAvatar: {\n\t\t\twidth: '3.5em',\n\t\t\theight: '3.5em',\n\t\t\tmarginRight: '0.5em',\n\t\t},\n\t\tchatName: { fontSize: '1rem' },\n\t\tchatTime: { color: '#94929c', fontSize: '0.7rem' },\n\t\tchatMessage: {\n\t\t\tfontSize: '0.8rem',\n\t\t\toverflow: 'hidden',\n\t\t\ttextOverflow: 'ellipsis',\n\t\t\twhiteSpace: 'nowrap',\n\t\t\tmarginLeft: '0.2em',\n\t\t},\n\t}),\n)\n\nexport default styles\n","import React from 'react'\nimport { Box, Typography, Avatar, ButtonBase } from '@material-ui/core/'\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack'\nimport FiberManualRecordIcon from '@material-ui/icons/FiberManualRecord'\nimport ChatListReducer, { Chat } from '../../reducers/ChatListReducer'\nimport styles from './chatsListStyles'\nimport { SocketContextConsumer } from '../../helpers/SocketContextProvider'\nimport { SocketManager } from '../../helpers/SocketManager'\n\ninterface Props {\n\tsetChat: React.Dispatch<React.SetStateAction<Chat | null>>\n\tsocketManager: SocketManager\n}\n\nconst ChatList: React.FC<Props> = (props: Props) => {\n\tconst chatListReducer = new ChatListReducer()\n\tconst cl = styles()\n\tconst { setChat, socketManager } = props\n\n\tconst [chatListState, chatListDispatch] = React.useReducer(chatListReducer.reducer, { status: 'loading' })\n\n\tReact.useEffect(() => {\n\t\tconsole.log('useEffect /chat')\n\t\tchatListReducer.getChats(chatListDispatch, () => {\n\t\t\tsocketManager.socket.on('chatlist', (data: any) => {\n\t\t\t\tchatListReducer.getChats(chatListDispatch, () => {})\n\t\t\t})\n\t\t})\n\n\t\treturn () => {\n\t\t\tsocketManager.socket.removeListener('chatlist')\n\t\t}\n\t}, [])\n\n\treturn chatListState.status === 'success' ? (\n\t\t// <SocketContextConsumer>\n\t\t<Box className={cl.chatsList}>\n\t\t\t<Box className={cl.chatListHeader}>\n\t\t\t\t<Typography variant='h5' style={{ alignSelf: 'center' }}>\n\t\t\t\t\tMessages\n\t\t\t\t</Typography>\n\t\t\t</Box>\n\t\t\t<Box>\n\t\t\t\t{chatListState.data.map((chat, idx) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<ButtonBase className={cl.chatItem} key={idx} onClick={() => setChat(chat)}>\n\t\t\t\t\t\t\t<Avatar className={cl.chatItemAvatar} alt='Vasya' src={chat.interlocutorAvatar} />\n\t\t\t\t\t\t\t<Box style={{ overflow: 'hidden' }}>\n\t\t\t\t\t\t\t\t<Typography className={cl.chatName}>{chat.interlocutorName}</Typography>\n\t\t\t\t\t\t\t\t<Typography className={cl.chatTime}>\n\t\t\t\t\t\t\t\t\t{chat.lastMsg?.time ? new Date(chat.lastMsg.time).toLocaleString() : ''}\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t<Box style={{ display: 'flex' }}>\n\t\t\t\t\t\t\t\t\t{chat.interlocutorId === chat.lastMsg?.senderId && <ArrowBackIcon fontSize='small' />}\n\t\t\t\t\t\t\t\t\t{/* {chat.msgStatus === 'unreaded' && <FiberManualRecordIcon fontSize='small' color='error' />} */}\n\t\t\t\t\t\t\t\t\t<Typography className={cl.chatMessage}>{chat.lastMsg?.text || 'No messages'}</Typography>\n\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</ButtonBase>\n\t\t\t\t\t)\n\t\t\t\t})}\n\t\t\t</Box>\n\t\t</Box>\n\t) : (\n\t\t// </SocketContextConsumer>\n\t\t<div>loading...</div>\n\t)\n}\n\nexport default ChatList\n","import RequesReduser, { Action } from './RequestReducer'\n\nexport type Message = {\n\tid?: number\n\tchatId: number\n\tsenderId?: number\n\tmessage: string\n\ttime?: Date\n}\n\nclass MessageReducer extends RequesReduser<Message[]> {\n\tbaseUrl = '/api/message'\n\tgetMessages(dispatch: React.Dispatch<Action<Message[]>>, chatId: number, onSuccess: () => void) {\n\t\tthis.request(\n\t\t\tthis.getReq(`/api/message/chat/${chatId}`),\n\t\t\t(res) => {\n\t\t\t\tdispatch({ type: 'success', results: res['data']['data'] })\n\t\t\t\tonSuccess()\n\t\t\t},\n\t\t\t(err) => {\n\t\t\t\tdispatch({ type: 'failure', error: err })\n\t\t\t},\n\t\t)\n\t}\n}\n\nexport default MessageReducer\n","import { makeStyles, Theme, createStyles } from '@material-ui/core/styles'\n\nconst styles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\tchatBox: {\n\t\t\tposition: 'absolute',\n\t\t\ttop: 0,\n\t\t\tleft: 0,\n\t\t\tright: 0,\n\t\t\tbottom: 0,\n\t\t\tzIndex: 2,\n\t\t},\n\t\tmessageBox: {\n\t\t\toverflowY: 'scroll',\n\t\t\tpaddingLeft: 20,\n\t\t\tpaddingRight: 20,\n\t\t\theight: 'calc(100% - 14em)',\n\t\t},\n\t\tclose: {\n\t\t\tdisplay: 'flex',\n\t\t\tpadding: '0.8em',\n\t\t\tborderBottom: '1px solid #c4c4c480',\n\t\t\tmarginBottom: '0.5em',\n\t\t},\n\t\tmessage: {\n\t\t\tposition: 'relative',\n\t\t\tmarginBottom: '10px',\n\t\t\tpadding: '10px',\n\t\t\ttextAlign: 'left',\n\t\t\tfont: \"400 .9em 'Open Sans', sans-serif\",\n\t\t\tborderRadius: '10px',\n\t\t},\n\t\tleftMessage: {\n\t\t\tmarginRight: '20px',\n\t\t\tbackgroundColor: '#24232a',\n\t\t},\n\t\trightMessage: {\n\t\t\tmarginLeft: '20px',\n\t\t\tbackgroundColor: '#e92d41',\n\t\t},\n\t\tmessageContent: {\n\t\t\tpadding: '0',\n\t\t\tmargin: '0',\n\t\t},\n\t\tmessageInput: {\n\t\t\tposition: 'absolute',\n\t\t\tleft: 0,\n\t\t\tright: 0,\n\t\t\tbottom: 0,\n\t\t\tpadding: 10,\n\t\t\tfont: \"400 .9em 'Open Sans', sans-serif\",\n\t\t},\n\t}),\n)\n\nexport default styles\n","import React from 'react'\nimport Card from '@material-ui/core/Card'\nimport Box from '@material-ui/core/Box'\nimport IconButton from '@material-ui/core/IconButton'\nimport TextField from '@material-ui/core/TextField'\nimport Typography from '@material-ui/core/Typography'\nimport Avatar from '@material-ui/core/Avatar'\nimport SendIcon from '@material-ui/icons/Send'\nimport CloseIcon from '@material-ui/icons/Close'\n\nimport MessagesReducer, { Message } from '../../reducers/MessagesReducer'\nimport { SocketManager } from '../../helpers/SocketManager'\nimport { Chat } from '../../reducers/ChatListReducer'\nimport styles from './chatBoxStyles'\n\ninterface Props {\n\tchat: Chat\n\tsetChat: React.Dispatch<React.SetStateAction<Chat | null>>\n\tsocketManager: SocketManager\n}\n\nconst messageReducer = new MessagesReducer()\n\nconst ChatBox: React.FC<Props> = (props: Props) => {\n\tconst classes = styles()\n\tconst { chat, setChat, socketManager } = props\n\tconst [newMessage, setNewMessage] = React.useState('')\n\tconst messagesEndRef = React.useRef<HTMLDivElement>(null)\n\tconst [messageState, messageDispatch] = React.useReducer(messageReducer.reducer, { status: 'loading' })\n\n\tconst scrollToBottom = (smooth: boolean) => {\n\t\tif (messagesEndRef && messagesEndRef.current) {\n\t\t\tif (smooth) messagesEndRef.current.scrollIntoView({ behavior: 'smooth' })\n\t\t\telse messagesEndRef.current.scrollIntoView()\n\t\t}\n\t}\n\n\tReact.useEffect(() => {\n\t\tmessageReducer.getMessages(messageDispatch, chat.id, () => {\n\t\t\tscrollToBottom(false)\n\t\t})\n\n\t\tsocketManager.socket.on('messageSent', (data: any) => {\n\t\t\tsetNewMessage('')\n\t\t\tmessageDispatch({ type: 'success', results: data })\n\t\t\tscrollToBottom(true)\n\t\t})\n\t\tsocketManager.socket.on('message', (data: any) => {\n\t\t\tconsole.log('incoming message')\n\t\t\tconsole.log(data)\n\t\t\tif (messageState.status === 'success') messageDispatch({ type: 'success', results: data })\n\t\t\tscrollToBottom(true)\n\t\t})\n\n\t\treturn () => {\n\t\t\tsocketManager.socket.removeListener('message')\n\t\t\tsocketManager.socket.removeListener('messageSent')\n\t\t}\n\t}, [chat])\n\n\tconst sendMsg = () => {\n\t\tconst res = newMessage.replace(/(\\r\\n|\\n|\\r)/gm, '')\n\t\tsetNewMessage(res)\n\t\tif (res.length > 0) socketManager.sendMessage({ chatId: chat.id, receiverId: chat.interlocutorId, text: res })\n\t}\n\n\tconst runFuncOnEnter = (func: () => void) => (e: React.KeyboardEvent) => {\n\t\tif (e.keyCode === 13) {\n\t\t\tfunc()\n\t\t}\n\t}\n\n\treturn (\n\t\t<Card className={classes.chatBox}>\n\t\t\t{messageState.status === 'success' && (\n\t\t\t\t<Box className={classes.close}>\n\t\t\t\t\t<Avatar src={chat.interlocutorAvatar} style={{ width: '3em', height: '3em' }} />\n\t\t\t\t\t<Typography variant='h6' style={{ padding: '0.5em' }}>\n\t\t\t\t\t\t{chat.interlocutorName}\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<div style={{ flexGrow: 1 }}></div>\n\t\t\t\t\t<IconButton style={{ width: '2em', height: '2em' }} onClick={() => setChat(null)}>\n\t\t\t\t\t\t<CloseIcon fontSize='default' />\n\t\t\t\t\t</IconButton>\n\t\t\t\t</Box>\n\t\t\t)}\n\t\t\t<Box color='text.primary' className={classes.messageBox}>\n\t\t\t\t{messageState.status === 'success' &&\n\t\t\t\t\tmessageState.data.map((elem, idx) => {\n\t\t\t\t\t\tconst msgStyle = chat.interlocutorId === elem.senderId ? classes.leftMessage : classes.rightMessage\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div className={`${classes.message} ${msgStyle}`} key={'msg' + idx}>\n\t\t\t\t\t\t\t\t<Typography className={classes.messageContent}>{elem.message}</Typography>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)\n\t\t\t\t\t})}\n\t\t\t\t<div ref={messagesEndRef} />\n\t\t\t</Box>\n\t\t\t<TextField\n\t\t\t\tplaceholder='Enter your message'\n\t\t\t\tclassName={classes.messageInput}\n\t\t\t\tmultiline={true}\n\t\t\t\tvariant='outlined'\n\t\t\t\trowsMax='4'\n\t\t\t\tvalue={newMessage}\n\t\t\t\tonChange={(e) => setNewMessage(e.target.value)}\n\t\t\t\tonKeyDown={runFuncOnEnter(sendMsg)}\n\t\t\t\tInputProps={{\n\t\t\t\t\tendAdornment: (\n\t\t\t\t\t\t<IconButton onClick={sendMsg}>\n\t\t\t\t\t\t\t<SendIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t),\n\t\t\t\t}}\n\t\t\t/>\n\t\t</Card>\n\t)\n}\n\nexport default ChatBox\n","import io from 'socket.io-client'\n\nexport class SocketManager {\n\taddress = process.env.REACT_APP_SOCKET_SERVER || 'http://localhost:5001'\n\tsocket: SocketIOClient.Socket = io(this.address)\n\n\tconstructor() {\n\t\tthis.socket.on('error', function (err: any) {\n\t\t\tconsole.log('received socket error:')\n\t\t\tconsole.log(err)\n\t\t})\n\n\t\tthis.socket.on('connect', function () {\n\t\t\tconsole.log('socket successfuly connected!')\n\t\t\tconsole.log(process.env.REACT_APP_SOCKET_SERVER)\n\t\t})\n\t}\n\n\tsendMessage(message: { chatId: number; receiverId: number; text: string }) {\n\t\tconsole.log('sending message')\n\t\tconsole.log(message)\n\t\tthis.socket.emit('message', message)\n\t}\n}\n","import React from 'react'\nimport { Route } from 'react-router-dom'\nimport PrimaryAppBar from '../layout/PrimaryAppBar'\nimport UserReducer from '../../reducers/UserReducer'\nimport { Chat } from '../../reducers/ChatListReducer'\nimport { UserContextProvider } from '../../helpers/UserContextProvider'\nimport { SocketContextProvider } from '../../helpers/SocketContextProvider'\nimport ChatList from '../chat/index'\nimport ChatBox from '../chat/ChatBox'\nimport { Grid, Card, Container, Hidden, SwipeableDrawer } from '@material-ui/core'\n\nimport { SocketManager } from '../../helpers/SocketManager'\n\nimport mainStyles from '../../styles'\n\nconst userReducer = new UserReducer()\nconst socketManager = new SocketManager()\ninterface Props {\n\tpath: string\n\tcomponent: React.FC\n}\n\nconst PrivateLayout: React.FC<Props> = (props: Props) => {\n\tconst [state, dispatch] = React.useReducer(userReducer.reducer, { status: 'loading' })\n\tconst [chat, setChat] = React.useState<Chat | null>(null)\n\tconst [leftPanel, setLeftPanel] = React.useState<boolean>(true)\n\n\tconst mainClasses = mainStyles()\n\tReact.useEffect(() => {\n\t\tuserReducer.getUser(dispatch)\n\t}, [])\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<UserContextProvider value={{ state, dispatch }}>\n\t\t\t\t{/* <SocketContextProvider value={{ socket: socketManager }}> */}\n\t\t\t\t<Container style={{ paddingTop: '0.5em', paddingBottom: '0.5em' }}>\n\t\t\t\t\t<Card style={{ border: '1px solid bisque' }}>\n\t\t\t\t\t\t<Grid container style={{ height: 'calc(100vh - 2em)' }}>\n\t\t\t\t\t\t\t<Hidden smDown>\n\t\t\t\t\t\t\t\t<Grid item md={3} style={{ borderRight: '1px solid bisque' }}>\n\t\t\t\t\t\t\t\t\t<ChatList setChat={setChat} socketManager={socketManager} />\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t</Hidden>\n\t\t\t\t\t\t\t<Hidden mdUp>\n\t\t\t\t\t\t\t\t<SwipeableDrawer\n\t\t\t\t\t\t\t\t\tanchor={'left'}\n\t\t\t\t\t\t\t\t\topen={leftPanel}\n\t\t\t\t\t\t\t\t\tonClose={() => setLeftPanel(false)}\n\t\t\t\t\t\t\t\t\tonOpen={() => setLeftPanel(true)}>\n\t\t\t\t\t\t\t\t\t<ChatList setChat={setChat} socketManager={socketManager} />\n\t\t\t\t\t\t\t\t</SwipeableDrawer>\n\t\t\t\t\t\t\t</Hidden>\n\t\t\t\t\t\t\t<Route path={props.path}>\n\t\t\t\t\t\t\t\t<Grid item xs={12} md={9} className={mainClasses.rightScrollingContainer}>\n\t\t\t\t\t\t\t\t\t<PrimaryAppBar />\n\t\t\t\t\t\t\t\t\t{chat ? <ChatBox chat={chat} setChat={setChat} socketManager={socketManager} /> : ''}\n\t\t\t\t\t\t\t\t\t<div style={{ height: 'calc(100% - 5em)', overflowY: 'scroll' }}>\n\t\t\t\t\t\t\t\t\t\t<props.component />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Card>\n\t\t\t\t</Container>\n\t\t\t\t{/* </SocketContextProvider> */}\n\t\t\t</UserContextProvider>\n\t\t</React.Fragment>\n\t)\n}\n\nexport default PrivateLayout\n","import React from 'react'\nimport { Redirect, Route } from 'react-router-dom'\nimport { isUser } from './getJwt'\nimport PrivateLayout from '../components/app/UserLayout'\n\ninterface Props {\n\tpath: string\n\tcomponent: React.FC\n}\n\nconst PrivateRoute: React.FC<Props> = (props: Props) => {\n\treturn isUser() ? <PrivateLayout component={props.component} path={props.path} /> : <Redirect to='/login' />\n}\n\nexport default PrivateRoute\n","import { createMuiTheme, Theme } from '@material-ui/core/styles'\nimport { PaletteOptions } from '@material-ui/core/styles/createPalette'\n\nexport type Palette = 'light' | 'dark'\nfunction getPalette(name: Palette): PaletteOptions {\n\tswitch (name) {\n\t\tcase 'light':\n\t\t\treturn {\n\t\t\t\tprimary: {\n\t\t\t\t\tmain: '#FE5D26',\n\t\t\t\t},\n\t\t\t\tsecondary: {\n\t\t\t\t\tmain: '#19857b',\n\t\t\t\t},\n\t\t\t\tbackground: {\n\t\t\t\t\tdefault: '#fff',\n\t\t\t\t},\n\t\t\t\ttext: {\n\t\t\t\t\tprimary: '#1a191e',\n\t\t\t\t},\n\t\t\t}\n\t\tcase 'dark':\n\t\t\treturn {\n\t\t\t\tprimary: {\n\t\t\t\t\tmain: '#FE5D26',\n\t\t\t\t},\n\t\t\t\tsecondary: {\n\t\t\t\t\tmain: '#19857b',\n\t\t\t\t},\n\t\t\t\tbackground: {\n\t\t\t\t\tdefault: '#1a191e',\n\t\t\t\t\tpaper: '#1a191e',\n\t\t\t\t},\n\t\t\t\ttext: {\n\t\t\t\t\tprimary: '#fff',\n\t\t\t\t\tsecondary: 'rgba(255, 255, 255, 0.7)',\n\t\t\t\t\tdisabled: 'rgba(255, 255, 255, 0.5)',\n\t\t\t\t\thint: 'rgba(255, 255, 255, 0.5)',\n\t\t\t\t},\n\t\t\t}\n\t}\n}\n\n// nice grey #f5f5f5\n\nconst useTheme = (palette: Palette) => (): Theme => {\n\tconsole.log('THEME: ' + palette)\n\n\tconst paletteOptions = getPalette(palette)\n\treturn createMuiTheme({\n\t\tpalette: paletteOptions,\n\t\ttypography: {\n\t\t\tfontFamily: ['Roboto', 'Helvetica', 'Arial'].join(','), //'Dancing Script'\n\t\t\tfontSize: 13,\n\t\t},\n\t\toverrides: {\n\t\t\tMuiIconButton: {\n\t\t\t\troot: {\n\t\t\t\t\tcolor: '#fff',\n\t\t\t\t\t'&:hover': {\n\t\t\t\t\t\tbackgroundColor: 'rgba(255, 255, 255, 0.19)',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tMuiOutlinedInput: {\n\t\t\t\tnotchedOutline: {\n\t\t\t\t\tborderColor: 'bisque',\n\t\t\t\t},\n\t\t\t},\n\t\t\tMuiButton: {\n\t\t\t\tcontained: {\n\t\t\t\t\tbackground: 'linear-gradient(45deg, #FE5D26 30%, #FF8E53 90%)',\n\t\t\t\t\tcolor: 'white',\n\t\t\t\t},\n\t\t\t\toutlined: {\n\t\t\t\t\tcolor: '#fff',\n\t\t\t\t\tbackgroundColor: '#1a191e',\n\t\t\t\t\tborderColor: '#fff',\n\t\t\t\t},\n\t\t\t\troot: {\n\t\t\t\t\tcolor: '#fff',\n\t\t\t\t\t'&:hover': {\n\t\t\t\t\t\tbackgroundColor: '#49484a',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tMuiChip: {\n\t\t\t\troot: {\n\t\t\t\t\tcolor: '#fff',\n\t\t\t\t\tbackgroundColor: '#FE5D26',\n\t\t\t\t},\n\t\t\t\toutlined: {\n\t\t\t\t\tcolor: '#fff',\n\t\t\t\t\tbackgroundColor: '#FE5D26',\n\t\t\t\t},\n\t\t\t},\n\t\t\tMuiPaper: {\n\t\t\t\toutlined: {\n\t\t\t\t\tborderColor: '#fff',\n\t\t\t\t},\n\t\t\t},\n\t\t\tMuiTypography: {\n\t\t\t\th3: {\n\t\t\t\t\tfontFamily: 'Dancing Script',\n\t\t\t\t\tfontSize: '34px',\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t})\n}\n\nexport default useTheme\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './components/app'\n\nReactDOM.render(<App />, document.querySelector('#root'))\n","import React from 'react'\nimport SingIn from '../auth/SignIn'\nimport SingUp from '../auth/SignUp'\nimport VerifyEmail from '../auth/VerifyEmail'\nimport GuestRoute from '../../helpers/GuestRoute'\nimport Profile from '../profile'\nimport Gallery from '../gallery'\nimport Search from '../search'\nimport UserPage from '../userpage'\n\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom'\nimport PrivateRoute from '../../helpers/PrivateRoute'\n\nimport CssBaseline from '@material-ui/core/CssBaseline'\nimport { ThemeProvider } from '@material-ui/core/styles'\n\nimport useTheme, { Palette } from '../../theme'\n\nexport default function App() {\n\tconst colorTheme: Palette = 'dark'\n\n\tconst theme = React.useMemo(useTheme(colorTheme), [colorTheme])\n\n\treturn (\n\t\t<ThemeProvider theme={theme}>\n\t\t\t<CssBaseline />\n\t\t\t<Router>\n\t\t\t\t<Switch>\n\t\t\t\t\t<Route path='/' exact component={SingIn} />\n\t\t\t\t\t<GuestRoute path='/login' component={SingIn} />\n\t\t\t\t\t<GuestRoute path='/register' component={SingUp} />\n\t\t\t\t\t<GuestRoute path='/verify/:userid/:uuid' component={VerifyEmail} />\n\t\t\t\t\t<PrivateRoute path='/profile' component={Profile} />\n\t\t\t\t\t<PrivateRoute path='/search' component={Search} />\n\t\t\t\t\t<PrivateRoute path='/gallery' component={Gallery} />\n\t\t\t\t\t<PrivateRoute path='/:user' component={UserPage} />\n\t\t\t\t</Switch>\n\t\t\t</Router>\n\t\t</ThemeProvider>\n\t)\n}\n\nconst NoPage: React.FC = () => {\n\treturn <div>404</div>\n}\n"],"sourceRoot":""}