(this["webpackJsonpcreate-react-app-with-typescript"]=this["webpackJsonpcreate-react-app-with-typescript"]||[]).push([[0],{254:function(e,t,a){e.exports=a(440)},437:function(e,t){},440:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(14),l=a.n(i),c=a(60),o=a(18),s=a(35),m=a(84),u=a(42),d=a.n(u),g=a(490),p=a(151),h=a(491),f=a(511),b=a(493),E=a(115),v=a.n(E),y=a(116),k=a.n(y),j=a(13),x=a(480),O=a(521),w=Object(x.a)((function(e){return Object(O.a)({h1:{marginTop:"0.5em",fontWeight:400,fontSize:"3.5em"},root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",backgroundSize:"cover",backgroundPosition:"center 40%",marginTop:"2em"},sectionDesktop:Object(j.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(j.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"}),rightScrollingContainer:Object(j.a)({height:"inherit",overflow:"hidden",position:"relative"},e.breakpoints.down("xs"),{position:"initial"})})})),C=a(10),N=a(483),S=a(512),I=function(e){var t=r.a.useState(e),a=Object(C.a)(t,1)[0];return r.a.createElement(N.a,{container:!0,alignItems:"flex-end"},r.a.createElement(N.a,{item:!0,xs:1},r.a.createElement(a.icon,null)),r.a.createElement(N.a,{item:!0,xs:11},r.a.createElement(S.a,{label:a.label,type:a.type,name:a.name,fullWidth:!0,onChange:a.handleChange,onBlur:a.handleBlur})))},B=a(27),A=a(28),q=a(120),R=a.n(q),T=function(){function e(){Object(B.a)(this,e)}return Object(A.a)(e,null,[{key:"isAuthorized",value:function(){return R.a.get("user")===e.AUTHORIZED}},{key:"setAuthorized",value:function(t){t?R.a.set("user",e.AUTHORIZED,{sameSite:"strict"}):R.a.remove("user")}}]),e}();T.AUTHORIZED="authorized";var M=Object(m.b)({mapPropsToValues:function(e){return{username:"",password:"",remember:!0}},validationSchema:s.object().shape({username:s.string().required("Required"),password:s.string().required("Required").min(6,"Must be 6 characters or less")}),handleSubmit:function(e,t){d.a.post("/api/auth/login",{username:e.username,password:e.password}).then((function(e){!0===e.data.success?(T.setAuthorized(!0),t.setStatus(!0)):(t.setErrors({username:e.data.msg}),t.setSubmitting(!1))})).catch((function(e){!0===e.response.data.success?t.setStatus(!0):(t.setErrors({username:e.response.data.msg}),t.setSubmitting(!1))}))}})((function(e){var t=e.touched,a=e.errors,n=e.isSubmitting,i=w();return e.status?r.a.createElement(c.a,{to:"/profile"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{maxWidth:"sm"},r.a.createElement(p.a,{variant:"h1",className:i.h1},"Sign In"),r.a.createElement(m.a,null,r.a.createElement(I,{label:"Username",type:"text",name:"username",icon:v.a,handleChange:e.handleChange,handleBlur:e.handleBlur}),t.username&&a.username&&r.a.createElement("div",null,a.username),r.a.createElement(I,{label:"Password",type:"password",name:"password",icon:k.a,handleChange:e.handleChange,handleBlur:e.handleBlur}),t.password&&a.password&&r.a.createElement("div",null,a.password),r.a.createElement(h.a,{type:"submit",variant:"contained",fullWidth:!0,disabled:n,style:{marginTop:"2em"}},"Log In")),r.a.createElement(f.a,{m:1,textAlign:"center"},r.a.createElement(p.a,{variant:"body1"},"New here? ",r.a.createElement(o.b,{to:"/register"},r.a.createElement(b.a,{component:"button",type:"button",variant:"body1"},"Sign Up"))))))})),L=a(523),F=a(494),D=a(514),U=a(223),z=a.n(U),P=a(224),W=a.n(P),H=a(225),G=a.n(H),V=a(226),Y=a.n(V),$=Object(m.b)({mapPropsToValues:function(e){return{email:"",username:"",firstName:"",lastName:"",password:"",birth:"",gender:""}},validationSchema:s.object().shape({email:s.string().email("Should be a valid email adress").required("Required"),username:s.string().required("Required"),firstName:s.string().required("Required"),lastName:s.string().required("Required"),password:s.string().required("Required").min(6,"Must be 6 characters or less"),birth:s.string().required("Required"),gender:s.string().required("Required")}),handleSubmit:function(e,t){d.a.post("/api/auth/register",{email:e.email,username:e.username,firstName:e.firstName,lastName:e.lastName,password:e.password,birth:e.birth,gender:e.gender}).then((function(e){!0===e.data.success?t.setStatus(!0):(t.setErrors({username:e.data.msg}),t.setSubmitting(!1))})).catch((function(e){e.response?!0===e.response.data.success?t.setStatus(!0):(t.setErrors({username:e.response.data.msg}),t.setSubmitting(!1)):t.setSubmitting(!1)}))}})((function(e){var t=e.touched,a=e.errors,n=e.isSubmitting,i=w();return e.status?r.a.createElement(c.a,{to:"/profile"}):r.a.createElement(g.a,{maxWidth:"sm"},r.a.createElement(p.a,{variant:"h1",className:i.h1},"Sing Up"),r.a.createElement(m.a,null,r.a.createElement(I,{label:"Email",type:"email",name:"email",icon:z.a,handleChange:e.handleChange,handleBlur:e.handleBlur}),t.email&&a.email&&r.a.createElement("div",null,a.email),r.a.createElement(I,{label:"Username",type:"username",name:"username",icon:v.a,handleChange:e.handleChange,handleBlur:e.handleBlur}),t.username&&a.username&&r.a.createElement("div",null,a.username),r.a.createElement(I,{label:"First name",type:"firstName",name:"firstName",icon:W.a,handleChange:e.handleChange,handleBlur:e.handleBlur}),t.firstName&&a.firstName&&r.a.createElement("div",null,a.firstName),r.a.createElement(I,{label:"Last name",type:"lastName",name:"lastName",icon:G.a,handleChange:e.handleChange,handleBlur:e.handleBlur}),t.lastName&&a.lastName&&r.a.createElement("div",null,a.lastName),r.a.createElement(N.a,{container:!0,alignItems:"flex-end",style:{height:"3.587em"}},r.a.createElement(N.a,{item:!0,xs:1},r.a.createElement(Y.a,null)),r.a.createElement(N.a,{item:!0,xs:11},r.a.createElement(S.a,{id:"date",type:"date",name:"birth",onChange:e.handleChange,fullWidth:!0,InputLabelProps:{shrink:!0}}))),t.birth&&a.birth&&r.a.createElement("div",null,a.birth),r.a.createElement(N.a,{container:!0,alignItems:"flex-end",style:{height:"3.587em"}},r.a.createElement(N.a,{item:!0,xs:1},r.a.createElement("img",{src:"/images/genderIcon.svg",alt:"gender",style:{width:"2em",height:"2em"}})),r.a.createElement(N.a,{item:!0,xs:11},r.a.createElement(L.a,{"aria-label":"gender",onChange:e.handleChange,row:!0,name:"gender",style:{borderBottom:"0.5px solid #0f0f11"}},["male","female"].map((function(e){return r.a.createElement(F.a,{key:"gender"+e,value:e,control:r.a.createElement(D.a,{color:"primary"}),label:e,labelPlacement:"end"})}))))),t.gender&&a.gender&&r.a.createElement("div",null,a.gender),r.a.createElement(I,{label:"Password",type:"password",name:"password",icon:k.a,handleChange:e.handleChange,handleBlur:e.handleBlur}),t.password&&a.password&&r.a.createElement("div",null,a.password),r.a.createElement(f.a,{mt:2},r.a.createElement(h.a,{type:"submit",variant:"contained",fullWidth:!0,disabled:n},"Sign Up")),r.a.createElement(f.a,{m:1,textAlign:"center"},r.a.createElement(p.a,{variant:"body1"},"Already have accaunt? ",r.a.createElement(o.b,{to:"/login"},r.a.createElement(b.a,{component:"button",type:"button",variant:"body1"},"Sign In"))))))})),Z=a(495),K=a(513),J=Object(x.a)((function(e){return Object(O.a)({root:{position:"absolute"},fullWidth:{width:"100%"}})})),X=function(){var e=J(),t=Object(c.g)(),a=Object(n.useState)({success:void 0,msg:void 0,responded:!1}),i=Object(C.a)(a,2),l=i[0],o=i[1];return!1===l.responded&&d.a.get("/api/auth/verify/"+t.userid+"/"+t.uuid).then((function(e){!0===e.data.success&&o({success:!0,msg:"You email successufully verified.",responded:!0})})).catch((function(e){e.response.data&&!1===e.response.data.success&&o({success:!1,msg:e.response.data.msg,responded:!0})})),r.a.createElement(g.a,{maxWidth:"md"},r.a.createElement(f.a,{justifyContent:"center",marginTop:"2.5em",display:"flex"},!0===l.success&&r.a.createElement(K.a,{severity:"success",className:e.fullWidth},l.msg),void 0===l.success&&r.a.createElement(Z.a,{className:e.root}),!1===l.success&&r.a.createElement(K.a,{severity:"error",className:e.fullWidth},l.msg)))},Q=function(e){return T.isAuthorized()?r.a.createElement(c.a,{to:"/search"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(c.b,{path:e.path,component:e.component}))},_=a(118),ee=a.n(_),te=Object(x.a)((function(e){var t,a;return Object(O.a)({marginSm:{margin:"".concat(e.spacing(.1),"em")},paddingSm:{padding:"".concat(e.spacing(.1),"em")},profileAvatar:(t={width:"22em",height:"22em"},Object(j.a)(t,e.breakpoints.down("xs"),{width:"16em",height:"16em",margin:"none"}),Object(j.a)(t,"borderRadius","50%"),Object(j.a)(t,"display","block"),Object(j.a)(t,"margin","auto"),Object(j.a)(t,"position","relative"),Object(j.a)(t,"cursor","pointer"),t),visibleAvatarChange:{"&:hover":{"& $profileAvatarChange":{visibility:"visible"}}},profileAvatarChange:(a={marginTop:"-22em"},Object(j.a)(a,e.breakpoints.down("xs"),{marginTop:"-16em"}),Object(j.a)(a,"lineHeight","".concat(e.spacing(.5),"em")),Object(j.a)(a,"display","flex"),Object(j.a)(a,"backgroundColor",e.palette.background.default),Object(j.a)(a,"color","white"),Object(j.a)(a,"opacity",.5),Object(j.a)(a,"visibility","hidden"),Object(j.a)(a,"marginBottom","0.5em"),a),photoLibraryIcon:{fontSize:"".concat(e.spacing(.5),"em"),margin:"auto"},profileTextField:{marginBottom:"0.7em",paddingBottom:"0.4em",borderBottom:"1px solid #28272c"},profileCard:{marginBottom:"2em"},basicInputFieldsContainer:{paddingTop:"1.5em",alignSelf:"flex-start"},chip:{margin:"".concat(e.spacing(.05),"em")}})})),ae=[{name:"Username",key:"username"},{name:"Email",key:"email"},{name:"First Name",key:"firstName"},{name:"Last Name",key:"lastName"}],ne=a(25),re=a(520),ie=a(496),le=a(497),ce=a(498),oe=a(80),se=a.n(oe),me=function(e){var t,a=e.setProfile,n=e.profile,i=e.editable,l=te(),c=r.a.useState(!1),o=Object(C.a)(c,2),s=o[0],m=o[1],u=r.a.useState(""),d=Object(C.a)(u,2),g=d[0],b=d[1],E=function(){m(!1)},v=function(){if(a){var e=n.interests;e.push(g),a(Object(ne.a)({},n,{interests:e})),b(""),E()}};return r.a.createElement(f.a,{marginBottom:"1em"},i?r.a.createElement(f.a,null,r.a.createElement(p.a,null,"Interests",":"),n.interests.map((function(e){return r.a.createElement(re.a,{key:e,label:e,className:l.chip,onDelete:(t=e,function(){a&&a(Object(ne.a)({},n,{interests:n.interests.filter((function(e){return e!==t}))}))})});var t})),r.a.createElement(re.a,{icon:r.a.createElement(se.a,null),className:l.chip,label:"New",clickable:!0,onClick:function(){m(!0)}})):r.a.createElement(f.a,{textAlign:"left"},r.a.createElement(p.a,null,"Interests",":"),n.interests.map((function(e){return r.a.createElement(re.a,{key:e,label:e,className:l.chip,variant:"outlined"})}))),r.a.createElement(ie.a,{onClose:E,"aria-labelledby":"customized-dialog-title",open:s},r.a.createElement(le.a,{dividers:!0},r.a.createElement(S.a,{id:"outlined-search",label:"Search field",type:"search",variant:"outlined",value:g,onChange:function(e){var t=e.target.value;b(t)},onKeyDown:(t=v,function(e){13===e.keyCode&&t()}),fullWidth:!0,autoFocus:!0,InputProps:{startAdornment:r.a.createElement(ce.a,{position:"start"},"#")}})),r.a.createElement(f.a,{textAlign:"center",m:1},r.a.createElement(h.a,{autoFocus:!0,variant:"outlined",size:"small",onClick:v},"Add"))))},ue=function(e){var t,a=e.setProfile,n=e.profile,i=e.editable,l=te(),c=r.a.useState(!1),o=Object(C.a)(c,2),s=o[0],m=o[1],u=r.a.useState(""),d=Object(C.a)(u,2),g=d[0],b=d[1],E=function(){m(!1)},v=function(){if(a){var e=n.lookingFor;e.push(g),a(Object(ne.a)({},n,{lookingFor:e})),b(""),E()}};return r.a.createElement(f.a,{marginBottom:"1em"},i?r.a.createElement(f.a,null,r.a.createElement(p.a,null,"LookingFor",":"),n.lookingFor.map((function(e){return r.a.createElement(re.a,{key:e,label:e,className:l.chip,onDelete:(t=e,function(){a&&a(Object(ne.a)({},n,{lookingFor:n.lookingFor.filter((function(e){return e!==t}))}))})});var t})),r.a.createElement(re.a,{icon:r.a.createElement(se.a,null),className:l.chip,label:"New",clickable:!0,onClick:function(){m(!0)}})):r.a.createElement(f.a,{textAlign:"left"},r.a.createElement(p.a,null,"LookingFor",":"),n.lookingFor.map((function(e){return r.a.createElement(re.a,{key:e,label:e,className:l.chip,variant:"outlined"})}))),r.a.createElement(ie.a,{onClose:E,"aria-labelledby":"customized-dialog-title",open:s},r.a.createElement(le.a,{dividers:!0},r.a.createElement(S.a,{id:"outlined-search",label:"Search field",type:"search",variant:"outlined",value:g,onChange:function(e){var t=e.target.value;b(t)},onKeyDown:(t=v,function(e){13===e.keyCode&&t()}),fullWidth:!0,autoFocus:!0,InputProps:{startAdornment:r.a.createElement(ce.a,{position:"start"},"#")}})),r.a.createElement(f.a,{textAlign:"center",m:1},r.a.createElement(h.a,{autoFocus:!0,variant:"outlined",size:"small",onClick:v},"Add"))))},de=function(e){var t=e.user,a=e.setEditable,n=te();return r.a.createElement(f.a,{className:n.profileCard},r.a.createElement(N.a,{container:!0},r.a.createElement(N.a,{item:!0,xs:12,md:6},r.a.createElement("div",{className:"".concat(n.profileAvatar," ").concat(n.visibleAvatarChange)},r.a.createElement("img",{className:n.profileAvatar,src:t.avatar?t.avatar.normal:"/images/noavatar".concat(t.gender,".jpg"),alt:"Your avatar"}),r.a.createElement(o.b,{to:"/gallery"},r.a.createElement("div",{className:"".concat(n.profileAvatar," ").concat(n.profileAvatarChange)},r.a.createElement(ee.a,{className:n.photoLibraryIcon}))))),r.a.createElement(N.a,{item:!0,xs:12,md:6,className:n.basicInputFieldsContainer},r.a.createElement(f.a,null,ae.map((function(e){return r.a.createElement(p.a,{align:"left",className:n.profileTextField,key:e.key},e.name,": ",t[e.key])}))),r.a.createElement(f.a,{textAlign:"left"},r.a.createElement(p.a,{className:n.profileTextField},"Gender",": ",t.gender),r.a.createElement(p.a,{className:n.profileTextField},"Sexual preferences",": ",t.preferences)))),r.a.createElement(p.a,{align:"left",className:n.profileTextField},"Birthday:"," ",new Date(t.birth).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})),r.a.createElement(p.a,{align:"left",className:n.profileTextField},"Latitude: ",t.lat),r.a.createElement(p.a,{align:"left",className:n.profileTextField},"Longitude: ",t.lon),r.a.createElement(ue,{setProfile:null,profile:t,editable:!1}),r.a.createElement(me,{setProfile:null,profile:t,editable:!1}),r.a.createElement(f.a,{textAlign:"center"},r.a.createElement(p.a,{align:"left"},"About",":"),r.a.createElement(f.a,{className:n.paddingSm},r.a.createElement(p.a,{align:"left"},t.biography)),r.a.createElement(h.a,{onClick:function(){return a(!0)},variant:"outlined",className:n.marginSm},"Edit")))},ge=a(486),pe=a(487),he=a(49),fe=a(48),be=a(50),Ee=function(){function e(){Object(B.a)(this,e),this.baseUrl=void 0,this.reducer=function(e,t){switch(t.type){case"request":return{status:"loading"};case"success":return{status:"success",data:t.results};case"failure":return{status:"error",error:t.error}}}}return Object(A.a)(e,[{key:"requestDefault",value:function(e,t){d()(e).then((function(e){!0===e.data.success?t({type:"success",results:e.data.data}):t({type:"failure",error:e.data.message})})).catch((function(e){t({type:"failure",error:e.message})}))}},{key:"request",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};d()(e).then((function(e){!0===e.data.success?t(e):a(e.data.message)})).catch((function(e){a(e.message)}))}},{key:"getReq",value:function(e){return{url:void 0===e?this.baseUrl:e,method:"GET"}}},{key:"postReq",value:function(e,t){return{url:void 0===t?this.baseUrl:t,method:"POST",data:e}}},{key:"putReq",value:function(e,t){return{url:void 0===t?this.baseUrl:t,method:"PUT",data:e}}},{key:"delReq",value:function(e){return{url:void 0===e?this.baseUrl:e,method:"DELETE"}}}]),e}(),ve=function(e){function t(){var e,a;Object(B.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(he.a)(this,(e=Object(fe.a)(t)).call.apply(e,[this].concat(r)))).baseUrl="/api/user",a}return Object(be.a)(t,e),Object(A.a)(t,[{key:"getUser",value:function(e,t){var a=this;this.request(this.getReq("/api/user/".concat(t)),(function(t){e({type:"success",results:Object(ne.a)({},t.data.data,{birth:a.formatDate(t.data.data.birth)})})}),(function(t){e({type:"failure",error:t})}))}},{key:"saveUser",value:function(e,t,a){var n=this;this.request(this.putReq(e),(function(e){t({type:"success",results:Object(ne.a)({},e.data.data,{birth:n.formatDate(e.data.data.birth)})}),a()}),(function(e){t({type:"failure",error:e})}))}},{key:"formatDate",value:function(e){var t=new Date(e),a=new Intl.DateTimeFormat("en",{year:"numeric",month:"2-digit",day:"2-digit"}).formatToParts(t),n=Object(C.a)(a,5),r=n[0].value,i=n[2].value,l=n[4].value;return"".concat(l,"-").concat(r,"-").concat(i)}},{key:"getLocation",value:function(e,t){var a=this;navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(n){var r=n.coords.latitude,i=n.coords.longitude;a.request(a.putReq({lat:r,lon:i}),(function(e){t(r,i)}),(function(t){e({type:"failure",error:t})}))}),(function(e){}))}},{key:"getDistanse",value:function(e,t,a,n){var r=e*Math.PI/180,i=a*Math.PI/180,l=(a-e)*Math.PI/180,c=(n-t)*Math.PI/180,o=Math.sin(l/2)*Math.sin(l/2)+Math.cos(r)*Math.cos(i)*Math.sin(c/2)*Math.sin(c/2),s=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o));return Math.round(100*(6371e3*s/1e3+Number.EPSILON))/100}},{key:"giveHurt",value:function(e,t){this.request(this.postReq({},"/api/heart/".concat(t.id)),(function(a){a.data.success&&e({type:"success",results:Object(ne.a)({},t,{heartsNumber:t.heartsNumber+1,heartIsGiven:!0})})}),(function(t){e({type:"failure",error:t})}))}},{key:"returnHurt",value:function(e,t){this.request(this.delReq("/api/heart/".concat(t.id)),(function(a){a.data.success&&e({type:"success",results:Object(ne.a)({},t,{heartsNumber:t.heartsNumber-1,heartIsGiven:!1})})}),(function(t){e({type:"failure",error:t})}))}}]),t}(Ee),ye=new ve,ke=function(e){var t=te(),a=e.dispatch,i=e.user,l=e.setEditable,c=Object(n.useState)(Object(ne.a)({},i,{interests:i.interests.slice()})),s=Object(C.a)(c,2),m=s[0],u=s[1],d=function(e){return function(t){u(Object(ne.a)({},m,Object(j.a)({},e,t.target.value)))}},g=function(e){return function(t){new RegExp(/(^[-+]?\d*\.?\d*$)/g).test(t.target.value)&&u(Object(ne.a)({},m,Object(j.a)({},e,t.target.value)))}};return r.a.createElement(f.a,{className:t.profileCard},r.a.createElement(N.a,{container:!0},r.a.createElement(N.a,{item:!0,xs:12,md:6},r.a.createElement("div",{className:"".concat(t.profileAvatar," ").concat(t.visibleAvatarChange)},r.a.createElement("img",{className:t.profileAvatar,src:m.avatar?m.avatar.normal:"/images/noavatar".concat(m.gender,".jpg"),alt:"Your avatar"}),r.a.createElement(o.b,{to:"/gallery"},r.a.createElement("div",{className:"".concat(t.profileAvatar," ").concat(t.profileAvatarChange)},r.a.createElement(ee.a,{className:t.photoLibraryIcon}))))),r.a.createElement(N.a,{item:!0,xs:12,md:6,className:t.basicInputFieldsContainer},r.a.createElement(f.a,null,ae.map((function(e){return r.a.createElement(S.a,{label:e.name,onChange:d(e.key),value:m[e.key],key:e.key,fullWidth:!0,margin:"dense"})}))),r.a.createElement(f.a,null,r.a.createElement(ge.a,{component:"fieldset"},r.a.createElement(pe.a,{component:"legend"},"Choose your Gender"),r.a.createElement(L.a,{"aria-label":"gender",value:m.gender||"",onChange:d("gender"),row:!0},["male","female"].map((function(e){return r.a.createElement(F.a,{key:"gender"+e,value:e,control:r.a.createElement(D.a,{color:"primary"}),label:e,labelPlacement:"start"})})))),r.a.createElement(ge.a,{component:"fieldset"},r.a.createElement(pe.a,{component:"legend"},"Your sexual preference"),r.a.createElement(L.a,{"aria-label":"preferences",row:!0,value:m.preferences,onChange:d("preferences")},["male","female","male and female"].map((function(e){return r.a.createElement(F.a,{key:"pref"+e,value:e,control:r.a.createElement(D.a,{color:"primary"}),label:e,labelPlacement:"start"})}))))))),r.a.createElement(S.a,{id:"date",label:"Birthday",type:"date",defaultValue:m.birth,onChange:d("birth"),InputLabelProps:{shrink:!0}}),r.a.createElement(p.a,null,"Location"),r.a.createElement(N.a,{container:!0},r.a.createElement(N.a,{xs:4,item:!0},r.a.createElement(S.a,{label:"Latitude",onChange:g("lat"),value:m.lat,fullWidth:!0,margin:"dense"})),r.a.createElement(N.a,{xs:4,item:!0},r.a.createElement(S.a,{label:"Longitude",onChange:g("lon"),value:m.lon,fullWidth:!0,margin:"dense"})),r.a.createElement(N.a,{xs:4,item:!0},r.a.createElement(h.a,{onClick:function(){return ye.getLocation(a,(function(e,t){return u(Object(ne.a)({},m,{lat:e,lon:t}))}))},variant:"outlined",style:{margin:"auto",paddingLeft:"1.5em"}},"Detect"))),r.a.createElement(ue,{setProfile:u,profile:m,editable:!0}),r.a.createElement(me,{setProfile:u,profile:m,editable:!0}),r.a.createElement(f.a,{textAlign:"center"},r.a.createElement(S.a,{fullWidth:!0,id:"outlined-multiline-static",label:"About",multiline:!0,rows:"8",variant:"outlined",value:m.biography,onChange:d("biography")}),r.a.createElement(h.a,{onClick:function(){a({type:"success",results:i}),l(!1)},variant:"outlined",className:t.marginSm},"Close"),r.a.createElement(h.a,{onClick:function(){return ye.saveUser(Object(ne.a)({},m,{interests:m.interests,avatar:void 0}),a,(function(){return l(!1)}))},variant:"outlined",className:t.marginSm},"Save")))},je=n.createContext(null),xe=je.Provider,Oe=je.Consumer,we=function(){var e=Object(n.useState)(!1),t=Object(C.a)(e,2),a=t[0],i=t[1];return r.a.createElement(Oe,null,(function(e){return e&&r.a.createElement(g.a,{maxWidth:"md"},a&&"success"===e.state.status&&r.a.createElement(ke,{user:e.state.data,dispatch:e.dispatch,setEditable:i}),!a&&"success"===e.state.status&&r.a.createElement(de,{user:e.state.data,setEditable:i}))}))},Ce=a(499),Ne=a(522),Se=a(485),Ie=function(e){function t(){var e,a;Object(B.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(he.a)(this,(e=Object(fe.a)(t)).call.apply(e,[this].concat(r)))).baseUrl="/api/image",a.uploadImage=function(e,t){var n=e.target;if(n.files){var r=new FormData;r.append("image",n.files[0]),a.request(a.postReq(r),(function(){a.getImages(t)}),(function(e){t({type:"failure",error:e})}))}},a.deleteImage=function(e,t){a.request(a.delReq("/api/image/".concat(e)),(function(){a.getImages(t)}),(function(e){t({type:"failure",error:e})}))},a.setAvatar=function(e,t){a.request(a.putReq({avatar:e},"/api/user"),(function(){a.getImages(t)}),(function(e){t({type:"failure",error:e})}))},a}return Object(be.a)(t,e),Object(A.a)(t,[{key:"getImages",value:function(e,t){this.requestDefault(this.getReq(),e)}},{key:"getImagesForSpecificUser",value:function(e,t){this.requestDefault(this.getReq("/api/image/"+t),e)}}]),t}(Ee),Be=a(239),Ae=a(519),qe=a(227),Re=a.n(qe),Te=Object(x.a)((function(e){var t,a;return Object(O.a)({card:Object(j.a)({marginTop:"1em",marginBottom:"1em",padding:"1em"},e.breakpoints.down("xs"),{marginTop:"0.5em",marginBottom:"0.5em",padding:"0.5em"}),imagesContainer:{display:"flex",flexWrap:"wrap"},root:{display:"flex",flexWrap:"wrap",width:"100%"},centered:{position:"absolute",left:"50%",top:"50%",msTransform:"translateY(-50%)",transform:"translateX(-50%) translateY(-50%)",width:"fit-content",height:"fit-content"},image:(t={display:"inline-block",fontSize:"12px",position:"relative",height:"20em",border:"1px groove ".concat(e.palette.primary.main),margin:"1.16%",width:"31%"},Object(j.a)(t,e.breakpoints.down("xs"),{height:"10em","& $imageBackdrop":{opacity:.25},"& $thumbUp":{visibility:"visible"},"& $edit":{visibility:"visible"}}),Object(j.a)(t,"&:hover",{"& $imageBackdrop":{opacity:.25},"& $thumbUp":{visibility:"visible"},"& $edit":{visibility:"visible"}}),t),imageBackdrop:{opacity:0,backgroundColor:"black"},imageButton:{position:"absolute",right:0,top:0,bottom:0,display:"flex",color:e.palette.common.white},imageSrc:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundSize:"cover",backgroundPosition:"center 40%"},thumbUp:Object(j.a)({right:"1em",bottom:"1em"},e.breakpoints.down("xs"),{right:"0.1em",bottom:"0.1em"}),edit:Object(j.a)({right:"1em",top:"1em"},e.breakpoints.down("xs"),{right:"0.1em",top:"0.1em"}),iconButton:(a={height:"3em",position:"absolute",right:"1em",bottom:"1em",display:"flex",alignItems:"center",color:"white",visibility:"hidden"},Object(j.a)(a,e.breakpoints.down("xs"),{right:"0.1em",bottom:"0.1em",visibility:"hidden"}),Object(j.a)(a,"&:hover",{backgroundColor:"rgba(255, 255, 255, 0.5)"}),a),thumbsCount:{margin:"0.1em"}})})),Me=new Ie,Le=function(e){var t=Te(),a=r.a.useState(null),n=Object(C.a)(a,2),i=n[0],l=n[1],c=Boolean(i),o=function(){l(null)},s=r.a.createElement(Be.a,{PaperProps:{style:{border:"1px solid #d3d4d5"},onMouseLeave:o},anchorEl:i,transformOrigin:{vertical:"top",horizontal:"center"},keepMounted:!0,open:c,onClose:o},r.a.createElement(Ae.a,{onClick:function(){return Me.setAvatar(e.id,e.dispatch)}},"Set as Avatar"),r.a.createElement(Ae.a,{onClick:function(){return Me.deleteImage(e.id,e.dispatch)}},"Remove"));return r.a.createElement(h.a,{key:"edit",size:"small",className:"".concat(t.iconButton," ").concat(t.edit),onClick:function(e){l(e.currentTarget)}},r.a.createElement(Re.a,null),s)},Fe=new Ie,De=function(){var e=Te(),t=Object(n.useReducer)(Fe.reducer,{status:"loading"}),a=Object(C.a)(t,2),i=a[0],l=a[1];return Object(n.useEffect)((function(){Fe.getImages(l)}),[]),r.a.createElement(g.a,null,"success"===i.status&&r.a.createElement(Ce.a,{className:e.card},r.a.createElement(p.a,{align:"center"},"Gallery"),r.a.createElement("div",{className:e.imagesContainer},r.a.createElement("div",{className:e.image},r.a.createElement(Ne.a,{title:"Add new photo","aria-label":"add"},r.a.createElement(h.a,{className:e.centered,size:"small",component:"label"},r.a.createElement(Se.a,{type:"file",style:{display:"none"},onChange:function(e){return Fe.uploadImage(e,l)}}),r.a.createElement(se.a,{color:"primary",fontSize:"large"})))),i.data.map((function(t,a){return r.a.createElement("div",{key:a,className:e.image},r.a.createElement("span",{className:e.imageSrc,style:{backgroundImage:"url(".concat(t.image.thumbnail,")")}}),r.a.createElement("div",{className:"".concat(e.imageBackdrop," ").concat(e.imageSrc)}),r.a.createElement(Le,{id:t.id,dispatch:l}))})))))},Ue=a(238),ze=a(517),Pe=a(500),We=a(501),He=a(518),Ge=a(502),Ve=a(152),Ye=a(503),$e=a(229),Ze=a.n($e),Ke=function(e){function t(){var e,a;Object(B.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(he.a)(this,(e=Object(fe.a)(t)).call.apply(e,[this].concat(r)))).baseUrl="/api/search",a}return Object(be.a)(t,e),Object(A.a)(t,[{key:"searchUsers",value:function(e,t){this.requestDefault(this.getReq("/api/search?".concat(t)),e)}}]),t}(Ee),Je=Object(x.a)((function(e){return Object(O.a)({root:{display:"flex",flexWrap:"wrap",width:"100%",marginTop:0},image:Object(j.a)({position:"relative",height:200,width:"31%",margin:"1.16%"},e.breakpoints.down("xs"),{width:"47.6%",height:100}),focusVisible:{},imageButton:{position:"absolute",right:0,top:0,bottom:0,display:"flex",color:e.palette.common.white},imageSrc:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundSize:"cover",backgroundPosition:"center 40%"},imageTitle:{position:"relative",padding:"".concat(e.spacing(1),"px ").concat(e.spacing(1),"px ").concat(e.spacing(1)+6,"px"),fontWeight:"bold"},searchFiltersContainer:{position:"sticky",top:0,left:0,right:0,backgroundColor:e.palette.background.default,zIndex:1}})})),Xe=new Ke,Qe=function(){var e=Je(),t=r.a.useReducer(Xe.reducer,{status:"loading"}),a=Object(C.a)(t,2),i=a[0],l=a[1],c=Object(n.useRef)(null),s=new URLSearchParams(window.location.search),m=r.a.useState(s.get("lookingfor")),u=Object(C.a)(m,2),d=u[0],g=u[1],b=r.a.useState(s.get("interest")),E=Object(C.a)(b,2),v=E[0],y=E[1],k=r.a.useState(Number(s.get("distance"))||10),j=Object(C.a)(k,2),x=j[0],O=j[1];Object(n.useEffect)((function(){var e=c.current;return null===e||void 0===e||e.addEventListener("scroll",w),Xe.searchUsers(l,window.location.search),function(){return null===e||void 0===e?void 0:e.removeEventListener("scroll",w)}}),[]);var w=function(){if(c.current)c.current.scrollHeight,c.current.scrollTop,c.current.offsetHeight};return r.a.createElement("div",{ref:c},r.a.createElement(ze.a,{className:e.searchFiltersContainer},r.a.createElement(Pe.a,{expandIcon:r.a.createElement(Ze.a,{style:{color:"white"}}),"aria-controls":"panel1a-content",id:"panel1a-header",style:{flexDirection:"initial"}},r.a.createElement(p.a,{style:{width:"100%",textAlign:"right"}},"Search options")),r.a.createElement(We.a,null,r.a.createElement(N.a,{container:!0,spacing:2},r.a.createElement(N.a,{item:!0,xs:4},r.a.createElement(p.a,{id:"discrete-slider",gutterBottom:!0},"Distance"),r.a.createElement(He.a,{value:x,getAriaValueText:function(e){return"".concat(e,"km")},"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",onChange:function(e,t){return a=Number(t),void O(a);var a},min:10,max:1e3})),r.a.createElement(N.a,{item:!0,xs:4},r.a.createElement(p.a,{id:"discrete-slider",gutterBottom:!0},"LookingFor"),r.a.createElement(S.a,{type:"text",fullWidth:!0,value:d||"",onChange:function(e){return g(e.currentTarget.value)}})),r.a.createElement(N.a,{item:!0,xs:4},r.a.createElement(p.a,{id:"discrete-slider",gutterBottom:!0},"Interest"),r.a.createElement(S.a,{type:"text",fullWidth:!0,value:v||"",onChange:function(e){return y(e.currentTarget.value)}}))),r.a.createElement(Ge.a,null,r.a.createElement(h.a,{size:"small",variant:"outlined",onClick:function(){d?s.set("lookingfor",d):s.delete("lookingfor"),v?s.set("interest",v):s.delete("interest"),x?s.set("distance",String(x)):s.delete("distance"),window.history.pushState({},"","/search?&"+s.toString()),Xe.searchUsers(l,window.location.search)}},"Search")))),r.a.createElement(f.a,{className:"".concat(e.root)},"success"===i.status&&i.data.map((function(t,a){var n;return r.a.createElement(Ve.a,{focusRipple:!0,key:"user"+a,className:e.image,focusVisibleClassName:e.focusVisible},r.a.createElement(o.b,{to:t.username},r.a.createElement("span",{className:e.imageSrc,style:{backgroundImage:"url(".concat(t.avatar?null===(n=t.avatar)||void 0===n?void 0:n.thumbnail:"/images/noavatar".concat(t.gender,".jpg"),")")}}),r.a.createElement("span",{className:e.imageButton},r.a.createElement(p.a,{component:"span",variant:"subtitle1",color:"inherit",className:e.imageTitle},t.firstName+" "+t.lastName))))})),"loading"===i.status&&Object(Ue.a)(Array(9)).map((function(t,a){return r.a.createElement(Ye.a,{key:"skel"+a,variant:"rect",className:e.image,style:{backgroundColor:"gray"}})}))))},_e=a(504),et=a(441),tt=a(505),at=a(506),nt=a(231),rt=a.n(nt),it=a(230),lt=a.n(it),ct=Object(x.a)((function(e){return Object(O.a)({user:{},imagesList:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper,marginTop:"1em"},gridList:{flexWrap:"nowrap",transform:"translateZ(0)"},title:{color:e.palette.primary.light},titleBar:{background:"linear-gradient(to top, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 70%, rgba(0,0,0,0) 100%)"}})})),ot=new ve,st=new Ie,mt=function(){var e=Object(c.g)().user,t=Object(n.useReducer)(ot.reducer,{status:"loading"}),a=Object(C.a)(t,2),i=a[0],l=a[1],o=Object(n.useReducer)(st.reducer,{status:"loading"}),s=Object(C.a)(o,2),m=s[0],u=s[1],d=ct(),g=te();return Object(n.useEffect)((function(){ot.getUser(l,e),st.getImagesForSpecificUser(u,e)}),[e]),r.a.createElement(Oe,null,(function(e){return"success"===(null===e||void 0===e?void 0:e.state.status)&&"success"===i.status&&r.a.createElement(N.a,{container:!0,style:{height:"inherit",width:"100%",padding:"2em"},spacing:2},r.a.createElement(N.a,{item:!0,xs:12,md:6},r.a.createElement(_e.a,{image:i.data.avatar?i.data.avatar.normal:"/images/noavatar".concat(i.data.gender,".jpg"),style:{paddingTop:"150%"}})),r.a.createElement(N.a,{item:!0,xs:12,md:6},r.a.createElement("div",{style:{display:"flex",fontSize:"1.8em",lineHeight:"1.5em"}},r.a.createElement(p.a,{variant:"h4",style:{fontWeight:"bold"}},"".concat(i.data.firstName,", ").concat(i.data.age)),r.a.createElement("div",{style:{flexGrow:1}}),i.data.heartsNumber,r.a.createElement(et.a,{style:{marginTop:"-12px"},onClick:i.data.heartIsGiven?function(){return ot.returnHurt(l,i.data)}:function(){return ot.giveHurt(l,i.data)}},r.a.createElement(lt.a,{style:{width:"1.5em",height:"1.5em",color:i.data.heartIsGiven?"#d73652":"#fff"}}))),r.a.createElement(p.a,{style:{borderBottom:"2px solid #28272c",paddingBottom:"1em"}},r.a.createElement(rt.a,null)," ",ot.getDistanse(e.state.data.lat,e.state.data.lon,i.data.lat,i.data.lon)," km away"),r.a.createElement(p.a,{variant:"h5",style:{color:"#908f96",marginTop:"1em"}},"Looking for"),i.data.lookingFor.map((function(e){return r.a.createElement(re.a,{key:e,label:e,className:g.chip})})),r.a.createElement(p.a,{variant:"h5",style:{color:"#908f96",marginTop:"1em"}},"About"),r.a.createElement(p.a,null,i.data.biography),"success"===m.status&&r.a.createElement("div",{className:d.imagesList},r.a.createElement(tt.a,{className:d.gridList,cols:3},m.data.map((function(e){return r.a.createElement(at.a,{key:e.id,style:{height:"10em"}},r.a.createElement("img",{src:e.image.thumbnail,alt:""}))}))),r.a.createElement(N.a,{container:!0},r.a.createElement(N.a,{item:!0,xs:6,style:{marginTop:"1em"}},r.a.createElement(p.a,{style:{color:"#908f96",fontSize:"0.8rem",textTransform:"uppercase"}},"Relationship")),r.a.createElement(N.a,{item:!0,xs:6,style:{marginTop:"1em"}},r.a.createElement(p.a,null,"It's complicated")),r.a.createElement(N.a,{item:!0,xs:6,style:{marginTop:"1em"}},r.a.createElement(p.a,{style:{color:"#908f96",fontSize:"0.8rem",textTransform:"uppercase"}},"Interests")),r.a.createElement(N.a,{item:!0,xs:6,style:{marginTop:"1em"}},i.data.interests.map((function(e,t){return r.a.createElement("span",{key:t,style:{marginRight:"0.2em"}},"#",e)})))))))}))},ut=a(507),dt=a(508),gt=a(515),pt=a(524),ht=Object(x.a)((function(e){return Object(O.a)({grow:{flexGrow:1},appBar:{backgroundColor:e.palette.background.default,boxShadow:"none",zIndex:2},menuList:{padding:0},iconButton:{borderRadius:"0.1em",padding:"1em",width:"100%",justifyContent:"start"},link:{textDecoration:"none",color:e.palette.text.primary}})})),ft=a(232),bt=a.n(ft),Et=function(e){var t=ht(),a=e.setMobileChatlist,n=r.a.useState(null),i=Object(C.a)(n,2),l=i[0],c=i[1],s=function(e){c(e.currentTarget)},m=function(){c(null)},u=function(){c(null),d.a.post("/api/auth/logout").then((function(e){T.setAuthorized(!1),window.location.reload()})).catch((function(e){}))},g=r.a.createElement(Oe,null,(function(e){return"success"===(null===e||void 0===e?void 0:e.state.status)&&r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.a.createElement(o.b,{to:"/search",className:t.link,onClick:m},r.a.createElement(h.a,{className:t.iconButton,color:"inherit"},"Search")),r.a.createElement(o.b,{to:e.state.data.username,className:t.link,onClick:m},r.a.createElement(h.a,{className:t.iconButton,color:"inherit"},"My profile")),r.a.createElement(o.b,{to:"/profile",className:t.link,onClick:m},r.a.createElement(h.a,{className:t.iconButton,color:"inherit"},"Settings")),r.a.createElement(h.a,{className:t.iconButton,color:"inherit",onClick:u},"Exit"))}));return r.a.createElement(Oe,null,(function(e){var n;return"success"===(null===e||void 0===e?void 0:e.state.status)&&r.a.createElement(ut.a,{position:"static",className:t.appBar},r.a.createElement(dt.a,null,r.a.createElement(gt.a,{mdUp:!0},r.a.createElement(et.a,{onClick:function(){return a(!0)}},r.a.createElement(bt.a,null))),r.a.createElement(o.b,{to:"/search",className:t.link},r.a.createElement(p.a,{variant:"h3"},"Matcha")),r.a.createElement("div",{className:t.grow}),r.a.createElement("div",{onClick:s},r.a.createElement(pt.a,{alt:"Avatar",src:null===(n=e.state.data.avatar)||void 0===n?void 0:n.thumbnail,style:{cursor:"pointer"}})),r.a.createElement(Be.a,{id:"simple-menu",anchorEl:l,keepMounted:!0,open:Boolean(l),onClose:m},g)))}))},vt=a(233),yt=a.n(vt),kt=Object(x.a)((function(e){return Object(O.a)({chatsList:{paddingLeft:"1em",minWidth:"18em"},chatListHeader:{position:"static",minHeight:"64px",marginBottom:"1.5em",display:"flex"},chatItem:{display:"flex",textAlign:"left",justifyContent:"flex-start",width:"100%",marginBottom:"1.5em"},chatItemAvatar:{width:"3.5em",height:"3.5em",marginRight:"0.5em"},chatName:{fontSize:"1rem"},chatTime:{color:"#94929c",fontSize:"0.7rem"},chatMessage:{fontSize:"0.8rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",marginLeft:"0.2em"}})})),jt=function(e){var t=kt(),a=e.setChat,n=e.chatListState,i=e.setMobileChatlist;return r.a.createElement(f.a,{className:t.chatsList},r.a.createElement(f.a,{className:t.chatListHeader},r.a.createElement(p.a,{variant:"h5",style:{alignSelf:"center"}},"Messages")),r.a.createElement(f.a,null,"success"===n.status&&n.data.map((function(e,n){var l,c,o;return r.a.createElement(Ve.a,{className:t.chatItem,key:n,onClick:function(){return function(e){i&&i(!1),a(e)}(e)}},r.a.createElement(pt.a,{className:t.chatItemAvatar,alt:"avatar",src:e.interlocutorAvatar}),r.a.createElement(f.a,{style:{overflow:"hidden"}},r.a.createElement(p.a,{className:t.chatName},e.interlocutorName),r.a.createElement(p.a,{className:t.chatTime},(null===(l=e.lastMsg)||void 0===l?void 0:l.time)?new Date(e.lastMsg.time).toLocaleString():""),r.a.createElement(f.a,{style:{display:"flex"}},e.interlocutorId===(null===(c=e.lastMsg)||void 0===c?void 0:c.senderId)&&r.a.createElement(yt.a,{fontSize:"small"}),r.a.createElement(p.a,{className:t.chatMessage},(null===(o=e.lastMsg)||void 0===o?void 0:o.text)||"No messages"))))}))))},xt=a(235),Ot=a.n(xt),wt=a(234),Ct=a.n(wt),Nt=function(e){function t(){var e,a;Object(B.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(he.a)(this,(e=Object(fe.a)(t)).call.apply(e,[this].concat(r)))).baseUrl="/api/message",a}return Object(be.a)(t,e),Object(A.a)(t,[{key:"getMessages",value:function(e,t,a){this.request(this.getReq("/api/message/chat/".concat(t)),(function(t){e({type:"success",results:t.data.data}),a()}),(function(t){e({type:"failure",error:t})}))}}]),t}(Ee),St=Object(x.a)((function(e){return Object(O.a)({chatBox:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:2},messageBox:{overflowY:"scroll",paddingLeft:20,paddingRight:20,height:"calc(100% - 14em)"},close:{display:"flex",padding:"0.8em",borderBottom:"1px solid #c4c4c480",marginBottom:"0.5em"},message:{position:"relative",marginBottom:"10px",padding:"10px",textAlign:"left",font:"400 .9em 'Open Sans', sans-serif",borderRadius:"10px"},leftMessage:{marginRight:"20px",backgroundColor:"#24232a"},rightMessage:{marginLeft:"20px",backgroundColor:"#e92d41"},messageContent:{padding:"0",margin:"0"},messageInput:{position:"absolute",left:0,right:0,bottom:0,padding:10,font:"400 .9em 'Open Sans', sans-serif"}})})),It=new Nt,Bt=function(e){var t=St(),a=e.chat,n=e.setChat,i=e.socketManager,l=r.a.useState(""),c=Object(C.a)(l,2),o=c[0],s=c[1],m=r.a.useRef(null),u=r.a.useReducer(It.reducer,{status:"loading"}),d=Object(C.a)(u,2),g=d[0],h=d[1],b=function(e){m&&m.current&&(e?m.current.scrollIntoView({behavior:"smooth"}):m.current.scrollIntoView())};r.a.useEffect((function(){return It.getMessages(h,a.id,(function(){b(!1)})),i.socket.on("messageSent",(function(e){s(""),h({type:"success",results:e}),b(!0)})),i.socket.on("message",(function(e){h({type:"success",results:e}),b(!0)})),function(){i.socket.removeListener("message"),i.socket.removeListener("messageSent")}}),[a,i.socket]);var E,v=function(){var e=o.replace(/(\r\n|\n|\r)/gm,"");s(e),e.length>0&&i.sendMessage({chatId:a.id,receiverId:a.interlocutorId,text:e})};return r.a.createElement(Ce.a,{className:t.chatBox},r.a.createElement(f.a,{className:t.close},r.a.createElement(pt.a,{src:a.interlocutorAvatar,style:{width:"3em",height:"3em"}}),r.a.createElement(p.a,{variant:"h6",style:{padding:"0.5em"}},a.interlocutorName),r.a.createElement("div",{style:{flexGrow:1}}),r.a.createElement(et.a,{style:{width:"2em",height:"2em"},onClick:function(){return n(null)}},r.a.createElement(Ct.a,{fontSize:"default"}))),r.a.createElement(f.a,{color:"text.primary",className:t.messageBox},"loading"===g.status&&r.a.createElement("div",null,"loading.."),"success"===g.status&&g.data.map((function(e,n){var i=a.interlocutorId===e.senderId?t.leftMessage:t.rightMessage;return r.a.createElement("div",{className:"".concat(t.message," ").concat(i),key:"msg"+n},r.a.createElement(p.a,{className:t.messageContent},e.message))})),r.a.createElement("div",{ref:m})),r.a.createElement(S.a,{placeholder:"Enter your message",className:t.messageInput,multiline:!0,variant:"outlined",rowsMax:"4",value:o,onChange:function(e){return s(e.target.value)},onKeyDown:(E=v,function(e){13===e.keyCode&&E()}),InputProps:{endAdornment:r.a.createElement(et.a,{onClick:v},r.a.createElement(Ot.a,null))}}))},At=a(516),qt=a(236),Rt=a.n(qt),Tt=function(){function e(){Object(B.a)(this,e),this.address="https://matcha.mrybak.me:443",this.socket=Rt()(this.address),this.socket.on("error",(function(e){})),this.socket.on("connect",(function(){}))}return Object(A.a)(e,[{key:"sendMessage",value:function(e){this.socket.emit("message",e)}}]),e}(),Mt=function(e){function t(){var e,a;Object(B.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(he.a)(this,(e=Object(fe.a)(t)).call.apply(e,[this].concat(r)))).baseUrl="/api/chat",a}return Object(be.a)(t,e),Object(A.a)(t,[{key:"getChats",value:function(e,t){this.request(this.getReq(),(function(a){e({type:"success",results:a.data.data}),t()}),(function(t){e({type:"failure",error:t})}))}}]),t}(Ee),Lt=new ve,Ft=new Tt,Dt=new Mt,Ut=function(e){var t=r.a.useReducer(Lt.reducer,{status:"loading"}),a=Object(C.a)(t,2),n=a[0],i=a[1],l=r.a.useState(null),o=Object(C.a)(l,2),s=o[0],m=o[1],u=r.a.useState(!1),d=Object(C.a)(u,2),p=d[0],h=d[1],f=r.a.useReducer(Dt.reducer,{status:"loading"}),b=Object(C.a)(f,2),E=b[0],v=b[1],y=w();return r.a.useEffect((function(){return Lt.getUser(i),Dt.getChats(v,(function(){Ft.socket.on("chatlist",(function(e){Dt.getChats(v,(function(){}))}))})),function(){Ft.socket.removeListener("chatlist")}}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(xe,{value:{state:n,dispatch:i}},r.a.createElement(g.a,{style:{paddingTop:"0.5em",paddingBottom:"0.5em"}},r.a.createElement(Ce.a,{style:{border:"1px solid bisque"}},r.a.createElement(N.a,{container:!0,style:{height:"calc(100vh - 2em)"}},r.a.createElement(gt.a,{smDown:!0},r.a.createElement(N.a,{item:!0,md:3,style:{borderRight:"1px solid bisque"}},r.a.createElement(jt,{setChat:m,chatListState:E}))),r.a.createElement(gt.a,{mdUp:!0},r.a.createElement(At.a,{anchor:"left",open:p,onClose:function(){return h(!1)},onOpen:function(){return h(!0)}},r.a.createElement(jt,{setChat:m,chatListState:E,setMobileChatlist:h}))),r.a.createElement(c.b,{path:e.path},r.a.createElement(N.a,{item:!0,xs:12,md:9,className:y.rightScrollingContainer},r.a.createElement(Et,{setMobileChatlist:h}),s?r.a.createElement(Bt,{chat:s,setChat:m,socketManager:Ft}):"",r.a.createElement("div",{style:{height:"calc(100% - 5em)",overflowY:"scroll"}},r.a.createElement(e.component,null)))))))))},zt=function(e){return T.isAuthorized()?r.a.createElement(Ut,{component:e.component,path:e.path}):r.a.createElement(c.a,{to:"/login"})},Pt=a(510),Wt=a(509),Ht=a(237);var Gt=function(e){return function(){var t=function(e){switch(e){case"light":return{primary:{main:"#FE5D26"},secondary:{main:"#19857b"},background:{default:"#fff"},text:{primary:"#1a191e"}};case"dark":return{primary:{main:"#FE5D26"},secondary:{main:"#19857b"},background:{default:"#1a191e",paper:"#1a191e"},text:{primary:"#fff",secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)"}}}}(e);return Object(Ht.a)({palette:t,typography:{fontFamily:["Roboto","Helvetica","Arial"].join(","),fontSize:13},overrides:{MuiIconButton:{root:{color:"#fff","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.19)"}}},MuiOutlinedInput:{notchedOutline:{borderColor:"bisque"}},MuiButton:{contained:{background:"linear-gradient(45deg, #FE5D26 30%, #FF8E53 90%)",color:"white"},outlined:{color:"#fff",backgroundColor:"#1a191e",borderColor:"#fff"},root:{color:"#fff","&:hover":{backgroundColor:"#49484a"}}},MuiChip:{root:{color:"#fff",backgroundColor:"#FE5D26"},outlined:{color:"#fff",backgroundColor:"#FE5D26"}},MuiPaper:{outlined:{borderColor:"#fff"}},MuiTypography:{h3:{fontFamily:"Dancing Script",fontSize:"34px"}}}})}};l.a.render(r.a.createElement((function(){var e=r.a.useMemo(Gt("dark"),["dark"]);return r.a.createElement(Wt.a,{theme:e},r.a.createElement(Pt.a,null),r.a.createElement(o.a,null,r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/",exact:!0,component:M},r.a.createElement(Q,{path:"/",component:M})),r.a.createElement(Q,{path:"/login",component:M}),r.a.createElement(Q,{path:"/register",component:$}),r.a.createElement(Q,{path:"/verify/:userid/:uuid",component:X}),r.a.createElement(zt,{path:"/profile",component:we}),r.a.createElement(zt,{path:"/search",component:Qe}),r.a.createElement(zt,{path:"/gallery",component:De}),r.a.createElement(zt,{path:"/:user",component:mt}))))}),null),document.querySelector("#root"))}},[[254,1,2]]]);
//# sourceMappingURL=main.d05a5b67.chunk.js.map